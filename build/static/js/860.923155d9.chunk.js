"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[860],{54860:function(e,i,o){o.r(i),o.d(i,{default:function(){return Q}});var n=o(72791),t=o(12978),s=o(34088),a=o(71078),l=o(96755),r={container:"booking_container__0GDtX",left:"booking_left__+P70F",left_cnt:"booking_left_cnt__9bHdk",right:"booking_right__nx7w2",section_user:"booking_section_user__9sHwz",section_org:"booking_section_org__dL7ZO",right_org:"booking_right_org__5SM3m",right_org_img:"booking_right_org_img__45pfK",right_org_name:"booking_right_org_name__FgGi5",right_branches:"booking_right_branches__5GJrD",right_branch_default:"booking_right_branch_default__7oWkM",map_icon:"booking_map_icon__bY6u9",right_icon:"booking_right_icon__Lh+ry",right_icon_ch:"booking_right_icon_ch__Q30Uo",branch_default_address:"booking_branch_default_address__xHfj0",right_org_list_branch:"booking_right_org_list_branch__f4+cB",branch_show:"booking_branch_show__m131i",branch_item:"booking_branch_item__KJtXy",branch_item_check:"booking_branch_item_check__rLDuW",branch_item_name:"booking_branch_item_name__oZA3f",service_list:"booking_service_list__E+tBI",service_item:"booking_service_item__mC0c0",service_right:"booking_service_right__9pKDC",service_name:"booking_service_name__-jNeD",service_quantity:"booking_service_quantity__7D3su",section_time:"booking_section_time__kjnDJ",section_time_left:"booking_section_time_left__QiryY",section_time_text:"booking_section_time_text__ru82T",section_time_btn:"booking_section_time_btn__L1vLZ",section_note:"booking_section_note__Hfm4t",note_textarea:"booking_note_textarea__+XvpT",section_payment:"booking_section_payment__wg6oq",section_payment_title:"booking_section_payment_title__SfBeg",section_payment_mt:"booking_section_payment_mt__Vu-lC",section_bill:"booking_section_bill__0xaR+",post_btn:"booking_post_btn__nAooh",open_voucher:"booking_open_voucher__+Kv70",open_voucher_btn:"booking_open_voucher_btn__VqKhh",booking_calc_item:"booking_booking_calc_item__p3xx4",booking_calc_item_left:"booking_booking_calc_item_left__cRilS",booking_calc_item_right:"booking_booking_calc_item_right__uUJq7",book_time_cnt:"booking_book_time_cnt__i--gQ",book_time_top:"booking_book_time_top__Jrbij",book_time_top_left:"booking_book_time_top_left__Mayd5",book_time_top_right:"booking_book_time_top_right__T8A-4",book_time_bot:"booking_book_time_bot__aF-EB",book_time_bot_btn:"booking_book_time_bot_btn__YZw1d",marker_icon:"booking_marker_icon__uD0cE",org_maker:"booking_org_maker__Zx9GA",org_maker_head:"booking_org_maker_head__nwv29",org_maker_head_img:"booking_org_maker_head_img__o59Fm",org_maker_head_de:"booking_org_maker_head_de__PhMgs",org_maker_head_name:"booking_org_maker_head_name__M4znr",org_maker_dis:"booking_org_maker_dis__wgWyF",org_maker_address:"booking_org_maker_address__j6tv3"},c=o(80184);var _=function(e){var i,o,t;const{t:s}=(0,n.useContext)(a.I),{service:_,org:d}=e;return(0,c.jsxs)("div",{className:r.service_item,children:[(0,c.jsx)("div",{className:r.right_org_img,children:(0,c.jsx)("img",{src:null!==(i=null===_||void 0===_||null===(o=_.service)||void 0===o?void 0:o.image_url)&&void 0!==i?i:null===d||void 0===d?void 0:d.image_url,onError:e=>(0,l.bW)(e),alt:""})}),(0,c.jsxs)("div",{className:r.service_right,children:[(0,c.jsx)("p",{className:r.service_name,children:null===_||void 0===_||null===(t=_.service)||void 0===t?void 0:t.service_name}),(0,c.jsxs)("p",{className:r.service_quantity,children:[s("pr.quantity"),":",null===_||void 0===_?void 0:_.quantity]})]})]})},d=o(19598),m=o(54167),h=o(4456),v=o(29818),u=o(78374),g=o(41727),b=o(3444),p=o(97892),k=o.n(p);var x=function(e){const{Time:i,onChangeItem:o,disablePrev:n,setT:t,t:s,bookTime:a}=e;let l=n;const r=a.date.split("-"),_=parseInt(`${r[2]}${r[1]}${r[0]}`),d=parseInt(k()().format("YYYYMMDD"));return _>d&&(l=!1),_===d&&parseInt(i.format("HHmm"))>=parseInt(k()().format("HHmm"))+10&&(l=!1),(0,c.jsx)("div",{onClick:()=>{!1===l&&(o(i.format("HH:mm")),t(i.format("HH:mm")))},className:"date-pk__item",children:(0,c.jsx)("div",{style:!0===l?{backgroundColor:"var(--text-hover)",color:"var(--bgWhite)",border:"1px solid transparent",cursor:"not-allowed"}:{},className:i.format("HH:mm")===s?"date-pk__item-box time-act":"date-pk__item-box",children:i.format("HH:mm")})})},j=o(93718);var f=function(e){var i,o,t,s,a,l;const{onChange:r,disablePrev:_,org:d,bookTime:m}=e,h=new Date;let v=h.getDay()+1;h.getDay()+1===1&&(v=8);const u=d&&(0,j.R)(null===d||void 0===d?void 0:d.opening_time),g=null===u||void 0===u?void 0:u.find(((e,i)=>i+2===v)),b=null!==(i=null===g||void 0===g?void 0:g.from_time_opening)&&void 0!==i?i:"",p=null!==(o=null===g||void 0===g?void 0:g.to_time_opening)&&void 0!==o?o:"",f=b.split(":"),y=p.split(":"),[N,C]=(0,n.useState)();let O=k()().set("hour",null!==(t=parseInt(f[0]))&&void 0!==t?t:8).set("minute",null!==(s=parseInt(f[1]))&&void 0!==s?s:0).set("second",0).subtract(30,"minute"),M=k()().set("hour",null!==(a=parseInt(y[0]))&&void 0!==a?a:21).set("minute",null!==(l=parseInt(y[1]))&&void 0!==l?l:0).set("second",0);const w=[];for(;O<M;)O=O.add(30,"minute"),w.push(O);return(0,c.jsx)("div",{className:"time-pk",children:w.map(((e,i)=>(0,c.jsx)(x,{bookTime:m,Time:e,onChangeItem:e=>r(e),disablePrev:_,t:N,setT:C},i)))})};var y=function(e){const{language:i}=(0,n.useContext)(a.I),[,o]=(0,n.useState)(i),{handlePrev:t,handleNext:s,dayObj:l,thisMonth:r}=e;return(0,n.useEffect)((()=>{"vn"===i?o("vi"):"en"===i&&o("en")}),[i]),(0,c.jsx)("div",{className:e.Class,children:(0,c.jsxs)("div",{style:{padding:"16px 0",borderBottom:"1px solid var(--purple)"},className:"calendar-mounth",children:[r+1!==k()().month()+1?(0,c.jsx)("div",{onClick:t,className:"calendar-mounth__prev",children:(0,c.jsx)("img",{className:"calendar-mounth__icon",src:h.Z.pPrev,alt:""})}):(0,c.jsx)("div",{style:{pointerEvents:"none",opacity:"0.5"},className:"calendar-mounth__prev",children:(0,c.jsx)("img",{className:"calendar-mounth__icon",src:h.Z.pPrev,alt:""})}),(0,c.jsx)("span",{className:"calendar-mounth__time text-white-color text-capitalize",children:l.locale("vi").format("MMMM - YYYY")}),(0,c.jsx)("div",{onClick:s,className:"calendar-mounth__next",children:(0,c.jsx)("img",{className:"calendar-mounth__icon",src:h.Z.pNext,alt:""})})]})})},N=o(33860);var C=function(e){const{weekDays:i,weekDayOfFirst:o,weekDayOfLast:n,thisYear:t,thisMonth:s,daysInMonth:a,dayObjOfFirstMonth:l,dayObjOfLastMonth:r,datepick:_,handleGetDate:d}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"calendar",children:[(0,c.jsx)("div",{className:"week-container",children:i.map((e=>(0,c.jsx)("div",{className:"week-cell",children:e},e)))}),(0,c.jsxs)("div",{className:"day-container",children:[(0,N.Z)(o).map((e=>(0,c.jsx)("div",{className:"day-cell day-cell--faded",children:l.subtract(o-e,"day").date()},e))),(0,N.Z)(a).map((e=>(0,c.jsx)("div",{onClick:()=>d(e,s,t),className:`day-cell day-cell--in-month dot-active ${e+1===_.date&&s===_.month&&t===_.year?"  day-cell--today-cur":""} \n                            ${e+1<k()().date()&&s===k()().month()&&t===k()().year()?" day-cell--faded":" "} \n                            ${e+1===k()().date()&&s===k()().month()&&t===k()().year()?" day-cell--today":""}`,children:e+1},e))),(0,N.Z)(13-n).map((e=>(0,c.jsx)("div",{className:"day-cell day-cell--faded",children:r.add(e+1,"day").date()},e)))]})]})})};const O=k()();var M=function(e){const{onChange:i}=e,{t:o}=(0,n.useContext)(a.I),t=[o("Home.su"),o("Home.mo"),o("Home.tu"),o("Home.we"),o("Home.th"),o("Home.fr"),o("Home.sa")],[s,l]=(0,n.useState)(k()());let r=s.year(),_=s.month(),d=s.daysInMonth(),m=k()(`${r}-${_+1}-1`),h=m.day(),v=k()(`${r}-${_+1}-${d}`),u=v.day();const[,g]=(0,n.useState)(k()().format("YYYY-MM")),[b,p]=(0,n.useState)({date:O.date(),month:O.month(),year:O.year()});return(0,c.jsxs)("div",{style:{padding:"0px"},className:"calendar-choosedate",children:[(0,c.jsx)(y,{handlePrev:()=>{l(s.subtract(1,"month")),g(s.subtract(1,"month").format("YYYY-MM"))},handleNext:()=>{l(s.add(1,"month")),g(s.add(1,"month").format("YYYY-MM"))},dayObj:s,Class:"",thisMonth:_}),(0,c.jsx)(C,{weekDays:t,weekDayOfFirst:h,weekDayOfLast:u,thisYear:r,thisMonth:_,daysInMonth:d,dayObjOfFirstMonth:m,dayObjOfLastMonth:v,datepick:b,handleGetDate:(e,o,n)=>{p({date:e+1,month:o,year:n});i(`${e+1<10?`0${e+1}`:`${e+1}`}-${o+1<10?`0${o+1}`:`${o+1}`}-${`${n}`}`)},dayObj:s})]})};var w=function(e){const{t:i}=(0,n.useContext)(a.I),{open:o,setOpen:t,bookTime:s,setBookTime:_,org:d}=e,m=(0,u.oG)();return(0,c.jsxs)(v.Z,{fullScreen:m,open:o,onClose:()=>t(!1),TransitionComponent:l.uT,children:[m&&(0,c.jsx)(b.Z,{onBack:t,title:i("my_ser.time_select")}),(0,c.jsxs)("div",{className:r.book_time_cnt,children:[(0,c.jsxs)("div",{className:r.book_time_top,children:[(0,c.jsx)("div",{className:r.book_time_top_left,children:(0,c.jsx)(M,{disablePrev:!0,onChange:e=>(e=>{_({...s,date:e})})(e)})}),(0,c.jsx)("div",{className:r.book_time_top_right,children:(0,c.jsx)(f,{bookTime:s,org:d,onChange:e=>{return i=e,void _({...s,time:i});var i},disablePrev:!0})})]}),(0,c.jsx)("div",{className:r.book_time_bot,children:(0,c.jsx)(g.Rb,{className:r.book_time_bot_btn,title:i("my_ser.confirm_time"),onClick:()=>t(!1)})})]})]})},Y=o(16407),D=o(763),I=o(21272),H=o(94883);var Z=o(71269),P=o(22546),B=o(77001);var R=function(e){var i,o,s;const{setFinalAmount:l}=e,{t:_}=(0,n.useContext)(a.I),{VOUCHER_APPLY:m}=(0,t.v9)((e=>e.carts)),{org:v}=e,b=(0,d.TH)(),[p,k]=(0,n.useState)(!1),x=null!==(i=null===(o=b.state)||void 0===o?void 0:o.services)&&void 0!==i?i:[],j=null!==(s=null===x||void 0===x?void 0:x.map((e=>e.service.id)))&&void 0!==s?s:[],f=x.map((e=>{var i;return null===e||void 0===e||null===(i=e.service)||void 0===i?void 0:i.discount})).filter(Boolean);let{total:y}=null===x||void 0===x?void 0:x.reduce(((e,i)=>{const{quantity:o,service:n}=i,t=(n.SPECIAL_PRICE>0?n.SPECIAL_PRICE:n.price)*o;return e.total+=t,e}),{total:0});const N=x.map((e=>{var i,o,n,t;return(null===(i=e.service)||void 0===i||null===(o=i.discount)||void 0===o?void 0:o.discount_type)===P.uH.FINAL_PRICE.key?y-(null===(n=e.service.discount)||void 0===n?void 0:n.discount_value)*e.quantity:null===(t=e.service.discount)||void 0===t?void 0:t.discount_value})).filter(Boolean),C=N.length>0&&N.reduce(((e,i)=>e+i)),O=x.map((e=>({id:e.service.id,quantity:e.quantity}))),M=y-C,{vouchersFinal:w,totalVoucherValue:Y}=(0,u.zO)(M,m,O);return(0,n.useEffect)((()=>{let e=!0;return e&&l(M-Y),()=>{e=!1}}),[M,Y]),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:r.open_voucher,children:(0,c.jsx)(g.Rb,{className:r.open_voucher_btn,onClick:()=>k(!0),title:_("pm.enter_coupon_code"),iconSize:16,icon:h.Z.cardDiscountOrange})}),(0,c.jsxs)("div",{className:r.booking_cnt_bot_bill,children:[(0,c.jsxs)("div",{className:r.booking_calc_item,children:[(0,c.jsx)("span",{className:r.booking_calc_item_left,children:_("cart.total_payment")}),(0,c.jsxs)("span",{className:r.booking_calc_item_right,children:[(0,Z.Z)(y),"\u0111"]})]}),w.map(((e,i)=>(0,c.jsxs)("div",{className:r.booking_calc_item,children:[(0,c.jsx)("span",{className:r.booking_calc_item_left,children:e.title}),(0,c.jsxs)("span",{style:{color:"var(--text-orange)"},className:r.booking_calc_item_right,children:["-",(0,Z.Z)(e.discount_value),"\u0111"]})]},i))),(0,c.jsxs)("div",{className:r.booking_calc_item,children:[(0,c.jsx)("span",{className:r.booking_calc_item_left,children:_("pm.pay")}),(0,c.jsxs)("span",{style:{fontWeight:"700"},className:r.booking_calc_item_right,children:[(0,Z.Z)(M-Y),"\u0111"]})]})]}),(0,c.jsx)(B.I,{outDiscounts:f,open:p,setOpen:k,services_id:j,products_id:[],organization:v,cartAmount:M})]})},E=o(52467),S=o(63945),F=o(10266),T=o(83898),A=o(89137),$=o(84931),L=o(2589),q=o(94384),W=o(32470),G=o(89681),V=(o(43161),o(25500));var J=function(e){var i,o;const{org:n,onChooseBranch:t,mapRef:s}=e,a=(0,V.x)(),_=a&&parseFloat(null===a||void 0===a?void 0:a.split(",")[0]),d=a&&parseFloat(null===a||void 0===a?void 0:a.split(",")[1]);return(0,c.jsxs)(G.ZP,{style:{width:"100%",height:"100vh"},initialViewState:{latitude:n.latitude,longitude:n.longitude,zoom:12},attributionControl:!0,mapboxAccessToken:"pk.eyJ1IjoidG9hbjA2MDExOTk4IiwiYSI6ImNsNnJmajVuZDBrNzEzY3BpNnB6dHpwMHAifQ.JsWqTj6D7GLSDGgNfnclXw",mapStyle:"mapbox://styles/mapbox/streets-v10",ref:s,children:[(0,c.jsx)(G.Pv,{position:"top-right",showZoom:!0,showCompass:!0}),_&&d&&(0,c.jsx)(G.Jx,{latitude:_,longitude:d,children:(0,c.jsx)("img",{src:h.Z.pinMapRed,alt:"",className:r.marker_icon})}),(0,c.jsx)(G.Jx,{latitude:n.latitude,longitude:n.longitude,children:(0,c.jsxs)("div",{onClick:()=>t(null),className:r.org_maker,children:[(0,c.jsxs)("div",{className:r.org_maker_head,children:[(0,c.jsx)("div",{className:r.org_maker_head_img,children:(0,c.jsx)("img",{src:null!==(i=null===n||void 0===n?void 0:n.image_url)&&void 0!==i?i:q.ZP.imgDefault,onError:e=>(0,l.bW)(e),alt:""})}),(0,c.jsxs)("div",{className:r.org_maker_head_de,children:[(0,c.jsx)("span",{className:r.org_maker_head_name,children:n.name}),n.distance&&(0,c.jsxs)("div",{className:r.org_maker_dis,children:[(0,c.jsx)("span",{}),(0,c.jsx)("h4",{children:(0,l.Bb)(n.distance)})]})]})]}),(0,c.jsx)("div",{className:r.org_maker_address,children:null===n||void 0===n?void 0:n.address})]})}),null===(o=n.branches)||void 0===o?void 0:o.map(((e,i)=>{var o;return(0,c.jsx)(G.Jx,{latitude:e.latitude,longitude:e.longitude,children:(0,c.jsxs)("div",{onClick:()=>t(e),className:r.org_maker,children:[(0,c.jsxs)("div",{className:r.org_maker_head,children:[(0,c.jsx)("div",{className:r.org_maker_head_img,children:(0,c.jsx)("img",{src:null!==(o=null===n||void 0===n?void 0:n.image_url)&&void 0!==o?o:q.ZP.imgDefault,onError:e=>(0,l.bW)(e),alt:""})}),(0,c.jsxs)("div",{className:r.org_maker_head_de,children:[(0,c.jsx)("span",{className:r.org_maker_head_name,children:e.name}),e.distance&&(0,c.jsxs)("div",{className:r.org_maker_dis,children:[(0,c.jsx)("span",{}),(0,c.jsx)("h4",{children:(0,l.Bb)(e.distance)})]})]})]}),(0,c.jsx)("div",{className:r.org_maker_address,children:null===e||void 0===e?void 0:e.address})]})},i)}))]})},K=o(70762),z=o(76742);const U=k()(),X={content:"",open:!1,children:(0,c.jsx)(c.Fragment,{}),load:!1};var Q=function(){var e,i,o,l,v,p,k,x,j,f,y,N,C,O,M,Z;const P=(0,t.I0)(),{t:B}=(0,n.useContext)(a.I),[G,Q]=(0,n.useState)(0),{SERVICES_BOOK:ee}=(0,t.v9)((e=>e)),ie=(0,V.x)(),oe=(0,u.oG)(),ne=(0,I.E)(),[te,se]=(0,n.useState)(X),{USER:ae}=(0,t.v9)((e=>e.USER)),le=(0,d.k6)(),re=(0,d.TH)(),ce=null===(e=re.state)||void 0===e?void 0:e.TYPE,_e=(0,n.useRef)(null),de=(0,n.useRef)(null),me=(0,n.useRef)(null),he=()=>{var e,i;null===(e=_e.current)||void 0===e||e.classList.remove(r.branch_show),null===(i=de.current)||void 0===i||i.classList.remove(r.right_icon_ch)};window.onclick=()=>he();const ve=null===(i=(0,u.YE)(`${W.Z.ORG(null===re||void 0===re||null===(o=re.state)||void 0===o||null===(l=o.org)||void 0===l?void 0:l.id)}`,null===re||void 0===re||null===(v=re.state)||void 0===v||null===(p=v.org)||void 0===p?void 0:p.id,{"filter[location]":ie}))||void 0===i?void 0:i.response;(0,n.useEffect)((()=>{let e=!0;if(e)if(P((0,T.O4)()),re.state){const e={org:re.state.org,services:re.state.services};P((0,m.Dt)(e))}else le.push("/home");return()=>{e=!1}}),[re.state]);const{servicesBook:ue}=ee,[ge,be]=(0,n.useState)(!1),[pe,ke]=(0,n.useState)(),[xe,je]=(0,n.useState)({date:U.format("DD-MM-YYYY"),time:null,note:"",branch_id:null}),fe=ue.map((e=>{var i;return{id:null===(i=e.service)||void 0===i?void 0:i.id,quantity:e.quantity}})),ye=e=>{var i,o,n;je({...xe,branch_id:null===e||void 0===e?void 0:e.id}),he(),null===me||void 0===me||null===(i=me.current)||void 0===i||i.flyTo({center:[null!==(o=null===e||void 0===e?void 0:e.longitude)&&void 0!==o?o:ve.longitude,null!==(n=null===e||void 0===e?void 0:e.latitude)&&void 0!==n?n:null===ve||void 0===ve?void 0:ve.latitude]})},Ne=null===ue||void 0===ue||null===(k=ue.map((e=>null===e||void 0===e?void 0:e.service)))||void 0===k||null===(x=k.map((e=>null===e||void 0===e?void 0:e.discount)))||void 0===x||null===(j=x.map((e=>null===e||void 0===e?void 0:e.coupon_code)))||void 0===j?void 0:j.filter(Boolean),{VOUCHER_APPLY:Ce}=(0,t.v9)((e=>e.carts)),Oe=Ne.concat(Ce.map((e=>e.coupon_code))).filter(Boolean),Me={products:[],services:fe,treatment_combo:[],payment_method_id:pe,coupon_code:Oe.length>0?Oe:[],description:"",branch_id:xe.branch_id},we=null===(f=re.state)||void 0===f||null===(y=f.services)||void 0===y?void 0:y.map((e=>{var i,o,n;const t=(null===(i=e.service)||void 0===i?void 0:i.special_price)>0?null===(o=e.service)||void 0===o?void 0:o.special_price:null===(n=e.service)||void 0===n?void 0:n.price;return(0,E.h)(e.service,ve,"SERVICE",e.quantity,t,e.service.discount)})),Ye=(e=>e.split("-").reverse().join("-"))(xe.date),De={note:xe.note,time_start:`${Ye} ${xe.time}:00`,branch_id:xe.branch_id,order_id:re.state.order_id,service_ids:null===fe||void 0===fe?void 0:fe.map((e=>null===e||void 0===e?void 0:e.id))},Ie=()=>{le.push("/lich-hen?tab=1")};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.Z,{title:B("Header.booking")}),oe&&(0,c.jsx)(b.Z,{onBack:()=>{P((0,m.jV)()),le.goBack()},title:B("Header.booking")}),(0,c.jsx)(F.Z,{children:(0,c.jsxs)("div",{className:r.container,children:[!oe&&(0,c.jsx)("div",{className:r.left,children:(0,c.jsx)("div",{className:r.left_cnt,children:ve&&(0,c.jsx)(J,{mapRef:me,onChooseBranch:ye,org:ve})})}),(0,c.jsxs)("div",{className:r.right,children:[(0,c.jsx)("div",{className:r.section_user,children:(0,c.jsx)(L.Z,{disableAddress:!0,title:B("BOOK_NOW"===ce?"pm.payment_info":"pm.payment_booking")})}),(0,c.jsxs)("div",{className:r.section_org,children:[(0,c.jsxs)("div",{className:r.right_org,children:[(0,c.jsx)("div",{className:r.right_org_img,children:(0,c.jsx)("img",{src:null!==(N=null===ve||void 0===ve?void 0:ve.image_url)&&void 0!==N?N:q.ZP.imgDefault,alt:""})}),(0,c.jsx)("span",{className:r.right_org_name,children:null===ve||void 0===ve?void 0:ve.name})]}),(0,c.jsxs)("div",{className:r.right_branches,children:[(0,c.jsxs)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{var e,i;null===_e||void 0===_e||null===(e=_e.current)||void 0===e||e.classList.add(r.branch_show),null===de||void 0===de||null===(i=de.current)||void 0===i||i.classList.add(r.right_icon_ch)})()},className:r.right_branch_default,children:[(0,c.jsx)("img",{src:h.Z.pinMapGreen,alt:"",className:r.map_icon}),(0,c.jsx)("span",{className:r.branch_default_address,children:null!==(C=null===ve||void 0===ve||null===(O=ve.branches)||void 0===O||null===(M=O.find((e=>e.id===xe.branch_id)))||void 0===M?void 0:M.full_address)&&void 0!==C?C:null===ve||void 0===ve?void 0:ve.full_address}),(0,c.jsx)("img",{ref:de,src:h.Z.chevronRightBlack,className:r.right_icon,alt:""})]}),(0,c.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation()},ref:_e,className:r.right_org_list_branch,children:(0,c.jsxs)("ul",{className:r.branch_list,children:[(0,c.jsxs)("li",{onClick:()=>ye(null),className:r.branch_item,children:[(0,c.jsx)("div",{className:r.branch_item_check,children:!xe.branch_id&&(0,c.jsx)("span",{})}),(0,c.jsxs)("div",{className:r.branch_item_name,children:[(0,c.jsxs)("span",{children:[B("pm.org"),":"]}),null===ve||void 0===ve?void 0:ve.full_address]})]}),null===ve||void 0===ve||null===(Z=ve.branches)||void 0===Z?void 0:Z.map(((e,i)=>(0,c.jsxs)("li",{onClick:()=>ye(e),className:r.branch_item,children:[(0,c.jsx)("div",{className:r.branch_item_check,children:e.id===xe.branch_id&&(0,c.jsx)("span",{})}),(0,c.jsxs)("div",{className:r.branch_item_name,children:[(0,c.jsxs)("span",{children:[B("Mer_de.branch"),":"]}),e.full_address]})]},i)))]})})]})]}),(0,c.jsx)("div",{className:r.section_services,children:(0,c.jsx)("ul",{className:r.service_list,children:ue.map(((e,i)=>(0,c.jsx)("li",{children:(0,c.jsx)(_,{org:ve,service:e})},i)))})}),(0,c.jsxs)("div",{className:r.section_time,children:[(0,c.jsxs)("div",{className:r.section_time_left,children:[(0,c.jsx)("img",{src:h.Z.clockAppGray,alt:""}),(0,c.jsx)("div",{className:r.section_time_text,children:xe.date&&xe.time?`${xe.date} ${xe.time}`:B("my_ser.pl_select_date")})]}),(0,c.jsx)(g.Rb,{className:r.section_time_btn,icon:h.Z.chevronRightBlack,iconSize:16,title:B("my_ser.time_select"),onClick:()=>be(!0)})]}),(0,c.jsx)("div",{className:r.section_note,children:(0,c.jsx)("textarea",{className:r.note_textarea,onChange:e=>je({...xe,note:e.target.value}),placeholder:B("my_ser.note_1")})}),"BOOK_NOW"===ce&&(0,c.jsx)("div",{style:ne!==z.P.BEAUTYX?{display:"none"}:{},className:r.section_payment,children:(0,c.jsx)(K.Z,{onSetPaymentMethod:e=>ke(e.id)})}),(0,c.jsxs)("div",{className:r.section_bill,children:["BOOK_NOW"===ce&&(0,c.jsx)(R,{org:ve,setFinalAmount:Q}),(0,c.jsx)(g.Rb,{className:r.post_btn,title:B("BOOK_NOW"===ce?"my_ser.pay_and_book":"Home.Order_step_4"),loading:te.load,onClick:()=>ae?xe.time?"BOOK_NOW"===re.state.TYPE&&G<1e3?se({...X,open:!0,content:B("my_ser.minimum_order_is_1_000_VND"),children:(0,c.jsx)(c.Fragment,{})}):ne!==H.v.MB||(0,$._)(null===ae||void 0===ae?void 0:ae.telephone)?"BOOK_NOW"===re.state.TYPE?async function(){const e=(0,D.pickBy)(Me,D.identity);se({...X,load:!0});try{const o=await Y.Z.postOrder(null===ve||void 0===ve?void 0:ve.id,e),n=await{...o.data.context,FINAL_AMOUNT:G},t=n.payment_gateway.transaction_uuid;if("CANCELED"!==o.data.context.status){var i;const e={...De,org_id:null===ve||void 0===ve?void 0:ve.id,order_id:o.data.context.id,quantity:null===(i=fe[0])||void 0===i?void 0:i.quantity};le.push({pathname:"/trang-thai-don-hang/",search:t,state:{state_payment:n,actionAfter:e,listPayment:we}}),se({...X,load:!1}),"MOMO"===ne&&localStorage.setItem("APP_INFO",JSON.stringify(e))}else se({open:!0,content:B("my_ser.create_order_fail"),children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g.Rb,{title:B("my_ser.ok"),onClick:()=>se({...te,open:!1})}),(0,c.jsx)(g.Rb,{title:B("pm.goto_home"),onClick:()=>le.push("/home")})]}),load:!1})}catch(o){console.log(o),se({open:!0,content:B("my_ser.create_order_fail"),children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g.Rb,{title:"\u0110\xe3 hi\u1ec3u",onClick:()=>se({...te,open:!1})}),(0,c.jsx)(g.Rb,{title:B("pm.goto_home"),onClick:()=>le.push("/home")})]}),load:!1})}}():void(async()=>{se({...X,load:!0});try{await S.Z.postAppointment(De,null===ve||void 0===ve?void 0:ve.id),P((0,m.jV)()),se({open:!0,content:B("my_ser.bk_success"),children:(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(g.Rb,{title:B("Header.see_calendar"),onClick:Ie})}),load:!1})}catch(e){console.log(e),se({open:!0,content:B("my_ser.bk_fail_title"),children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g.Rb,{title:B("my_ser.ok"),onClick:()=>se({...te,open:!1})}),(0,c.jsx)(g.Rb,{title:B("Header.see_calendar"),onClick:()=>le.push("/home")})]}),load:!1})}})():se({...X,open:!0,content:B("my_ser.enter_update_phone"),children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g.Rb,{title:B("my_ser.update"),onClick:()=>le.push("/otp-form")}),(0,c.jsx)(g.Rb,{title:B("pm.later"),onClick:()=>se({...te,open:!1})})]})}):se({...X,open:!0,content:B("my_ser.pl_select_date"),children:(0,c.jsx)(c.Fragment,{})}):le.push("/sign-in?1")})]})]})]})}),(0,c.jsx)(w,{bookTime:xe,setBookTime:je,open:ge,setOpen:be,org:ve}),(0,c.jsx)(A.CC,{title:B("Header.noti"),content:te.content,open:te.open,children:te.children,setOpen:()=>se({...te,open:!1})})]})}},43161:function(){}}]);
//# sourceMappingURL=860.923155d9.chunk.js.map