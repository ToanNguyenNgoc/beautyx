{"version":3,"file":"static/js/308.4920d834.chunk.js","mappings":"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","sources":["webpack://web-booking/./src/pages/Messenger/message.module.css?9dc9","pages/Messenger/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"message_container__AxLpV\",\"left\":\"message_left__k4A+R\",\"left_head\":\"message_left_head__T--mk\",\"left_head_top\":\"message_left_head_top__TNK6L\",\"left_head_txt\":\"message_left_head_txt__MsKN9\",\"left_head_bot\":\"message_left_head_bot__gwXBX\",\"left_body\":\"message_left_body__xLWq0\",\"topic\":\"message_topic__bGPa4\",\"topic_left_img\":\"message_topic_left_img__s85aR\",\"topic_left_online\":\"message_topic_left_online__7lGks\",\"topic_right\":\"message_topic_right__B9HX4\",\"topic_name\":\"message_topic_name__VZ3tS\",\"topic_message\":\"message_topic_message__Cxfkf\",\"right\":\"message_right__T+jke\",\"left_ch\":\"message_left_ch__pIzTj\",\"right_ch\":\"message_right_ch__Yr32q\"};","import { useAuth, useSwrInfinite } from \"hooks\";\nimport { ITopic } from \"interface\";\nimport { paramsTopic } from \"params-query\";\nimport { useState } from \"react\";\nimport { Link, Route, Switch, useLocation } from \"react-router-dom\";\nimport { Loader, Right } from \"./components\"\nimport style from \"./message.module.css\"\nimport icon from \"constants/icon\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { formatDateFromNow, onErrorAvatar, unique } from \"utils\";\nimport AuthRoute from \"route/AuthRoute\";\n\nfunction Messenger() {\n  const { USER } = useAuth()\n  const [query,] = useState(paramsTopic)\n  const location = useLocation()\n  const topic_id = location.pathname.split(\"/\")[2]\n  const { resData, onLoadMore, totalItem } = useSwrInfinite({\n    API_URL: \"topics\",\n    enable: USER,\n    params: query,\n    dedupingInterval: 0\n  })\n  const more = () => { if (resData.length < totalItem) { onLoadMore() } }\n  return (\n    <div className={style.container}>\n      <div className={topic_id ? `${style.left} ${style.left_ch}` : style.left}>\n        <div className={style.left_head}>\n          <div className={style.left_head_top}>\n            <span className={style.left_head_txt}>Chat</span>\n            <div className={style.left_head_ctl}></div>\n          </div>\n          <div className={style.left_head_bot}>\n            <img src={icon.searchGray} alt=\"\" />\n            <input type=\"text\" placeholder=\"Tìm kiếm trong tin nhắn...\" />\n          </div>\n        </div>\n        <div className={style.left_body}>\n          <InfiniteScroll\n            hasMore={true}\n            height={`calc(100vh - 172px)`}\n            dataLength={resData.length}\n            loader={resData.length < totalItem && <Loader />}\n            next={more}\n          >\n            <ul className={style.topic_list}>\n              {\n                resData.map((item: ITopic) => (\n                  <li key={item._id} className={style.topic_cnt}>\n                    <Topic item={item} />\n                  </li>\n                ))\n              }\n            </ul>\n          </InfiniteScroll>\n        </div>\n      </div>\n      <Switch>\n        <AuthRoute>\n          <Route path=\"/messages/:_id\">\n            <div\n              style={{ backgroundColor: 'var(--white)' }}\n              className={topic_id ? `${style.right} ${style.right_ch}` : style.right}\n            >\n              <Right />\n            </div>\n          </Route>\n        </AuthRoute>\n      </Switch>\n    </div>\n  );\n}\n\nexport default Messenger;\n\nconst Topic = ({ item }: { item: ITopic }) => {\n  const location = useLocation()\n  let name = item.name\n  if (item.name?.trim().length === 0 || !item.name) {\n    name = unique(item.topic_user?.map(i => i.user?.fullname).filter(Boolean)).join(\", \")\n  }\n  const topic_id = location.pathname.split(\"/\")[2]\n  return (\n    <Link\n      style={item._id === topic_id ? { backgroundColor: 'var(--bg-color)' } : {}}\n      to={{ pathname: `/messages/${item._id}`, state: item }}\n      className={style.topic}\n    >\n      <div className={style.topic_left}>\n        <div className={style.topic_left_img}>\n          <img src={item.organization?.image_url || ''} onError={onErrorAvatar} alt=\"\" />\n          <span className={style.topic_left_online}></span>\n        </div>\n      </div>\n      <div className={style.topic_right}>\n        <span className={style.topic_name}>\n          {item.organization?.name || name}\n        </span>\n        <div className={style.topic_message}>\n          <span>{item.messages[0]?.msg}</span>\n          <span>{formatDateFromNow(item.updated_at)}</span>\n        </div>\n      </div>\n    </Link>\n  )\n}"],"names":["USER","useAuth","query","useState","paramsTopic","topic_id","useLocation","pathname","split","resData","onLoadMore","totalItem","useSwrInfinite","API_URL","enable","params","dedupingInterval","_jsxs","className","style","container","children","left","left_ch","left_head","left_head_top","_jsx","left_head_txt","left_head_ctl","left_head_bot","src","icon","searchGray","alt","type","placeholder","left_body","InfiniteScroll","hasMore","height","dataLength","length","loader","Loader","next","more","topic_list","map","item","topic_cnt","Topic","_id","Switch","AuthRoute","Route","path","backgroundColor","right","right_ch","Right","_ref","_item$name","_item$organization","_item$organization2","_item$messages$","location","name","_item$topic_user","trim","unique","topic_user","i","_i$user","user","fullname","filter","Boolean","join","Link","to","state","topic","topic_left","topic_left_img","organization","image_url","onError","onErrorAvatar","topic_left_online","topic_right","topic_name","topic_message","messages","msg","formatDateFromNow","updated_at"],"sourceRoot":""}