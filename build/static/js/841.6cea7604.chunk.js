"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[841],{11841:function(e,n,s){s.r(n),s.d(n,{default:function(){return Y}});var a=s(72791),l=s(16030),r=s(93080),t=s(20030),i=s(3444),o=s(34088),c=s(10266),d=s(29818),h=s(2589),m=s(5438),u=s(81476),v=s(47107),p=s(73974),x=s(20181),j=s(10765),g=s(39641),_=s(1503),b=s(17983),N=s(2248),f=s(65209),C=s(51420),k=s(80184);var y=function(e){const{t:n}=(0,a.useContext)(b.I),s=(0,l.I0)(),{status:r}=(0,l.v9)((e=>e.PAYMENT.PAYMENT)),{PAYMENT_METHOD:t}=(0,l.v9)((e=>e.PAYMENT)),{e:i,onPaymentMethodChange:o,setOpen:c}=e,[d,h]=(0,a.useState)("CARD_ONLINE");(0,a.useEffect)((()=>{r!==f.Q.SUCCESS&&s((0,N.W)())}),[]);const m=(0,a.useCallback)((e=>{h(e.target.value)}),[]);return(0,k.jsxs)("div",{children:[(0,k.jsx)(C.Z,{title:n("pm.choose_payment_method")}),(0,k.jsx)(j.Z,{"aria-label":"gender",name:"controlled-radio-buttons-group",value:d,onChange:m,children:(0,k.jsx)("ul",{className:"payment-method",children:null===t||void 0===t?void 0:t.map((e=>{var n;return(0,k.jsxs)("li",{className:"flex-column",children:[(0,k.jsxs)("div",{className:"flex-row payment-method-head",children:[(0,k.jsx)(g.Z,{value:e.method,control:(0,k.jsx)(_.Z,{sx:{"&.Mui-checked":{color:"var(--purple)"}}}),label:e.title}),(0,k.jsx)("img",{src:e.img,alt:""})]}),(0,k.jsx)("div",{style:d===e.method?{display:"block"}:{display:"none"},className:"pm-method_child",children:(0,k.jsx)("ul",{children:null===(n=e.method_list)||void 0===n?void 0:n.filter((e=>"MOMO"===(null===e||void 0===e?void 0:e.name_key))).map((e=>(0,k.jsx)("li",{className:"pm-method_child-item",onClick:()=>(e=>{o(e),console.log(e),c&&c(!1)})(e),children:(0,k.jsx)("div",{className:"pm-method_child-item_box",style:i===e?{backgroundColor:"#7161BA",color:"white"}:{backgroundColor:"",color:"#7161BA"},children:e.name_key})},e.id)))})})]},e.id)}))})})]})};var A=function(e){const{open:n,setOpen:s,pmtMethod:a,setPmtMethod:l}=e,r=(0,x.oG)();return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(p.ZP,{open:n,onClose:()=>s(!1),anchor:r?"bottom":"right",children:(0,k.jsx)("div",{className:"re-cart-pmt-drawer",children:(0,k.jsx)(y,{e:a,onPaymentMethodChange:l,setOpen:s})})})})},M=s(21272),E=s(94883),P=s(67559),Z=s(77481),O=s(63048),T=s(80315),w=s(17012),S=s(40879),B=s(24483);const D={created_at:"2022-01-07T10:00:07.000000Z",id:1,is_changeable:!1,name_key:"MOMO",updated_at:"2022-01-07T10:00:07.000000Z"};var Y=function(){var e;const n=(0,M.E)(),s=(0,l.I0)(),{cartAmountDiscount:r,cartAmount:d,VOUCHER_APPLY:p}=(0,l.v9)((e=>e.carts)),{USER:j}=(0,l.v9)((e=>e.USER)),g=(0,l.v9)((e=>e.carts.cartList)).filter((e=>(null===e||void 0===e?void 0:e.user_id)===(null===j||void 0===j?void 0:j.id))),_=null===(e=g.filter((e=>!0===e.isConfirm))[0])||void 0===e?void 0:e.org;(0,a.useEffect)((()=>{s((0,v.O4)()),_&&(async()=>{const e={org_id:_.id},n=await s((0,w.jL)(e)),{discounts:a}=n.payload;a.length>0&&s((0,v.O3)({org:_,vouchers:(0,S.EI)(a)}))})()}),[_]);const b=g.filter((e=>!0===e.isConfirm));(0,a.useEffect)((()=>{s((0,v.NU)(null===j||void 0===j?void 0:j.id))}),[s,g,j,p]);const[N,f]=(0,a.useState)(!1),[C,y]=(0,a.useState)(D),[O,T]=(0,a.useState)(),[Y,R]=(0,a.useState)({open:!1,branch:null,org:_}),I={cartList:g,cartAmountDiscount:r,cartAmount:d},G=g.map((e=>e.org_id)),F=(0,x.oG)(),H=function(e){for(var n=[],s=0;s<e.length;s++)-1===n.indexOf(e[s])&&n.push(e[s]);return n}(G).map((e=>{var n;const s=g.filter((n=>e===n.org_id));return{org_id:e,org_name:null===(n=s[0])||void 0===n?void 0:n.org_name,items:s}})),V=Y.branch,{payments_method:X}=(0,l.v9)((e=>e.PAYMENT.PAYMENT)),K={pmtMethod:C,address:O,payment_method_id:(0,Z.f)(X,y),org:_,branch:V};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.Z,{title:"Gi\u1ecf h\xe0ng"}),F?(0,k.jsx)(i.Z,{title:"Gi\u1ecf h\xe0ng",element:(0,k.jsx)(L,{length:b.length,handleClearByCheck:()=>{b.length>0&&s((0,v.pU)())}})}):(0,k.jsx)(t.Z,{}),0!==(null===g||void 0===g?void 0:g.length)&&g?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(c.Z,{children:(0,k.jsxs)("div",{className:"re-cart-cnt",children:[(0,k.jsx)("div",{className:"re-cart-cnt__head",children:(0,k.jsx)(h.Z,{onSetAddressDefault:T})}),n===E.v.BEAUTYX&&(0,k.jsxs)("div",{onClick:()=>f(!0),className:"re-cart-cnt__pmt",children:[(0,k.jsx)("span",{children:"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"}),(0,k.jsx)("br",{}),(0,k.jsx)("span",{style:{backgroundColor:"var(--pink-momo)",marginLeft:"12px",padding:"0px 8px",borderRadius:"6px",color:"var(--white)"},children:C?null===C||void 0===C?void 0:C.name_key:"Vui l\xf2ng ch\u1ecdn ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"})]}),(0,k.jsx)("div",{className:"re-cart-cnt__body",children:(0,k.jsx)("ul",{className:"re-cart-cnt__body-list",children:H.map(((e,n)=>(0,k.jsx)("li",{className:"re-cart-cnt__body__item",children:(0,k.jsx)(m.ZP,{item:e,org:_,cartList:g,openBranch:Y,setOpenBranch:R})},n)))})})]})}),(0,k.jsx)(A,{open:N,setOpen:f,pmtMethod:C,setPmtMethod:y}),(0,k.jsx)("div",{style:{display:"none"},children:(0,k.jsx)(P.Z,{e:C,onPaymentMethodChange:y})}),(0,k.jsx)(u.Z,{DATA_CART:I,DATA_PMT:K}),(0,k.jsx)(U,{org:_,open:Y,setOpen:R})]}):(0,k.jsx)(B.Bh,{title:"Kh\xf4ng c\xf3 D\u1ecbch v\u1ee5/S\u1ea3n ph\u1ea9m trong gi\u1ecf h\xe0ng !"})]})};const L=e=>{const{length:n,handleClearByCheck:s}=e;return(0,k.jsxs)("div",{onClick:s,className:"flex-row re-cart-head-right",children:[(0,k.jsxs)("span",{children:["X\xf3a(",n,")"]}),(0,k.jsx)("img",{src:r.Z.TrashOrange,alt:""})]})},U=e=>{var n,s;const{open:a,setOpen:l}=e,r=e.org;return(0,k.jsx)(d.Z,{open:a.open,TransitionComponent:O.u,onClose:()=>l({...a,open:!1}),children:(0,k.jsx)("div",{className:"re-cart-branches",children:(0,k.jsxs)("ul",{className:"list",children:[(0,k.jsxs)("li",{onClick:()=>l({...a,branch:null,open:!1}),className:"flex-row re-cart__branch-item",children:[!a.branch&&(0,k.jsx)("span",{className:"re-cart__branch-item-ck",children:"\u0110\xe3 ch\u1ecdn"}),(0,k.jsx)("img",{onError:e=>(0,T.ZP)(e),src:null===r||void 0===r?void 0:r.image_url,alt:"",className:"branch-img"}),(0,k.jsxs)("div",{className:"detail",children:[(0,k.jsx)("span",{className:"branch-name",children:null===r||void 0===r?void 0:r.name}),(0,k.jsx)("span",{className:"branch-address",children:null===r||void 0===r?void 0:r.full_address}),(0,k.jsx)("span",{className:"branch-phone",children:null===r||void 0===r||null===(n=r.telephone)||void 0===n?void 0:n.join(", ")})]})]}),null===r||void 0===r||null===(s=r.branches)||void 0===s?void 0:s.map(((e,n)=>{var s;return(0,k.jsxs)("li",{onClick:()=>l({...a,branch:e,open:!1}),className:"flex-row re-cart__branch-item",children:[(null===(s=a.branch)||void 0===s?void 0:s.id)===(null===e||void 0===e?void 0:e.id)&&(0,k.jsx)("span",{className:"re-cart__branch-item-ck",children:"\u0110\xe3 ch\u1ecdn"}),(0,k.jsx)("img",{onError:e=>(0,T.ZP)(e),src:null!==e&&void 0!==e&&e.image?null===e||void 0===e?void 0:e.image_url:null===r||void 0===r?void 0:r.image_url,alt:"",className:"branch-img"}),(0,k.jsxs)("div",{className:"detail",children:[(0,k.jsx)("span",{className:"branch-name",children:null===e||void 0===e?void 0:e.name}),(0,k.jsx)("span",{className:"branch-address",children:null===e||void 0===e?void 0:e.full_address}),(0,k.jsx)("span",{className:"branch-phone",children:null===e||void 0===e?void 0:e.telephone})]})]},n)}))]})})})}}}]);
//# sourceMappingURL=841.6cea7604.chunk.js.map