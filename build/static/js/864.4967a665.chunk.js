"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[864],{28903:function(e,i,s){s.d(i,{Z:function(){return z}});var l=s(72791),n=s(71269),d=s(93080),o=s(62067),r=s(47107),t=s(16030),a=s(19598),c=s(17983),u=s(44080),m=s(80315),v=s(52467),p=s(31804),h=s(6214),x=s(4358),_=s(68915),j=s(80184);var g=function(e){const{productItem:i,org:s}=e,d=i.productable,{USER:g}=(0,t.v9)((e=>e.USER)),{t:N}=(0,l.useContext)(c.I),b=(0,a.k6)(),f=(0,t.I0)(),[y,w]=(0,l.useState)({open:!1,title:""}),C=(0,v.h)(d,s,1,1,null===d||void 0===d?void 0:d.price,null,!0);return(0,j.jsxs)("li",{children:[(0,j.jsx)(h.Z,{open:y.open,autoHideDuration:4e3,onClose:()=>w({...y,open:!1}),anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,j.jsx)(x.Z,{onClose:()=>w({...y,open:!1}),severity:"warning",sx:{width:"100%"},children:y.title})}),(0,j.jsxs)("div",{className:"order-de-list__item",children:[(0,j.jsx)("img",{src:null!==d&&void 0!==d&&d.image_url?null===d||void 0===d?void 0:d.image_url:s.image_url,onError:e=>(0,m.ZP)(e),alt:"",className:"order-de-pr-item__img"}),(0,j.jsxs)("div",{className:"order-de-pr-item__cnt",children:[(0,j.jsxs)("div",{className:"item-detail",children:[(0,j.jsxs)("span",{className:"flex-row-sp item-name",children:[null===d||void 0===d?void 0:d.product_name,(0,j.jsxs)("span",{children:[" x",i.quantity]})]}),(0,j.jsx)("span",{className:"item-org__name",children:s.name})]}),(0,j.jsxs)("div",{className:"flex-row-sp item-bottom",children:[(0,j.jsxs)("span",{className:"price",children:[(0,n.Z)(null===d||void 0===d?void 0:d.retail_price),"\u0111"]}),(0,j.jsxs)("div",{className:"flex-row item-button",children:[(0,j.jsx)(o.Z,{onClick:()=>{(0,u.Z)(),b.push({pathname:(0,_.Q7)(d.id,s.id,d.product_name)})},text:N("order.watch_info")}),(0,j.jsx)(o.Z,{onClick:async()=>{var e;const i=await f((0,p.fN)({org_id:s.id,id:d.id}));var l;"fulfilled"===(null===i||void 0===i||null===(e=i.meta)||void 0===e?void 0:e.requestStatus)?(console.log(i),null!==i&&void 0!==i&&null!==(l=i.payload)&&void 0!==l&&l.is_momo_ecommerce_enable&&null!==s&&void 0!==s&&s.is_momo_ecommerce_enable?(f((0,r.B8)()),f((0,r.Z5)({...C,cart_id:parseInt(`${g.id}${C.cart_id}`),user_id:null===g||void 0===g?void 0:g.id})),b.push("/gio-hang")):w({open:!0,title:"Hi\u1ec7n t\u1ea1i s\u1ea3n ph\u1ea9m n\xe0y kh\xf4ng c\xf2n \u0111\u01b0\u1ee3c b\xe1n Online !"})):w({open:!0,title:"Hi\u1ec7n t\u1ea1i s\u1ea3n ph\u1ea9m n\xe0y kh\xf4ng c\xf2n t\u1ed3n t\u1ea1i !"})},text:"Re-Order"})]})]})]})]})]})},N=s(22546);var b=function(e){const{products:i,tab_id:s,org:l,open:n}=e,d=N.PU.find((e=>0===e.id))||N.PU[0];return(0,j.jsxs)("div",{className:"order-list-item__wrap",style:1===s?{display:"block"}:{display:"none"},children:[(0,j.jsxs)("div",{className:"order-de-ship-status",children:[(0,j.jsx)("span",{className:"title",children:"Tr\u1ea1ng th\xe1i giao nh\u1eadn"}),(0,j.jsx)("div",{className:"order-de-ship-status__time-line",children:4!==d.id?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"line",children:(0,j.jsx)("div",{style:{width:`${d.process}%`},className:"child"})}),(0,j.jsx)("ul",{className:"flex-row-sp",children:N.PU.filter((e=>4!==e.id)).map((e=>(0,j.jsx)("li",{children:(0,j.jsxs)("div",{style:(null===d||void 0===d?void 0:d.id)>=e.id?{color:"var(--orange"}:{},className:"flex-column status-item",children:[(0,j.jsx)("span",{style:(null===d||void 0===d?void 0:d.id)>=e.id?{backgroundColor:"var(--orange"}:{},className:"ship-status-item__step",children:e.id}),(0,j.jsx)("span",{className:"ship-status-item__title",children:e.title})]})},e.id)))})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"ship-cancel-status",children:[d.title," ","(5 Th06 20:00)"]})})})]}),(0,j.jsx)("ul",{className:"order-item-list",children:null===i||void 0===i?void 0:i.map(((e,i)=>(0,j.jsx)(g,{open:n,productItem:e,org:l},i)))})]})},f=s(25605),y=s(30882),w=s(80527),C=s(3859),Z=s(24483);var k=function(e){var i;const{t:s}=(0,l.useContext)(c.I),{serviceItem:d,org:u,itemsDiscountOrg:p}=e,{USER:h}=(0,t.v9)((e=>e.USER)),x=d.productable,g=p.find((e=>e.productable_id===(null===x||void 0===x?void 0:x.id))),[N,b]=(0,l.useState)({open:!1,title:""}),k=(0,a.k6)(),I=(0,t.I0)(),R=(0,v.h)(x,u,2,1,d.base_price,null===g||void 0===g?void 0:g.discount,!0);return(0,j.jsxs)("li",{children:[(0,j.jsx)(Z.uD,{title:N.title,open:N.open,status:"WARNING",onClose:()=>b({...N,open:!1})}),(0,j.jsxs)("div",{className:"order-de-list__item",children:[g&&(0,j.jsx)("div",{className:"flex-row order-de-list__item-discount",children:(0,j.jsx)("span",{children:null===g||void 0===g||null===(i=g.discount)||void 0===i?void 0:i.coupon_code})}),(0,j.jsx)("img",{src:null!==x&&void 0!==x&&x.image?null===x||void 0===x?void 0:x.image_url:null===u||void 0===u?void 0:u.image_url,alt:"",onError:e=>(0,m.ZP)(e),className:"order-de-pr-item__img"}),(0,j.jsxs)("div",{className:"order-de-pr-item__cnt",children:[(0,j.jsxs)("div",{className:"item-detail",children:[(0,j.jsxs)("span",{className:"flex-row-sp item-name",children:[null===x||void 0===x?void 0:x.service_name,(0,j.jsxs)("span",{children:["x ",d.quantity]})]}),(0,j.jsx)("span",{className:"item-org__name",children:u.name})]}),(0,j.jsxs)("div",{className:"flex-row-sp item-bottom",children:[(null===d||void 0===d?void 0:d.discount_value)>0?(0,j.jsxs)("div",{className:"flex-row",children:[(0,j.jsxs)("span",{className:"price",style:{color:"var(--orange)"},children:[(0,n.Z)((null===x||void 0===x?void 0:x.price)-(null===d||void 0===d?void 0:d.discount_value)),"\u0111"]}),(0,j.jsx)("span",{className:"old-price",children:(0,n.Z)(null===x||void 0===x?void 0:x.price)})]}):(0,j.jsxs)("span",{className:"price",children:[(0,n.Z)(d.base_price),"\u0111"]}),(0,j.jsxs)("div",{className:"flex-row item-button",children:[(0,j.jsx)(o.Z,{onClick:()=>{if(w.ZP.USER_ITEM_CLICK(u.id,x.id),(0,C.ne)(C.Zx.PRODUCT_CLICK),g){const e=(()=>{let e;switch(null===g||void 0===g?void 0:g.productable_type){case"App\\Models\\CI\\Service":e="service";break;case"App\\Models\\CI\\Product":e="product"}return e})();k.push({pathname:`/chi-tiet-giam-gia/${e}_${u.id}_${g.discount_id}_${g.productable_id}_${(0,y.ZP)(g.productable.service_name||g.productable.product_name)}`})}else k.push({pathname:(0,_.ro)(x.id,u.id,x.service_name)})},text:s("order.watch_info")}),(0,j.jsx)(o.Z,{onClick:async()=>{var e;const i=await I((0,f.OR)({org_id:u.id,ser_id:x.id}));var s,l;"fulfilled"===(null===i||void 0===i||null===(e=i.meta)||void 0===e?void 0:e.requestStatus)||g?null!==i&&void 0!==i&&null!==(s=i.payload)&&void 0!==s&&null!==(l=s.service)&&void 0!==l&&l.is_momo_ecommerce_enable&&null!==u&&void 0!==u&&u.is_momo_ecommerce_enable?(I((0,r.B8)()),I((0,r.Z5)({...R,cart_id:parseInt(`${h.id}${R.cart_id}`),user_id:null===h||void 0===h?void 0:h.id})),k.push("/gio-hang")):b({open:!0,title:"Hi\u1ec7n t\u1ea1i d\u1ecbch v\u1ee5 n\xe0y n\xe0y kh\xf4ng c\xf2n \u0111\u01b0\u1ee3c b\xe1n Online !"}):b({open:!0,title:"Hi\u1ec7n t\u1ea1i d\u1ecbch v\u1ee5 n\xe0y n\xe0y kh\xf4ng c\xf2n t\u1ed3n t\u1ea1i !"})},text:"Re-Order"})]})]})]})]})]})};var I=function(e){const{services:i,tab_id:s,org:l,open:n}=e,{discounts:d}=(0,t.v9)((e=>e.HOME.DISCOUNTS)),o=d.filter((e=>"PRODUCT"===e.discount_type)).map((e=>e.items)).flat().filter((e=>e.organization_id===(null===l||void 0===l?void 0:l.id)));return(0,j.jsx)("div",{className:"order-list-item__wrap",style:2===s?{display:"block"}:{display:"none"},children:(0,j.jsx)("ul",{className:"order-item-list",children:null===i||void 0===i?void 0:i.map(((e,i)=>(0,j.jsx)(k,{itemsDiscountOrg:o,open:n,serviceItem:e,org:l},i)))})})},R=s(66145);var S=function(e){const{t:i}=(0,l.useContext)(c.I),{combotItem:s,org:d,open:m}=e,[v,p]=(0,l.useState)(),h=(0,a.k6)(),x=(0,t.I0)(),_={id:null===v||void 0===v?void 0:v.id,org_id:d.id,org_name:d.name,cart_id:parseInt(`3${d.id}${null===v||void 0===v?void 0:v.id}`),name:null===v||void 0===v?void 0:v.name,quantity:1,is_type:3,isConfirm:!0,price:null===v||void 0===v?void 0:v.price};return(0,l.useEffect)((()=>{!0===m&&async function(){try{const e=await R.Z.getComboDetail({org_id:d.id,com_id:s.productable_id});p(e.data.context)}catch(e){console.log(e)}}()}),[s.productable_id,d.id,m]),(0,j.jsx)("li",{children:(0,j.jsxs)("div",{className:"order-de-list__item",children:[(0,j.jsx)("img",{src:"https://picsum.photos/650/976?random=1"+(null===v||void 0===v?void 0:v.id),alt:"",className:"order-de-pr-item__img"}),(0,j.jsxs)("div",{className:"order-de-pr-item__cnt",children:[(0,j.jsxs)("div",{className:"item-detail",children:[(0,j.jsxs)("span",{className:"flex-row-sp item-name",children:[null===v||void 0===v?void 0:v.name,(0,j.jsxs)("span",{children:["x",s.quantity]})]}),(0,j.jsx)("span",{className:"item-org__name",children:d.name})]}),(0,j.jsxs)("div",{className:"flex-row-sp item-bottom",children:[(0,j.jsxs)("span",{className:"price",children:[(0,n.Z)(null===v||void 0===v?void 0:v.price)," \u0111"]}),(0,j.jsxs)("div",{className:"flex-row item-button",children:[(0,j.jsx)(o.Z,{text:i("order.watch_info"),padding:"4px 8px",color:"var(--purple)",backColor:"var(--bgGray)",borderRadius:"12px",margin:"0px 16px 0px 0px"}),(0,j.jsx)(o.Z,{onClick:()=>{(0,u.Z)();const e=(0,r.Z5)(_);h.push({pathname:"/cart"}),x(e)},text:"Re-Order",padding:"4px 8px",color:"var(--bgWhite)",backColor:"var(--purple)",borderRadius:"12px"})]})]})]})]})})};var E=function(e){const{combos:i,tab_id:s,org:l,open:n}=e;return(0,j.jsx)("div",{className:"order-list-item__wrap",style:3===s?{display:"block"}:{display:"none"},children:(0,j.jsx)("ul",{className:"order-item-list",children:null===i||void 0===i?void 0:i.map(((e,i)=>(0,j.jsx)(S,{open:n,combotItem:e,org:l},i)))})})};var O=function(e){const{order:i,org:s,open:n}=e,{t:d}=(0,l.useContext)(c.I),o=null===i||void 0===i?void 0:i.items.filter((e=>"Service"===e.productable_type.slice(14,null===e||void 0===e?void 0:e.productable_type.length))),r=null===i||void 0===i?void 0:i.items.filter((e=>"Product"===e.productable_type.slice(14,null===e||void 0===e?void 0:e.productable_type.length))),t=null===i||void 0===i?void 0:i.items.filter((e=>"TreatmentCombo"===e.productable_type.slice(14,null===e||void 0===e?void 0:e.productable_type.length))),a=[{id:1,title:d("Mer_de.products"),count:null===r||void 0===r?void 0:r.length},{id:2,title:d("Mer_de.services"),count:null===o||void 0===o?void 0:o.length},{id:3,title:"Combo",count:null===t||void 0===t?void 0:t.length}].sort(((e,i)=>i.count-e.count)),[u,m]=(0,l.useState)(a[0].id);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:"flex-row order-de-tab",children:a.map((e=>(0,j.jsx)("div",{style:0===e.count?{display:"none"}:{display:"block"},className:"order-de-tab__btn",children:(0,j.jsxs)("button",{onClick:()=>m(e.id),style:e.id===u?{backgroundColor:"var(--purple)",color:"var(--bgWhite)"}:{},children:[e.title," (",e.count,") "]})},e.id)))}),(0,j.jsx)(b,{org:s,open:n,tab_id:u,products:r}),(0,j.jsx)(I,{org:s,open:n,tab_id:u,services:o}),(0,j.jsx)(E,{org:s,open:n,tab_id:u,combos:t})]})},D=s(55931),P=s(29818),U=s(86208),$=s(3444),q=s(20181);const T=window.screen.width,M=l.forwardRef((function(e,i){return(0,j.jsx)(D.Z,{direction:T<767?"left":"up",ref:i,...e})}));var A=function(e){var i,s;const r=(0,a.k6)(),t=(0,q.oG)(),{t:v}=(0,l.useContext)(c.I),{open:p,setOpen:h,org:x,countItem:_}=e,g=e.order,[N,b]=(0,l.useState)(),f=()=>{h(!1)};return(0,j.jsxs)(P.Z,{open:p,onClose:f,fullScreen:t,TransitionComponent:M,children:[t&&(0,j.jsx)($.Z,{onBackFunc:f,title:"Chi ti\u1ebft \u0111\u01a1n h\xe0ng"}),(0,j.jsxs)("div",{className:"order-de",children:[(0,j.jsxs)("div",{className:"flex-row-sp order-de__head",children:[(0,j.jsxs)("span",{className:"flex-row order-de__head-title",children:[(0,j.jsx)("img",{onClick:f,src:d.Z.chevronLeft,alt:""}),v("order.order_de")]}),(0,j.jsxs)("div",{className:"flex-row order-de__head-date",children:[(0,j.jsxs)("span",{className:"flex-row date",children:[v("booking.date")," Order: ",(0,j.jsx)("h4",{children:(0,U.ZP)(null===g||void 0===g?void 0:g.created_at)})]}),(0,j.jsxs)("span",{className:"flex-row time",children:[v("order.time"),": ",(0,j.jsx)("h4",{children:null===g||void 0===g||null===(i=g.created_at)||void 0===i?void 0:i.split(" ")[1]})]})]})]}),(0,j.jsx)("div",{className:"order-de__count",children:(0,j.jsxs)("span",{className:"flex-row count",children:[v("pr.total"),":",(0,j.jsxs)("h4",{children:[" ",(0,n.Z)(null===g||void 0===g||null===(s=g.payment_gateway)||void 0===s?void 0:s.amount),"\u0111 (",_," item)"]})]})}),(0,j.jsxs)("div",{className:"flex-row order-de__org",children:[(0,j.jsx)("img",{src:null===x||void 0===x?void 0:x.image_url,alt:"",className:"order-de__org-img",onError:e=>(0,m.ZP)(e)}),(0,j.jsxs)("div",{className:"order-de__org-cnt",children:[(0,j.jsx)("span",{className:"name",children:null===x||void 0===x?void 0:x.name}),(0,j.jsx)("span",{className:"address",children:null===x||void 0===x?void 0:x.full_address}),(0,j.jsx)(o.Z,{onClick:()=>{(0,u.Z)(),r.push({pathname:`/cua-hang/${x.subdomain}`,search:`${x.id}`,state:x})},text:v("order.view_org"),backColor:"var(--purple)",padding:"6px 8px",color:"var(--bgWhite)",borderRadius:"14px",width:"fit-content"})]})]}),(0,j.jsx)(O,{org:x,order:g,acTab:N,setAcTab:b,open:p})]})]})},F=s(66875);var H=function(e){const{open:i,setOpen:s,qr:l}=e;return(0,j.jsx)(P.Z,{open:i,onClose:()=>s(!1),children:(0,j.jsx)("div",{style:{width:"86vw",borderRadius:"8px"},children:(0,j.jsx)("img",{style:{borderRadius:"8px"},src:l,alt:""})})})};var z=function(e){var i,s,o,r,t,a,c,u;const[m,v]=(0,l.useState)(!1),{order:p}=e,h=p.items_count,[x,_]=(0,l.useState)(!1);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(H,{open:m,setOpen:v,qr:p.qr_link}),(0,j.jsx)("li",{children:(0,j.jsxs)("div",{className:"order-item",children:[(0,j.jsxs)("div",{className:"flex-row-sp order-item__head",children:[(0,j.jsxs)("div",{className:"left",children:["M\xe3 \u0111\u01a1n h\xe0ng"," ",(0,j.jsxs)("span",{children:["#",null===p||void 0===p||null===(i=p.payment_gateway)||void 0===i?void 0:i.transaction_uuid,"-",null===p||void 0===p?void 0:p.origin_id]})]}),(0,j.jsx)("span",{onClick:()=>{_(!0)},className:"right",children:"Xem chi ti\u1ebft"})]}),(0,j.jsxs)("div",{className:"flex-row-sp order-item__date",children:[(0,j.jsxs)("div",{className:"flex-row left",children:[(0,j.jsx)("img",{src:d.Z.Storefront,alt:""}),(0,j.jsx)("span",{children:null===p||void 0===p||null===(s=p.organization)||void 0===s?void 0:s.name})]}),(0,j.jsx)("span",{className:"right",children:(0,F.p6)(null===p||void 0===p?void 0:p.created_at)})]}),(0,j.jsxs)("div",{className:"flex-row-sp order-item__body",children:[(0,j.jsx)("img",{src:null===p||void 0===p||null===(o=p.organization)||void 0===o?void 0:o.image_url,alt:"",className:"order-item__body-img"}),(0,j.jsxs)("div",{className:"order-item__body-de",children:[(0,j.jsx)("span",{className:"org__address",children:null===p||void 0===p||null===(r=p.organization)||void 0===r?void 0:r.full_address}),(0,j.jsx)("div",{className:"flex-row price",children:(null===p||void 0===p?void 0:p.amount)!==(null===p||void 0===p||null===(t=p.payment_gateway)||void 0===t?void 0:t.amount)?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("span",{style:{color:"var(--orange)"},children:[(0,n.Z)(null===p||void 0===p||null===(a=p.payment_gateway)||void 0===a?void 0:a.amount),"\u0111"]}),(0,j.jsxs)("span",{children:[(0,n.Z)(null===p||void 0===p?void 0:p.amount),"\u0111"]})]}):(0,j.jsxs)("span",{children:[(0,n.Z)(null===p||void 0===p||null===(c=p.payment_gateway)||void 0===c?void 0:c.amount),"\u0111"]})})]})]}),(0,j.jsxs)("div",{className:"flex-row-sp order-item__status",children:[(0,j.jsxs)("span",{className:"left",children:[null===p||void 0===p?void 0:p.items_count," s\u1ea3n ph\u1ea9m/d\u1ecbch v\u1ee5"]}),(0,j.jsxs)("div",{className:"flex-row right",children:[(0,j.jsxs)("span",{className:"order-amount",children:[(0,n.Z)(null===p||void 0===p||null===(u=p.payment_gateway)||void 0===u?void 0:u.amount),"\u0111"]}),(e=>{switch(e){case"CANCELED":case"CANCELED_BY_USER":case"REFUND":case"PENDING":return(0,j.jsx)("div",{style:{backgroundColor:"var(--red-cl)"},className:"status",children:"\u0110\xe3 h\u1ee7y"});case"PAID":return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{style:{backgroundColor:"var(--green)"},className:"status",children:"\u0110\xe3 thanh to\xe1n"}),(0,j.jsx)("div",{onClick:()=>v(!0),className:"status status-qr",children:"M\xe3 QR"})]})}})(null===p||void 0===p?void 0:p.status)]})]})]})}),(0,j.jsx)(A,{open:x,setOpen:_,org:null===p||void 0===p?void 0:p.organization,order:p,countItem:h})]})}},65864:function(e,i,s){s.d(i,{K:function(){return v}});var l=s(24483),n=s(17983),d=s(72791),o=s(16030),r=s(28903),t=s(76012),a=s(96755),c=s(32470),u=s(2579),m=s(80184);i.Z=function(){const{t:e}=(0,d.useContext)(n.I),{USER:i}=(0,o.v9)((e=>e.USER)),s={...t.lv,"filter[status]":"PAID",append:"qr_link|origin"},{resData:u,totalItem:p,onLoadMore:h,isValidating:x}=(0,a.H9)(i,c.Z.ORDERS,s),_=null!==u&&void 0!==u?u:[];return(0,m.jsxs)("div",{children:[0===p&&(0,m.jsx)(l.Bh,{title:"B\u1ea1n ch\u01b0a c\xf3 \u0111\u01a1n h\xe0ng n\xe0o"}),0===_.length&&x&&(0,m.jsx)(v,{}),(0,m.jsx)("ul",{className:"order-list__cnt",children:_.map(((e,i)=>(0,m.jsx)(r.Z,{order:e},i)))}),(0,m.jsx)("div",{className:"order-list__bottom",children:_.length<p&&(0,m.jsx)(l.Rb,{title:e("trending.watch_all"),loading:x,onClick:h})})]})};const v=()=>(0,m.jsx)("ul",{className:"order-list__cnt order-load__cnt",children:[1,2,3,4,5,6].map((e=>(0,m.jsxs)("li",{className:"order_load_cnt",children:[(0,m.jsx)("div",{className:"order_load_cnt_head",children:(0,m.jsx)(u.Z,{width:"100%",height:"100%"})}),(0,m.jsx)("div",{className:"order_load_cnt_body",children:(0,m.jsx)(u.Z,{width:"100%",height:"100%"})}),(0,m.jsx)("div",{className:"order_load_cnt_bot",children:(0,m.jsx)(u.Z,{width:"100%",height:"100%"})})]},e)))})}}]);
//# sourceMappingURL=864.4967a665.chunk.js.map