{"version":3,"file":"static/js/660.8c9b9008.chunk.js","mappings":"uLACA,EAAuB,0BAAvB,EAA6D,+BAA7D,EAAwG,+BAAxG,EAAwJ,oCAAxJ,EAA8M,qCAA9M,EAAiQ,iC,oICqGjQ,MApFA,WAAuB,IAAD,UAClB,MAAM,IAAEA,IAAQC,EAAAA,EAAAA,MACVC,GAAUC,EAAAA,EAAAA,MACVC,GAAQC,EAAAA,EAAAA,MACRC,GAAWC,EAAAA,EAAAA,KACXC,EAAOC,EAAAA,GAAAA,MAAWC,GAAKV,KAAQW,EAAAA,EAAAA,IAAQD,EAAEE,UAC/CC,EAAAA,EAAAA,YAAU,KACDL,GAAMN,EAAQY,QAAQ,SAAS,GACrC,IACH,MAAMC,EAAsB,IACrBC,EAAAA,GACH,MAAS,GACT,wBAA4C,QAArB,EAAM,OAAJR,QAAI,IAAJA,OAAI,EAAJA,EAAMS,qBAAa,QAAI,GAChD,kBAAgC,QAAf,EAAM,OAAJT,QAAI,IAAJA,OAAI,EAAJA,EAAMU,eAAO,QAAI,GACpC,oCAAoC,EACpC,2BAAyC,QAAf,EAAM,OAAJV,QAAI,IAAJA,OAAI,EAAJA,EAAMW,eAAO,QAAI,GAC7C,oBAAoC,QAAjB,EAAM,OAAJX,QAAI,IAAJA,OAAI,EAAJA,EAAMY,iBAAS,QAAI,GACxC,oBAAoC,QAAjB,EAAM,OAAJZ,QAAI,IAAJA,OAAI,EAAJA,EAAMa,iBAAS,QAAI,GACxC,mBAAoBf,IAElB,QAAEgB,EAAO,UAAEC,EAAS,WAAEC,IAAeC,EAAAA,EAAAA,IACvCjB,EACAkB,EAAAA,EAAAA,SACAX,GAGEY,GAAUC,EAAAA,EAAAA,QAAuB,MACjCC,GAAYD,EAAAA,EAAAA,QAAuB,MAMnCE,GAAYC,EAAAA,EAAAA,IALF,CACZC,KAAM,KACNC,WAAY,MACZC,UAAW,IAE+BL,GAQ9C,OAPAM,OAAOC,iBAAiB,UAAU,KACd,IAAD,EAER,EAFHN,EACe,QAAf,EAAAH,EAAQU,eAAO,OAAf,EAAiBC,UAAUC,OAAOC,GAEnB,QAAf,EAAAb,EAAQU,eAAO,OAAf,EAAiBC,UAAUG,IAAID,EACnC,KAGA,gCAEQpC,IACA,gBAAKsC,IAAKf,EAASgB,UAAWH,EAAW,UACrC,SAAC,KAAO,CACJI,QAAS,IAAM1C,EAAQ2C,SACvBC,KAAMA,EAAAA,EAAAA,iBACNC,SAAU,QAItB,SAACC,EAAA,EAAS,WACN,iBAAKL,UAAWH,EAAgB,WAC5B,gBAAKE,IAAKb,EAAWc,UAAWH,EAAsB,UAClD,gBAAKS,IAAS,OAAJzC,QAAI,IAAJA,OAAI,EAAJA,EAAM0C,OAAQP,UAAWH,EAAmBW,IAAI,QAE9D,UAAC,IAAc,CACXC,WAAY9B,EAAQ+B,OACpBC,SAAS,EACTC,QAAQ,wBACRC,KArCL,KAAYlC,EAAQ+B,OAAS9B,GAAWC,GAAY,EAqClC,WAEb,eAAImB,UAAWH,EAAqB,SAErB,OAAPlB,QAAO,IAAPA,OAAO,EAAPA,EAASmC,KAAI,CAACC,EAAqBC,KAC/B,SAAC,KAAU,CAEPD,KAAMA,EACNE,KAAK,WAFAD,OAOpBrC,EAAQ+B,OAAS9B,IAAa,SAAC,KAAQ,CAACsC,WAAY,GAAIC,KAAM1D,EAAQ,EAAI,aAIvF,SAAC,IAAa,MAG1B,C","sources":["webpack://web-booking/./src/pages/DealBanner/deal-banner.module.css?425b","pages/DealBanner/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"head\":\"deal-banner_head__jD7IE\",\"head_show\":\"deal-banner_head_show__GpOAR\",\"container\":\"deal-banner_container__cEaeH\",\"list_container\":\"deal-banner_list_container__v5Cgz\",\"deal_banner_cnt\":\"deal-banner_deal_banner_cnt__itJWn\",\"deal_banner\":\"deal-banner_deal_banner__xAqw9\"};","/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useRef } from 'react';\nimport { deals } from 'pages/HomePage/data'\nimport style from './deal-banner.module.css'\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useDeviceMobile, useElementOnScreen, useSwrInfinite } from 'hooks'\nimport { slugify } from 'utils';\nimport { Container } from '@mui/system';\nimport { paramsServices } from 'params-query';\nimport { ParamService } from 'params-query/param.interface';\nimport API_ROUTE from 'api/_api';\nimport { IServicePromo } from 'interface';\nimport { BackTopButton, SerProItem, XButton } from 'components/Layout';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { LoadGrid } from 'components/LoadingSketion';\nimport icon from 'constants/icon';\nimport { AUTH_LOCATION } from 'api/authLocation';\n\nfunction DealBanner() {\n    const { _id } = useParams()\n    const history = useHistory()\n    const IS_MB = useDeviceMobile()\n    const LOCATION = AUTH_LOCATION()\n    const deal = deals.find(i => _id === slugify(i.title))\n    useEffect(() => {\n        if (!deal) history.replace('/error')\n    }, [])\n    const param: ParamService = {\n        ...paramsServices,\n        'limit': 18,\n        'filter[special_price]': deal?.special_price ?? '',\n        'filter[keyword]': deal?.keyword ?? '',\n        'filter[is_momo_ecommerce_enable]': true,\n        'filter[discount_percent]': deal?.percent ?? '',\n        'filter[min_price]': deal?.min_price ?? '',\n        'filter[max_price]': deal?.max_price ?? '',\n        'filter[location]': LOCATION\n    }\n    const { resData, totalItem, onLoadMore } = useSwrInfinite(\n        deal,\n        API_ROUTE.SERVICES,\n        param\n    )\n    const onMore = () => { if (resData.length < totalItem) onLoadMore() }\n    const refHead = useRef<HTMLDivElement>(null)\n    const bannerRef = useRef<HTMLDivElement>(null)\n    const options = {\n        root: null,\n        rootMargin: \"0px\",\n        threshold: 0.3,\n    };\n    const isVisible = useElementOnScreen(options, bannerRef);\n    window.addEventListener(\"scroll\", () => {\n        if (isVisible) {\n            refHead.current?.classList.remove(style.head_show)\n        } else {\n            refHead.current?.classList.add(style.head_show)\n        }\n    });\n    return (\n        <>\n            {\n                IS_MB &&\n                <div ref={refHead} className={style.head}>\n                    <XButton\n                        onClick={() => history.goBack()}\n                        icon={icon.chevronLeftWhite}\n                        iconSize={28}\n                    />\n                </div>\n            }\n            <Container>\n                <div className={style.container}>\n                    <div ref={bannerRef} className={style.deal_banner_cnt}>\n                        <img src={deal?.banner} className={style.deal_banner} alt=\"\" />\n                    </div>\n                    <InfiniteScroll\n                        dataLength={resData.length}\n                        hasMore={true}\n                        loader={<></>}\n                        next={onMore}\n                    >\n                        <ul className={style.list_container}>\n                            {\n                                resData?.map((item: IServicePromo, index: number) => (\n                                    <SerProItem\n                                        key={index}\n                                        item={item}\n                                        type='SERVICE'\n                                    />\n                                ))\n                            }\n                        </ul>\n                        {resData.length < totalItem && <LoadGrid item_count={12} grid={IS_MB ? 2 : 6} />}\n                    </InfiniteScroll>\n                </div>\n            </Container>\n            <BackTopButton />\n        </>\n    );\n}\n\nexport default DealBanner;"],"names":["_id","useParams","history","useHistory","IS_MB","useDeviceMobile","LOCATION","AUTH_LOCATION","deal","deals","i","slugify","title","useEffect","replace","param","paramsServices","special_price","keyword","percent","min_price","max_price","resData","totalItem","onLoadMore","useSwrInfinite","API_ROUTE","refHead","useRef","bannerRef","isVisible","useElementOnScreen","root","rootMargin","threshold","window","addEventListener","current","classList","remove","style","add","ref","className","onClick","goBack","icon","iconSize","Container","src","banner","alt","dataLength","length","hasMore","loader","next","map","item","index","type","item_count","grid"],"sourceRoot":""}