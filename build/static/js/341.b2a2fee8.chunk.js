"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[341],{32341:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var i=n(23691),a=n(27565),d=n(35122),_=n(86222),s="trends_container_large__B3usY",r="trends_trend_list__b0stv",l="trends_video_item_cnt__Y04IM",c="trends_trend_list_video_thumb__fiLD0",o="trends_trend_item_head__bhL+j",m="trends_trend_item_center__LyHmS",v="trends_trend_item_body__pIhpM",u="trends_trend_item_video_thumb__QZNby",x="trends_trend_item_bot_ex__3tgm-",h="trends_trend_item_desc__kPdxa",g="trends_trend_item_bot_org__Alayd",j="trends_trend_item_bot_org_img__XSgoS",N="trends_trend_item_bot_org_name__FHDqR",p="trends_load_grid__jHB9x",b="trends_trend_detail_cnt__wZuWL",k="trends_trend_detail_btn_close__UrJ-U",f="trends_trend_item_head_org__j14Ob",A="trends_trend_item_head_name__RXuqV",y="trends_org_name__0zme9",I="trends_create_at__TG4lF",B="trends_trend_item_bot__GH2bq",z="trends_item_ex__Jx-cl",D="trends_item_ex_icon__zyDMA",q="trends_item_ex_text__FYVm1",C=n(58672),E=n(34328),F=n(30477),L=n(75068),S=n(49060),T=n(80201),w=n(21061),R=n(8426),P=n(44015),H=n(36100),M=n(63682),O=n(4086),J=n(46244),$={container:"trend-detail_container__LW5aw",video_cnt:"trend-detail_video_cnt__C1v6e",video_thumbnail:"trend-detail_video_thumbnail__rIIAf",video_box:"trend-detail_video_box__20Has",video:"trend-detail_video__UtiV1",trend_cnt:"trend-detail_trend_cnt__Bn-Sc",trend_org:"trend-detail_trend_org__X2PNr",trend_org_avatar:"trend-detail_trend_org_avatar__DzIbs",org_detail:"trend-detail_org_detail__NhzaH",org_detail_name:"trend-detail_org_detail_name__iZmAq",trend_content:"trend-detail_trend_content__u60do",trend_content_desc:"trend-detail_trend_content_desc__IHVhO",trend_content_services:"trend-detail_trend_content_services__DBIV8",service_item:"trend-detail_service_item__TfOtx",trend_interactive:"trend-detail_trend_interactive__2dpkt",interactive_item:"trend-detail_interactive_item__z49BQ",trend_cmt_cnt:"trend-detail_trend_cmt_cnt__-rylX",cmt_box:"trend-detail_cmt_box__nkfn+",comment_ctn:"trend-detail_comment_ctn__aQ5nS",comment_input_cnt:"trend-detail_comment_input_cnt__Aq9mC",comment_input_cnt_mb:"trend-detail_comment_input_cnt_mb__usxJB"},U=n(34262),V=n(67573),W=n(27929);var Y=function(){(0,d.c9)();const{id:e}=(0,E.g)(),{data:t}=(0,O.I)({queryKey:[w.Eo.TREND_DETAIL,e],queryFn:()=>T.A.get(`${i.A.API_NODE}/trends/${e}`,{params:{include:"services|tiktok"}}).then((e=>e.data.data.context)),enabled:!!e,staleTime:w.SJ}),n=t,a=(0,d.YJ)({API_URL:U.A.ORG((null===n||void 0===n?void 0:n.organization_id)||""),enable:!(null===n||void 0===n||!n.organization_id),dedupingInterval:0}).response,{data:_}=(0,O.I)({queryKey:[w.Eo.TREND_DETAIL_CMT,e],queryFn:()=>T.A.get(`${i.A.API_NODE}/tiktok/getCommentsByUrl`,{params:{"filter[trend]":e}}).then((e=>e.data.data.context.data)),enabled:!!e,staleTime:w.SJ}),{favoriteSt:s,onToggleFavorite:r}=(0,d.Af)({id:null===a||void 0===a?void 0:a.id,org_id:null===a||void 0===a?void 0:a.id,type:"ORG",count:null===a||void 0===a?void 0:a.favorites_count,favorite:null===a||void 0===a?void 0:a.is_favorite});return n?(0,W.jsxs)("div",{className:$.container,children:[(0,W.jsxs)("div",{className:$.video_cnt,children:[(0,W.jsx)("img",{src:null===n||void 0===n?void 0:n.image_thumb,alt:"",className:$.video_thumbnail}),(0,W.jsx)("div",{className:$.video_box,children:(0,W.jsx)("video",{className:$.video,loop:!0,controls:!0,"webkit-playsinline":"webkit-playsinline",playsInline:!0,children:(0,W.jsx)("source",{type:"video/mp4",src:`${null===n||void 0===n?void 0:n.media_url}#t=0.001`})})})]}),(0,W.jsx)("div",{className:$.trend_cnt,children:(0,W.jsxs)("div",{className:$.trend_cnt_info,children:[(0,W.jsxs)("div",{className:$.trend_org,children:[(0,W.jsx)("div",{className:$.trend_org_avatar,children:(0,W.jsx)("img",{src:null===a||void 0===a?void 0:a.image_url,alt:""})}),(0,W.jsx)("div",{className:$.org_detail,children:(0,W.jsxs)(J.N_,{to:(0,F.p7)(null===a||void 0===a?void 0:a.subdomain),className:$.org_detail_name,children:[(0,W.jsx)("span",{children:null===a||void 0===a?void 0:a.name}),(0,W.jsx)("span",{children:(0,R.i1)(n.createdAt)})]})})]}),(0,W.jsxs)("div",{className:$.trend_content,children:[(0,W.jsx)("h5",{className:$.trend_content_title,children:n.title}),(0,W.jsx)("span",{className:$.trend_content_desc,children:n.content})]}),(0,W.jsx)("div",{className:$.trend_content_services,children:n.services.map((e=>(0,W.jsxs)(J.N_,{className:$.service_item,to:(0,F.A2)(e.id,n.organization_id,e.service_name),children:[(0,W.jsx)(V.A,{src:e.image_url,alt:""})," ",e.service_name]},e.id)))})]})})]}):(0,W.jsx)(W.Fragment,{})},G=n(64451),X=n(69896);var K=function(){var e;const t=(0,E.W6)(),{t:n}=(0,a.useContext)(X.BR),l=(0,d.c9)(),o=(0,E.g)(),{data:m,fetchNextPage:v}=(0,S.q)({queryKey:["TRENDS"],queryFn:e=>{let{pageParam:t=1}=e;return T.A.get(`${i.A.API_NODE}/trends`,{params:{page:t,limit:"10",include:"services|tiktok"}}).then((e=>e.data.data))},staleTime:w.SJ,getNextPageParam:e=>{var t;return(null===e||void 0===e||null===(t=e.context)||void 0===t?void 0:t.current_page)+1}}),u=(null===m||void 0===m||null===(e=m.pages[0])||void 0===e?void 0:e.context.total)||1,x=(null===m||void 0===m?void 0:m.pages.map((e=>e.context.data)).flat())||[];return(0,W.jsxs)(W.Fragment,{children:[l&&(0,W.jsx)(L.A,{onBackFunc:()=>t.push("/homepage"),title:n("Home.review_beautyx_place")}),(0,W.jsx)(_.A,{children:(0,W.jsx)("div",{className:s,children:(0,W.jsxs)(P.A,{dataLength:x.length,hasMore:!0,loader:(0,W.jsx)(W.Fragment,{}),next:()=>x.length<u?v():null,children:[(0,W.jsx)("ul",{className:r,children:x.map(((e,t)=>(0,W.jsx)("li",{className:c,children:(0,W.jsx)(Q,{item:e})},t)))}),x.length<u&&(0,W.jsx)(H.L3,{className:p,grid:l?1:5,item_count:l?1:10})]})})}),(0,W.jsx)(M.A,{fullScreen:l,open:!!o.id,onClose:()=>t.goBack(),children:(0,W.jsxs)("div",{className:b,children:[(0,W.jsx)(G.b2,{onClick:()=>t.goBack(),className:k,icon:C.A.chevronLeftWhite,iconSize:18}),(0,W.jsx)(Y,{})]})})]})};const Q=e=>{var t,n,i;const{item:_}=e,s=(0,E.W6)(),r=(0,a.useRef)(null),c=(0,a.useRef)(null),p=(0,d.c9)(),b=()=>s.push(`/xu-huong/${_._id}`),k=(0,d.NY)({root:null,rootMargin:"0px",threshold:.3},c);(0,a.useEffect)((()=>(p&&(()=>{var e,t;k?null===(e=r.current)||void 0===e||e.play():null===(t=r.current)||void 0===t||t.pause()})(),()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.pause()})),[k]);const L=e=>{if(!p){var t,n;if(e)null===(t=r.current)||void 0===t||t.play();if(!e)null===(n=r.current)||void 0===n||n.pause()}};return(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)("div",{onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),onClick:p?()=>{}:()=>b(),className:l,children:[(0,W.jsx)("div",{ref:c,className:m}),(0,W.jsxs)("div",{onClick:()=>{s.push((0,F.p7)(_.organization_id))},className:o,children:[(0,W.jsx)("div",{className:f,children:(0,W.jsx)("img",{src:_.organization_image,alt:""})}),(0,W.jsxs)("div",{className:A,children:[(0,W.jsx)("p",{className:y,children:_.organization_name}),(0,W.jsx)("p",{className:I,children:(0,R.i1)(_.createdAt)})]})]}),(0,W.jsx)("div",{className:v,children:(0,W.jsx)("video",{ref:r,className:u,muted:!0,"webkit-playsinline":"webkit-playsinline",playsInline:!0,poster:_.image_thumb,children:(0,W.jsx)("source",{src:_.media_url})})}),(0,W.jsxs)("div",{className:B,children:[(0,W.jsxs)("div",{onClick:b,className:x,children:[(0,W.jsxs)("div",{className:z,children:[(0,W.jsx)("img",{className:D,src:C.A.heartBoldBlack,alt:""}),(0,W.jsx)("span",{className:q,children:null===(t=_.tiktok)||void 0===t?void 0:t.digg_count})]}),(0,W.jsxs)("div",{className:z,children:[(0,W.jsx)("img",{className:D,src:C.A.commentBoldBlack,alt:""}),(0,W.jsx)("span",{className:q,children:null===(n=_.tiktok)||void 0===n?void 0:n.comment_count})]}),(0,W.jsxs)("div",{className:z,children:[(0,W.jsx)("img",{className:D,src:C.A.shareBoldBlack,alt:""}),(0,W.jsx)("span",{className:q,children:null===(i=_.tiktok)||void 0===i?void 0:i.share_count})]})]}),(0,W.jsx)("p",{className:h,children:_.content}),(0,W.jsxs)("div",{className:g,children:[(0,W.jsx)("div",{className:j,children:(0,W.jsx)("img",{src:_.organization_image,alt:""})}),(0,W.jsx)("span",{className:N,children:_.organization_name})]})]})]})})}}}]);
//# sourceMappingURL=341.b2a2fee8.chunk.js.map