"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[767],{1767:function(t,s,i){i.r(s),i.d(s,{default:function(){return f}});var e=i(72791),n=i(19598),a=i(3444),l=i(34088),d=i(10266),c=i(2589),o=i(71269),r=i(22546),u=i(80184);var p=function(t){var s,i;const{product:e,quantity:n}=t;let a=!1;return(null===(s=e.discount)||void 0===s?void 0:s.discount_type)===r.uH.FINAL_PRICE.key&&(a=!0),(0,u.jsxs)("div",{className:"buy-now-item",children:[(0,u.jsx)("div",{className:"product-item",children:(0,u.jsx)("img",{src:e.image_url,alt:"",className:"product-item__img"})}),(0,u.jsxs)("div",{className:"product-item__detail",children:[(0,u.jsx)("span",{className:"product-item__detail-name",children:e.product_name}),(0,u.jsxs)("div",{className:"product-item__detail-total",children:[(0,u.jsxs)("span",{className:"quantity",children:["x ",n]}),(0,u.jsx)("div",{className:"price",children:a?(0,u.jsx)("span",{children:(0,o.Z)(null===(i=e.discount)||void 0===i?void 0:i.discount_value)}):(0,u.jsx)(u.Fragment,{children:e.special_price>0?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("span",{style:{color:"var(--orange)"},children:[(0,o.Z)(e.special_price),"\u0111"]}),(0,u.jsxs)("span",{children:[(0,o.Z)(e.retail_price),"\u0111"]})]}):(0,u.jsxs)("span",{children:[(0,o.Z)(e.retail_price),"\u0111"]})})})]})]})]})},h=i(94883),v=i(21272),_=i(763),m=i(16407),x=i(52467),j=i(80527),y=i(62631),N=i(10670),w=i(74410),b=i(3413),g=i(70762);var f=function(){var t;const s=(0,w.oG)(),i=(0,n.TH)(),f=(0,n.k6)(),Z=(0,v.E)(),[k,C]=(0,e.useState)(),{org:q,products:E}=i.state;let{total:A}=null===E||void 0===E?void 0:E.reduce(((t,s)=>{var i;const{quantity:e,product:n}=s;let a=n.special_price>0?n.special_price:n.retail_price;var l;(null===(i=n.discount)||void 0===i?void 0:i.discount_type)===r.uH.FINAL_PRICE.key&&(a=null===(l=n.discount)||void 0===l?void 0:l.discount_value);const d=a*e;return t.total+=d,t}),{total:0});const[T,P]=(0,e.useState)(),F=E.map((t=>({id:t.product.id,quantity:t.quantity}))),I=null===(t=i.state)||void 0===t?void 0:t.products.map((t=>{var s,i,e;const n=(null===(s=t.product)||void 0===s?void 0:s.special_price)>0?null===(i=t.product)||void 0===i?void 0:i.special_price:null===(e=t.product)||void 0===e?void 0:e.retail_price;return(0,x.h)(t.product,q,1,t.quantity,n)})),B={products:F,services:[],treatment_combo:[],payment_method_id:T,coupon_code:[],description:"",user_address_id:null===k||void 0===k?void 0:k.id};async function O(){const t=(0,_.pickBy)(B,_.identity);try{const s=E.map((t=>({...t.product,quantity:t.quantity})));j.ZP.PAY_CONFIRM_CLICK(null===q||void 0===q?void 0:q.id,(0,y.E)(s));const i=await m.Z.postOrder(null===q||void 0===q?void 0:q.id,t),e=await i.data.context,n=await e.payment_gateway.description,a=e.payment_gateway.transaction_uuid;"CANCELED"!==i.data.context.status&&f.push({pathname:`/trang-thai-don-hang/${n}`,search:a,state:{state_payment:e,listPayment:I}})}catch(s){console.log(s)}}return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.Z,{title:"Chi ti\u1ebft thanh to\xe1n"}),s&&(0,u.jsx)(a.Z,{title:"Chi ti\u1ebft thanh to\xe1n"}),(0,u.jsx)(d.Z,{children:(0,u.jsxs)("div",{className:"service-detail buy-now-cnt",children:[(0,u.jsxs)("div",{className:"flex-row-sp buy-now__user",children:[(0,u.jsx)("div",{className:"buy-now__user-left",children:(0,u.jsx)(c.Z,{onSetAddressDefault:C})}),(0,u.jsx)("div",{className:"buy-now__user-right",children:q&&(0,u.jsx)(b.hd,{org:q})})]}),(0,u.jsxs)("div",{className:"buy-now__list",children:[(0,u.jsx)("span",{className:"title",children:"S\u1ea3n ph\u1ea9m"}),(0,u.jsx)("ul",{className:"list",children:null===E||void 0===E?void 0:E.map(((t,s)=>(0,u.jsx)("li",{children:(0,u.jsx)(p,{product:t.product,quantity:t.quantity})},s)))})]}),(0,u.jsx)("div",{style:Z===h.v.BEAUTYX&&"BOOK_NOW"===i.state.TYPE?{display:"block"}:{display:"none"},children:(0,u.jsx)("div",{style:"BEAUTYX"!==Z?{display:"none"}:{},children:(0,u.jsx)(g.Z,{onSetPaymentMethod:t=>P(t.id)})})}),(0,u.jsx)("div",{className:"buy-now__total-cnt",children:(0,u.jsxs)("div",{className:"buy-now__total",children:[(0,u.jsxs)("div",{className:"flex-row-sp buy-now__total-bill",children:[(0,u.jsx)("span",{children:"T\u1ed5ng ti\u1ec1n"}),(0,u.jsxs)("span",{children:[(0,o.Z)(A),"\u0111"]})]}),(0,u.jsxs)("div",{className:"buy-now__total-pay",children:[(0,u.jsxs)("div",{className:"flex-row-sp amount-total",children:[(0,u.jsx)("span",{children:"T\u1ed5ng thanh to\xe1n"}),(0,u.jsxs)("span",{children:[(0,o.Z)(A),"\u0111"]})]}),(0,u.jsx)("div",{className:"amount-btn",children:(0,u.jsx)(N.Rb,{onClick:()=>{k&&(h.v.BEAUTYX,O())},title:"Thanh to\xe1n",loading:!1})})]})]})})]})})]})}}}]);
//# sourceMappingURL=767.dc30480b.chunk.js.map