{"version":3,"file":"static/js/341.14c99192.chunk.js","mappings":"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","sources":["webpack://web-booking/./src/pages/Trends/trends.module.css?b50f","webpack://web-booking/./src/pages/TrendsDetail/trend-detail.module.css?7c68","pages/TrendsDetail/index.tsx","pages/Trends/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container_large\":\"trends_container_large__B3usY\",\"trend_list\":\"trends_trend_list__b0stv\",\"video_item_cnt\":\"trends_video_item_cnt__Y04IM\",\"trend_list_video_thumb\":\"trends_trend_list_video_thumb__fiLD0\",\"trend_item_head\":\"trends_trend_item_head__bhL+j\",\"trend_item_center\":\"trends_trend_item_center__LyHmS\",\"trend_item_body\":\"trends_trend_item_body__pIhpM\",\"trend_item_img_thumb\":\"trends_trend_item_img_thumb__xQ2c9\",\"trend_item_video_thumb\":\"trends_trend_item_video_thumb__QZNby\",\"trend_item_bot_ex\":\"trends_trend_item_bot_ex__3tgm-\",\"trend_item_desc\":\"trends_trend_item_desc__kPdxa\",\"trend_item_bot_org\":\"trends_trend_item_bot_org__Alayd\",\"trend_item_bot_org_img\":\"trends_trend_item_bot_org_img__XSgoS\",\"trend_item_bot_org_name\":\"trends_trend_item_bot_org_name__FHDqR\",\"load_grid\":\"trends_load_grid__jHB9x\",\"trend_detail_cnt\":\"trends_trend_detail_cnt__wZuWL\",\"trend_detail_btn_close\":\"trends_trend_detail_btn_close__UrJ-U\",\"trend_item_head_org\":\"trends_trend_item_head_org__j14Ob\",\"trend_item_head_name\":\"trends_trend_item_head_name__RXuqV\",\"org_name\":\"trends_org_name__0zme9\",\"create_at\":\"trends_create_at__TG4lF\",\"trend_item_bot\":\"trends_trend_item_bot__GH2bq\",\"item_ex\":\"trends_item_ex__Jx-cl\",\"item_ex_icon\":\"trends_item_ex_icon__zyDMA\",\"item_ex_text\":\"trends_item_ex_text__FYVm1\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"trend-detail_container__LW5aw\",\"video_cnt\":\"trend-detail_video_cnt__C1v6e\",\"video_thumbnail\":\"trend-detail_video_thumbnail__rIIAf\",\"video_box\":\"trend-detail_video_box__20Has\",\"video\":\"trend-detail_video__UtiV1\",\"trend_cnt\":\"trend-detail_trend_cnt__Bn-Sc\",\"trend_org\":\"trend-detail_trend_org__X2PNr\",\"trend_org_avatar\":\"trend-detail_trend_org_avatar__DzIbs\",\"org_detail\":\"trend-detail_org_detail__NhzaH\",\"org_detail_name\":\"trend-detail_org_detail_name__iZmAq\",\"trend_content\":\"trend-detail_trend_content__u60do\",\"trend_content_desc\":\"trend-detail_trend_content_desc__IHVhO\",\"trend_content_services\":\"trend-detail_trend_content_services__DBIV8\",\"service_item\":\"trend-detail_service_item__TfOtx\",\"trend_interactive\":\"trend-detail_trend_interactive__2dpkt\",\"interactive_item\":\"trend-detail_interactive_item__z49BQ\",\"trend_cmt_cnt\":\"trend-detail_trend_cmt_cnt__-rylX\",\"cmt_box\":\"trend-detail_cmt_box__nkfn+\",\"comment_ctn\":\"trend-detail_comment_ctn__aQ5nS\",\"comment_input_cnt\":\"trend-detail_comment_input_cnt__Aq9mC\",\"comment_input_cnt_mb\":\"trend-detail_comment_input_cnt_mb__usxJB\"};","import { useQuery } from \"@tanstack/react-query\";\nimport API_3RD from \"api/3rd-api\";\nimport axios from \"axios\";\nimport { QR_KEY, STALE_TIME } from \"config\";\nimport { Link, useParams } from \"react-router-dom\";\nimport style from \"./trend-detail.module.css\"\nimport { ITrend } from \"pages/Trends/trend.interface\";\nimport { useDeviceMobile, useFavorite, useSwr } from \"hooks\";\nimport { IOrganization } from \"interface\";\nimport API_ROUTE from \"api/_api\";\nimport { Avatar } from \"@mui/material\";\nimport { formatCountTrends, formatDateFromNow } from \"utils\";\nimport { XButton } from \"components/Layout\";\nimport icon from \"constants/icon\";\nimport Comment from \"components/Comment\";\nimport { formatRouterLinkOrg, formatRouterLinkService } from \"utils/formatRouterLink/formatRouter\";\n\nfunction TrendsDetail() {\n    const mb = useDeviceMobile()\n    const { id } = useParams()\n    const { data } = useQuery({\n        queryKey: [QR_KEY.TREND_DETAIL, id],\n        queryFn: () => axios.get(`${API_3RD.API_NODE}/trends/${id}`, { params: { 'include': 'services|tiktok' } })\n            .then(res => res.data.data.context),\n        enabled: !!id,\n        staleTime: STALE_TIME\n    })\n    const trend: ITrend | undefined = data\n    const org: IOrganization = useSwr({\n        API_URL: API_ROUTE.ORG(trend?.organization_id || ''),\n        enable: !!trend?.organization_id,\n        dedupingInterval:0\n    }).response\n    const { data: dataCommentMix } = useQuery({\n        queryKey: [QR_KEY.TREND_DETAIL_CMT, id],\n        queryFn: () => axios.get(`${API_3RD.API_NODE}/tiktok/getCommentsByUrl`, { params: { 'filter[trend]': id } })\n            .then(res => res.data.data.context.data),\n        enabled: !!id,\n        staleTime: STALE_TIME\n    })\n    const { favoriteSt, onToggleFavorite } = useFavorite({\n        id: org?.id,\n        org_id: org?.id,\n        type: 'ORG',\n        count: org?.favorites_count,\n        favorite: org?.is_favorite\n    })\n\n\n    return (\n        trend ?\n            <div className={style.container}>\n                <div className={style.video_cnt}>\n                    <img src={trend?.image_thumb} alt=\"\" className={style.video_thumbnail} />\n                    <div className={style.video_box}>\n                        <video\n                            className={style.video} loop controls\n                            webkit-playsinline=\"webkit-playsinline\"\n                            playsInline={true}\n                        >\n                            <source type='video/mp4' src={`${trend?.media_url}#t=0.001`} />\n                        </video>\n                    </div>\n                </div>\n                <div className={style.trend_cnt}>\n                    <div className={style.trend_cnt_info}>\n                        <div className={style.trend_org}>\n                            <div className={style.trend_org_avatar}><img src={org?.image_url} alt=\"\" /></div>\n                            <div className={style.org_detail}>\n                                <Link to={formatRouterLinkOrg(org?.subdomain)} className={style.org_detail_name}>\n                                    <span>{org?.name}</span>\n                                    <span>{formatDateFromNow(trend.createdAt)}</span>\n                                </Link>\n                            </div>\n                        </div>\n                        <div className={style.trend_content}>\n                            <h5 className={style.trend_content_title} >{trend.title}</h5>\n                            <span className={style.trend_content_desc}>{trend.content}</span>\n                        </div>\n                        <div className={style.trend_content_services}>\n                            {\n                                trend.services.map(i => (\n                                    <Link className={style.service_item} key={i.id}\n                                        to={formatRouterLinkService(i.id, trend.organization_id, i.service_name)}\n                                    >\n                                        <Avatar src={i.image_url} alt=\"\" /> {i.service_name}\n                                    </Link>\n                                ))\n                            }\n                        </div>\n                        {/* <div className={style.trend_interactive}>\n                            <div className={style.interactive_item}>\n                                <XButton icon={icon.eyeBoldBlack} iconSize={16} />{formatCountTrends(trend.tiktok?.play_count)}\n                            </div>\n                            <div className={style.interactive_item}>\n                                <XButton onClick={onToggleFavorite}\n                                    icon={favoriteSt.is_favorite ? icon.heartBoldRed : icon.heartBoldBlack} iconSize={16}\n                                />\n                                {trend.tiktok?.digg_count + favoriteSt.favorite_count}\n                            </div>\n                            <div className={style.interactive_item}>\n                                <XButton icon={icon.commentBoldBlack} iconSize={16} />{trend.tiktok?.comment_count || 0}\n                            </div>\n                            <div className={style.interactive_item}>\n                                <XButton icon={icon.shareBoldBlack} iconSize={16} />{trend.tiktok?.share_count || 1}\n                            </div>\n                        </div> */}\n                    </div>\n                    {/* <div className={style.trend_cmt_cnt}>\n                        <div className={style.cmt_box}>\n                            <Comment\n                                commentable_type='ORGANIZATION'\n                                commentable_id={org?.id}\n                                org_id={org?.id}\n                                commentsMixed={dataCommentMix || []}\n                                classNameCnt={mb ? '' : style.comment_ctn}\n                                classNameInputCnt={mb ? style.comment_input_cnt_mb : style.comment_input_cnt}\n                                layout=\"column\"\n                            />\n                        </div>\n                    </div> */}\n                </div>\n            </div>\n            :\n            <></>\n    );\n}\n\nexport default TrendsDetail;","/* eslint-disable react-hooks/exhaustive-deps */\nimport API_3RD from \"api/3rd-api\";\nimport { useContext, useEffect, useRef } from \"react\";\nimport { useDeviceMobile, useElementOnScreen } from \"hooks\";\nimport { ITrend } from \"./trend.interface\";\nimport { Container } from \"@mui/system\";\nimport style from \"./trends.module.css\";\nimport icon from \"constants/icon\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { formatRouterLinkOrg } from \"utils/formatRouterLink/formatRouter\";\nimport HeadMobile from \"features/HeadMobile\";\nimport { useInfiniteQuery } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport { STALE_TIME } from \"config\";\nimport { formatDateFromNow } from \"utils\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport { LoadGrid } from \"components/LoadingSketion\";\nimport { Dialog } from \"@mui/material\";\nimport TrendsDetail from \"pages/TrendsDetail\";\nimport { XButton } from \"components/Layout\";\nimport { AppContext, AppContextType } from \"context\";\n\nfunction Trends() {\n  const history = useHistory()\n  const { t } = useContext(AppContext) as AppContextType\n  const IS_MB = useDeviceMobile()\n  const params = useParams()\n  const { data, fetchNextPage } = useInfiniteQuery({\n    queryKey: ['TRENDS'],\n    queryFn: ({ pageParam = 1 }) => axios.get(`${API_3RD.API_NODE}/trends`, {\n      params: {\n        'page': pageParam,\n        'limit': '10',\n        'include': 'services|tiktok'\n      }\n    }).then(res => res.data.data),\n    staleTime: STALE_TIME,\n    getNextPageParam: (page: any) => page?.context?.current_page + 1\n  })\n  const total = data?.pages[0]?.context.total || 1\n  const trends: ITrend[] = data?.pages.map(i => i.context.data).flat() || []\n  const onViewMore = () => trends.length < total ? fetchNextPage() : null\n\n  return (\n    <>\n      {IS_MB && <HeadMobile onBackFunc={() => history.push('/homepage')} title={t('Home.review_beautyx_place')} />}\n      <Container>\n        <div className={style.container_large}>\n          <InfiniteScroll\n            dataLength={trends.length}\n            hasMore={true}\n            loader={<></>}\n            next={onViewMore}\n          >\n            <ul className={style.trend_list}>\n              {\n                trends.map((item: ITrend, index: number) => (\n                  <li key={index} className={style.trend_list_video_thumb}>\n                    <VideoItemThumb\n                      item={item}\n                    />\n                  </li>\n                ))\n              }\n            </ul>\n            {trends.length < total && <LoadGrid className={style.load_grid} grid={IS_MB ? 1 : 5} item_count={IS_MB ? 1 : 10} />}\n          </InfiniteScroll>\n        </div>\n      </Container>\n      <Dialog fullScreen={IS_MB} open={params.id ? true : false} onClose={() => history.goBack()} >\n        <div className={style.trend_detail_cnt}>\n          <XButton onClick={() => history.goBack()} className={style.trend_detail_btn_close} icon={icon.chevronLeftWhite} iconSize={18} />\n          <TrendsDetail />\n        </div>\n      </Dialog>\n    </>\n  );\n}\n\nexport default Trends;\n\ninterface VideoItemThumbProps {\n  item: ITrend\n}\n\nconst VideoItemThumb = (props: VideoItemThumbProps) => {\n  const { item } = props;\n  const history = useHistory()\n  const videoRef = useRef<HTMLVideoElement>(null)\n  const itemRef = useRef<HTMLDivElement>(null)\n  const IS_MB = useDeviceMobile()\n  const onDetail = () => history.push(`/xu-huong/${item._id}`)\n\n  const options = {\n    root: null,\n    rootMargin: \"0px\",\n    threshold: 0.3,\n  };\n  const isVisible = useElementOnScreen(options, itemRef);\n  const onVideoPress = () => {\n    if (isVisible) {\n      videoRef.current?.play();\n    } else {\n      videoRef.current?.pause();\n    }\n  };\n  useEffect(() => {\n    if (IS_MB) { onVideoPress() }\n    return () => videoRef.current?.pause()\n  }, [isVisible])\n\n  const onOrgDetail = () => {\n    history.push(formatRouterLinkOrg(item.organization_id))\n  }\n  const onTriggerPlay = (play: boolean) => {\n    if (!IS_MB) {\n      if (play) { videoRef.current?.play() }\n      if (!play) { videoRef.current?.pause() }\n    }\n  }\n  return (\n    <>\n      <div\n        onMouseEnter={() => onTriggerPlay(true)}\n        onMouseLeave={() => onTriggerPlay(false)}\n        onClick={!IS_MB ? () => onDetail() : () => { }}\n        className={style.video_item_cnt}\n      >\n        <div ref={itemRef} className={style.trend_item_center} >\n        </div>\n        <div\n          onClick={onOrgDetail}\n          className={style.trend_item_head}\n        >\n          <div className={style.trend_item_head_org}>\n            <img src={item.organization_image} alt=\"\" />\n          </div>\n          <div className={style.trend_item_head_name}>\n            <p className={style.org_name}>{item.organization_name}</p>\n            <p className={style.create_at}>\n              {formatDateFromNow(item.createdAt)}\n            </p>\n          </div>\n        </div>\n        <div className={style.trend_item_body}>\n          <video\n            ref={videoRef}\n            className={style.trend_item_video_thumb}\n            muted={true}\n            // controls={IS_MB}\n            webkit-playsinline=\"webkit-playsinline\"\n            playsInline={true}\n            poster={item.image_thumb}\n          >\n            <source src={item.media_url} />\n          </video>\n        </div>\n        <div className={style.trend_item_bot}>\n          <div onClick={onDetail} className={style.trend_item_bot_ex}>\n            <div className={style.item_ex}>\n              <img className={style.item_ex_icon} src={icon.heartBoldBlack} alt=\"\" />\n              <span className={style.item_ex_text}>{item.tiktok?.digg_count}</span>\n            </div>\n            <div className={style.item_ex}>\n              <img className={style.item_ex_icon} src={icon.commentBoldBlack} alt=\"\" />\n              <span className={style.item_ex_text}>{item.tiktok?.comment_count}</span>\n            </div>\n            <div className={style.item_ex}>\n              <img className={style.item_ex_icon} src={icon.shareBoldBlack} alt=\"\" />\n              <span className={style.item_ex_text}>{item.tiktok?.share_count}</span>\n            </div>\n          </div>\n          <p className={style.trend_item_desc}>\n            {item.content}\n          </p>\n          <div className={style.trend_item_bot_org}>\n            <div className={style.trend_item_bot_org_img}>\n              <img src={item.organization_image} alt=\"\" />\n            </div>\n            <span className={style.trend_item_bot_org_name}>{item.organization_name}</span>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}"],"names":["useDeviceMobile","id","useParams","data","useQuery","queryKey","QR_KEY","TREND_DETAIL","queryFn","axios","get","API_3RD","API_NODE","params","then","res","context","enabled","staleTime","STALE_TIME","trend","org","useSwr","API_URL","API_ROUTE","ORG","organization_id","enable","dedupingInterval","response","dataCommentMix","TREND_DETAIL_CMT","favoriteSt","onToggleFavorite","useFavorite","org_id","type","count","favorites_count","favorite","is_favorite","_jsxs","className","style","container","children","video_cnt","_jsx","src","image_thumb","alt","video_thumbnail","video_box","video","loop","controls","playsInline","media_url","trend_cnt","trend_cnt_info","trend_org","trend_org_avatar","image_url","org_detail","Link","to","formatRouterLinkOrg","subdomain","org_detail_name","name","formatDateFromNow","createdAt","trend_content","trend_content_title","title","trend_content_desc","content","trend_content_services","services","map","i","service_item","formatRouterLinkService","service_name","Avatar","_Fragment","_data$pages$","history","useHistory","t","useContext","AppContext","IS_MB","fetchNextPage","useInfiniteQuery","_ref","pageParam","getNextPageParam","page","_page$context","current_page","total","pages","trends","flat","HeadMobile","onBackFunc","push","Container","InfiniteScroll","dataLength","length","hasMore","loader","next","onViewMore","item","index","VideoItemThumb","LoadGrid","grid","item_count","Dialog","fullScreen","open","onClose","goBack","XButton","onClick","icon","chevronLeftWhite","iconSize","TrendsDetail","props","_item$tiktok","_item$tiktok2","_item$tiktok3","videoRef","useRef","itemRef","onDetail","_id","isVisible","useElementOnScreen","root","rootMargin","threshold","useEffect","onVideoPress","_videoRef$current","_videoRef$current2","current","play","pause","_videoRef$current3","onTriggerPlay","_videoRef$current4","_videoRef$current5","onMouseEnter","onMouseLeave","ref","onOrgDetail","organization_image","organization_name","muted","poster","heartBoldBlack","tiktok","digg_count","commentBoldBlack","comment_count","shareBoldBlack","share_count"],"sourceRoot":""}