"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[733],{25733:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var i=n(10117),_=n(72791),d=n(84042),a=n(56598),r={container_large:"trends_container_large__B3usY",trend_list:"trends_trend_list__b0stv",video_item_cnt:"trends_video_item_cnt__Y04IM",trend_list_video_thumb:"trends_trend_list_video_thumb__fiLD0",trend_item_head:"trends_trend_item_head__bhL+j",trend_item_center:"trends_trend_item_center__LyHmS",trend_item_body:"trends_trend_item_body__pIhpM",trend_item_img_thumb:"trends_trend_item_img_thumb__xQ2c9",trend_item_video_thumb:"trends_trend_item_video_thumb__QZNby",trend_item_bot_ex:"trends_trend_item_bot_ex__3tgm-",trend_item_desc:"trends_trend_item_desc__kPdxa",trend_item_bot_org:"trends_trend_item_bot_org__Alayd",trend_item_bot_org_img:"trends_trend_item_bot_org_img__XSgoS",trend_item_bot_org_name:"trends_trend_item_bot_org_name__FHDqR",load_grid:"trends_load_grid__jHB9x",trend_detail_cnt:"trends_trend_detail_cnt__wZuWL",trend_detail_btn_close:"trends_trend_detail_btn_close__UrJ-U",trend_item_head_org:"trends_trend_item_head_org__j14Ob",trend_item_head_name:"trends_trend_item_head_name__RXuqV",org_name:"trends_org_name__0zme9",create_at:"trends_create_at__TG4lF",trend_item_bot:"trends_trend_item_bot__GH2bq",item_ex:"trends_item_ex__Jx-cl",item_ex_icon:"trends_item_ex_icon__zyDMA",item_ex_text:"trends_item_ex_text__FYVm1"},s=n(6652),l=n(19598),o=n(68915),c=n(3444),m=n(47858),v=n(31243),u=n(83017),x=n(64060),h=n(14771),g=n(28500),j=n(29818),b=n(85439),N=n(91523),p={container:"trend-detail_container__LW5aw",video_cnt:"trend-detail_video_cnt__C1v6e",video_thumbnail:"trend-detail_video_thumbnail__rIIAf",video_box:"trend-detail_video_box__20Has",video:"trend-detail_video__UtiV1",trend_cnt:"trend-detail_trend_cnt__Bn-Sc",trend_org:"trend-detail_trend_org__X2PNr",trend_org_avatar:"trend-detail_trend_org_avatar__DzIbs",org_detail:"trend-detail_org_detail__NhzaH",org_detail_name:"trend-detail_org_detail_name__iZmAq",trend_content:"trend-detail_trend_content__u60do",trend_content_desc:"trend-detail_trend_content_desc__IHVhO",trend_content_services:"trend-detail_trend_content_services__DBIV8",service_item:"trend-detail_service_item__TfOtx",trend_interactive:"trend-detail_trend_interactive__2dpkt",interactive_item:"trend-detail_interactive_item__z49BQ",trend_cmt_cnt:"trend-detail_trend_cmt_cnt__-rylX",cmt_box:"trend-detail_cmt_box__nkfn+",comment_ctn:"trend-detail_comment_ctn__aQ5nS",comment_input_cnt:"trend-detail_comment_input_cnt__Aq9mC",comment_input_cnt_mb:"trend-detail_comment_input_cnt_mb__usxJB"},k=n(32470),f=n(60220),y=n(8477),Z=n(59787),B=n(80184);var z=function(){var e,t,n,_;const a=(0,d.oG)(),{id:r}=(0,l.UO)(),{data:c}=(0,b.a)({queryKey:[u.xG.TREND_DETAIL,r],queryFn:()=>v.Z.get(`${i.Z.API_NODE}/trends/${r}`,{params:{include:"services|tiktok"}}).then((e=>e.data.data.context)),enabled:!!r,staleTime:u.ip}),m=c,h=(0,d.YE)({API_URL:k.Z.ORG((null===m||void 0===m?void 0:m.organization_id)||""),enable:!(null===m||void 0===m||!m.organization_id),dedupingInterval:0}).response,{data:g}=(0,b.a)({queryKey:[u.xG.TREND_DETAIL_CMT,r],queryFn:()=>v.Z.get(`${i.Z.API_NODE}/tiktok/getCommentsByUrl`,{params:{"filter[trend]":r}}).then((e=>e.data.data.context.data)),enabled:!!r,staleTime:u.ip}),{favoriteSt:j,onToggleFavorite:z}=(0,d.s4)({id:null===h||void 0===h?void 0:h.id,org_id:null===h||void 0===h?void 0:h.id,type:"ORG",count:null===h||void 0===h?void 0:h.favorites_count,favorite:null===h||void 0===h?void 0:h.is_favorite});return m?(0,B.jsxs)("div",{className:p.container,children:[(0,B.jsxs)("div",{className:p.video_cnt,children:[(0,B.jsx)("img",{src:null===m||void 0===m?void 0:m.image_thumb,alt:"",className:p.video_thumbnail}),(0,B.jsx)("div",{className:p.video_box,children:(0,B.jsx)("video",{className:p.video,loop:!0,controls:!0,"webkit-playsinline":"webkit-playsinline",playsInline:!0,children:(0,B.jsx)("source",{type:"video/mp4",src:`${null===m||void 0===m?void 0:m.media_url}#t=0.001`})})})]}),(0,B.jsxs)("div",{className:p.trend_cnt,children:[(0,B.jsxs)("div",{className:p.trend_cnt_info,children:[(0,B.jsxs)("div",{className:p.trend_org,children:[(0,B.jsx)("div",{className:p.trend_org_avatar,children:(0,B.jsx)("img",{src:null===h||void 0===h?void 0:h.image_url,alt:""})}),(0,B.jsx)("div",{className:p.org_detail,children:(0,B.jsxs)(N.rU,{to:(0,o.Hs)(null===h||void 0===h?void 0:h.subdomain),className:p.org_detail_name,children:[(0,B.jsx)("span",{children:null===h||void 0===h?void 0:h.name}),(0,B.jsx)("span",{children:(0,x.wh)(m.createdAt)})]})})]}),(0,B.jsxs)("div",{className:p.trend_content,children:[(0,B.jsx)("h5",{className:p.trend_content_title,children:m.title}),(0,B.jsx)("span",{className:p.trend_content_desc,children:m.content})]}),(0,B.jsx)("div",{className:p.trend_content_services,children:m.services.map((e=>(0,B.jsxs)(N.rU,{className:p.service_item,to:(0,o.ro)(e.id,m.organization_id,e.service_name),children:[(0,B.jsx)(f.Z,{src:e.image_url,alt:""})," ",e.service_name]},e.id)))}),(0,B.jsxs)("div",{className:p.trend_interactive,children:[(0,B.jsxs)("div",{className:p.interactive_item,children:[(0,B.jsx)(y.Rb,{icon:s.Z.eyeBoldBlack,iconSize:16}),(0,x.Vz)(null===(e=m.tiktok)||void 0===e?void 0:e.play_count)]}),(0,B.jsxs)("div",{className:p.interactive_item,children:[(0,B.jsx)(y.Rb,{onClick:z,icon:j.is_favorite?s.Z.heartBoldRed:s.Z.heartBoldBlack,iconSize:16}),(null===(t=m.tiktok)||void 0===t?void 0:t.digg_count)+j.favorite_count]}),(0,B.jsxs)("div",{className:p.interactive_item,children:[(0,B.jsx)(y.Rb,{icon:s.Z.commentBoldBlack,iconSize:16}),(null===(n=m.tiktok)||void 0===n?void 0:n.comment_count)||0]}),(0,B.jsxs)("div",{className:p.interactive_item,children:[(0,B.jsx)(y.Rb,{icon:s.Z.shareBoldBlack,iconSize:16}),(null===(_=m.tiktok)||void 0===_?void 0:_.share_count)||1]})]})]}),(0,B.jsx)("div",{className:p.trend_cmt_cnt,children:(0,B.jsx)("div",{className:p.cmt_box,children:(0,B.jsx)(Z.Z,{commentable_type:"ORGANIZATION",commentable_id:null===h||void 0===h?void 0:h.id,org_id:null===h||void 0===h?void 0:h.id,commentsMixed:g||[],classNameCnt:a?"":p.comment_ctn,classNameInputCnt:a?p.comment_input_cnt_mb:p.comment_input_cnt,layout:"column"})})})]})]}):(0,B.jsx)(B.Fragment,{})};var I=function(){var e;const t=(0,l.k6)(),n=(0,d.oG)(),_=(0,l.UO)(),{data:o,fetchNextPage:x}=(0,m.N)({queryKey:["TRENDS"],queryFn:e=>{let{pageParam:t=1}=e;return v.Z.get(`${i.Z.API_NODE}/trends`,{params:{page:t,limit:"10",include:"services|tiktok"}}).then((e=>e.data.data))},staleTime:u.ip,getNextPageParam:e=>{var t;return(null===e||void 0===e||null===(t=e.context)||void 0===t?void 0:t.current_page)+1}}),b=(null===o||void 0===o||null===(e=o.pages[0])||void 0===e?void 0:e.context.total)||1,N=(null===o||void 0===o?void 0:o.pages.map((e=>e.context.data)).flat())||[];return(0,B.jsxs)(B.Fragment,{children:[n&&(0,B.jsx)(c.Z,{onBackFunc:()=>t.push("/homepage"),title:"Xu h\u01b0\u1edbng"}),(0,B.jsx)(a.Z,{children:(0,B.jsx)("div",{className:r.container_large,children:(0,B.jsxs)(h.Z,{dataLength:N.length,hasMore:!0,loader:(0,B.jsx)(B.Fragment,{}),next:()=>N.length<b?x():null,children:[(0,B.jsx)("ul",{className:r.trend_list,children:N.map(((e,t)=>(0,B.jsx)("li",{className:r.trend_list_video_thumb,children:(0,B.jsx)(R,{item:e})},t)))}),N.length<b&&(0,B.jsx)(g._R,{className:r.load_grid,grid:n?1:5,item_count:n?1:10})]})})}),(0,B.jsx)(j.Z,{fullScreen:n,open:!!_.id,onClose:()=>t.goBack(),children:(0,B.jsxs)("div",{className:r.trend_detail_cnt,children:[(0,B.jsx)(y.Rb,{onClick:()=>t.goBack(),className:r.trend_detail_btn_close,icon:s.Z.chevronLeftWhite,iconSize:18}),(0,B.jsx)(z,{})]})})]})};const R=e=>{var t,n,i;const{item:a}=e,c=(0,l.k6)(),m=(0,_.useRef)(null),v=(0,_.useRef)(null),u=(0,d.oG)(),h=()=>c.push(`/xu-huong/${a._id}`),g=(0,d.W7)({root:null,rootMargin:"0px",threshold:.3},v);(0,_.useEffect)((()=>(u&&(()=>{var e,t;g?null===(e=m.current)||void 0===e||e.play():null===(t=m.current)||void 0===t||t.pause()})(),()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.pause()})),[g]);const j=e=>{if(!u){var t,n;if(e)null===(t=m.current)||void 0===t||t.play();if(!e)null===(n=m.current)||void 0===n||n.pause()}};return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)("div",{onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onClick:u?()=>{}:()=>h(),className:r.video_item_cnt,children:[(0,B.jsx)("div",{ref:v,className:r.trend_item_center}),(0,B.jsxs)("div",{onClick:()=>{c.push((0,o.Hs)(a.organization_id))},className:r.trend_item_head,children:[(0,B.jsx)("div",{className:r.trend_item_head_org,children:(0,B.jsx)("img",{src:a.organization_image,alt:""})}),(0,B.jsxs)("div",{className:r.trend_item_head_name,children:[(0,B.jsx)("p",{className:r.org_name,children:a.organization_name}),(0,B.jsx)("p",{className:r.create_at,children:(0,x.wh)(a.createdAt)})]})]}),(0,B.jsx)("div",{className:r.trend_item_body,children:(0,B.jsx)("video",{ref:m,className:r.trend_item_video_thumb,muted:!0,"webkit-playsinline":"webkit-playsinline",playsInline:!0,poster:a.image_thumb,children:(0,B.jsx)("source",{src:a.media_url})})}),(0,B.jsxs)("div",{className:r.trend_item_bot,children:[(0,B.jsxs)("div",{onClick:h,className:r.trend_item_bot_ex,children:[(0,B.jsxs)("div",{className:r.item_ex,children:[(0,B.jsx)("img",{className:r.item_ex_icon,src:s.Z.heartBoldBlack,alt:""}),(0,B.jsx)("span",{className:r.item_ex_text,children:null===(t=a.tiktok)||void 0===t?void 0:t.digg_count})]}),(0,B.jsxs)("div",{className:r.item_ex,children:[(0,B.jsx)("img",{className:r.item_ex_icon,src:s.Z.commentBoldBlack,alt:""}),(0,B.jsx)("span",{className:r.item_ex_text,children:null===(n=a.tiktok)||void 0===n?void 0:n.comment_count})]}),(0,B.jsxs)("div",{className:r.item_ex,children:[(0,B.jsx)("img",{className:r.item_ex_icon,src:s.Z.shareBoldBlack,alt:""}),(0,B.jsx)("span",{className:r.item_ex_text,children:null===(i=a.tiktok)||void 0===i?void 0:i.share_count})]})]}),(0,B.jsx)("p",{className:r.trend_item_desc,children:a.content}),(0,B.jsxs)("div",{className:r.trend_item_bot_org,children:[(0,B.jsx)("div",{className:r.trend_item_bot_org_img,children:(0,B.jsx)("img",{src:a.organization_image,alt:""})}),(0,B.jsx)("span",{className:r.trend_item_bot_org_name,children:a.organization_name})]})]})]})})}}}]);
//# sourceMappingURL=733.83a3d73e.chunk.js.map