"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[884],{17884:function(e,i,s){s.r(i),s.d(i,{default:function(){return D}});var a=s(71637),t=s(20030),n=s(20181),l=s(75012),d=s(72791),r=s(25500),c=s(32470),o=s(19598);const _=[{path:"service",type:"SERVICE",api:"services",params:{include:"category|favorites_count",append:"is_favorite|rating|bought_count"}},{path:"product",type:"PRODUCT",api:"products",params:{append:"is_favorite|rating",include:"category|favorites_count"}}];const u=e=>{const i=(0,o.k6)(),{response:s,error:a}=(0,n.YE)(`${c.Z.DISCOUNTS_ID(e.id)}`,e.id,{append:"user_available_purchase_count"});return(0,d.useEffect)((()=>{a&&i.replace("/error")}),[a]),s},m=(e,i)=>{const s=(0,o.k6)(),{response:a,error:t}=(0,n.YE)(`/organizations/${e.org_id}/${null===i||void 0===i?void 0:i.api}/${e.item_id}`,e.org_id&&e.item_id&&i,null===i||void 0===i?void 0:i.params);return(0,d.useEffect)((()=>{t&&s.replace("/error")}),[t]),a},v=e=>{const i=(0,o.k6)(),s=(0,r.x)(),{response:a,error:t}=(0,n.YE)(`${c.Z.ORG(e.org_id)}`,e.org_id,{"filter[location]":s});return(0,d.useEffect)((()=>{t&&i.replace("/error")}),[t]),a};var p=s(58564),h=s(10266),x=s(30748),j=s(73974),Z=s(95717),g=s(96755),N=s(71269),C=s(93080),y=s(24483),E=s(3413),b=s(11792),R=s(16030),I=s(47693),P=s(52467),f=s(47107),k=s(3859),S=s(80527),T=s(37683),A=s(80184);var D=function(){var e,i,s,r,c;const j=(0,n.oG)(),{detail:R,org:I,discount:P,typeItemProps:f}=function(){const e=(0,o.k6)(),i=(0,n.RA)(),s=_.find((e=>e.path===i[0])),a={id:parseInt(i[2]),org_id:parseInt(i[1]),item_id:parseInt(i[3])};let t=!1;s||(t=!0),(0,d.useEffect)((()=>{t&&e.replace("/error")}),[]);const l=u(a),r=m(a,s);return{discount:l,org:v(a),detail:r,typeItemProps:s}}(),k=(0,o.TH)(),S=(0,o.k6)();let T=null===P||void 0===P?void 0:P.discount_value;var D;"PRODUCT"===(null===P||void 0===P?void 0:P.discount_type)&&(T=null!==(D=null===R||void 0===R?void 0:R.price)&&void 0!==D?D:(null===R||void 0===R?void 0:R.retail_price)-(null===P||void 0===P?void 0:P.discount_value));const L={name:null!==(e=null!==(i=null===R||void 0===R?void 0:R.service_name)&&void 0!==i?i:null===R||void 0===R?void 0:R.product_name)&&void 0!==e?e:"",type:null!==(s=null===f||void 0===f?void 0:f.type)&&void 0!==s?s:"SERVICE",SPECIAL_PRICE:T,PRICE:null!==(r=null===R||void 0===R?void 0:R.price)&&void 0!==r?r:null===R||void 0===R?void 0:R.retail_price,...R},$=Math.ceil(100-L.SPECIAL_PRICE/L.PRICE*100),{favoriteSt:q,onToggleFavorite:U}=(0,n.s4)({id:L.id,org_id:null===I||void 0===I?void 0:I.id,type:"SERVICE"===(null===f||void 0===f?void 0:f.type)?"SERVICE":"PRODUCT",count:L.favorites_count,favorite:L.is_favorite});return R&&I&&P?(0,A.jsxs)(A.Fragment,{children:[j?(0,A.jsx)(l.Z,{onBackFunc:()=>S.goBack(),org:I}):(0,A.jsx)(t.Z,{title:L.name}),(0,A.jsx)(h.Z,{children:(0,A.jsxs)("div",{className:p.Z.wrapper,children:[(0,A.jsx)("div",{className:p.Z.container,children:(0,A.jsxs)("div",{className:p.Z.container_head,children:[(0,A.jsxs)("div",{className:p.Z.container_head_left,children:[(0,A.jsx)("div",{className:p.Z.container_head_img_slide,children:(0,A.jsxs)(Z.Z,{dots:!1,arrows:!1,speed:900,slidesToShow:1,slidesToScroll:1,swipe:!0,className:p.Z.slide,children:[L.video_url&&(0,A.jsxs)("div",{className:p.Z.media_item_video,children:[(0,A.jsx)("video",{className:p.Z.media_item_bg,src:L.video_url}),(0,A.jsx)("video",{className:p.Z.video_container,loop:!0,controls:!0,"webkit-playsinline":"webkit-playsinline",playsInline:!0,children:(0,A.jsx)("source",{src:L.video_url})})]}),[L.image_url].map((e=>(0,A.jsx)("div",{style:j?{height:"414px"}:{},className:p.Z.media_item_img,children:(0,A.jsx)("img",{src:null!==e&&void 0!==e?e:I.image_url,onError:e=>(0,g.bW)(e),alt:""})},e)))]})}),(0,A.jsx)("div",{className:p.Z.container_head_img_thumb,children:!j&&(0,A.jsx)(y.d4,{url:k.pathname})})]}),(0,A.jsxs)("div",{className:p.Z.container_head_right,children:[(0,A.jsxs)("div",{children:[L.category&&(0,A.jsxs)("div",{className:p.Z.detail_cate,children:["Lo\u1ea1i: ",(0,A.jsx)("span",{onClick:()=>{var e;null!==I&&void 0!==I&&I.id&&S.push(`/cua-hang/${I.subdomain}/dich-vu?cate_id=${null===(e=L.category)||void 0===e?void 0:e.id}`)},children:null===(c=L.category)||void 0===c?void 0:c.name})]}),(0,A.jsx)("span",{className:p.Z.detail_name,children:L.name}),(0,A.jsx)("div",{className:p.Z.duration,children:L.duration>0&&(0,A.jsxs)("div",{className:p.Z.duration_item,children:[(0,A.jsx)("img",{src:C.Z.clockGray,className:p.Z.duration_item_icon,alt:""}),(0,A.jsxs)("span",{className:p.Z.duration_item_text,children:[L.duration," ph\xfat"]})]})}),(0,A.jsxs)("div",{className:p.Z.detail_buy,children:[(0,A.jsxs)("div",{className:p.Z.detail_price,children:[(0,A.jsxs)("div",{className:p.Z.detail_price_left,children:[L.SPECIAL_PRICE>0&&(0,A.jsxs)("span",{className:p.Z.price_percent,children:["-",$,"%"]}),(0,A.jsxs)("div",{className:p.Z.price,children:[L.SPECIAL_PRICE>0&&(0,A.jsxs)("span",{children:[(0,N.Z)(L.SPECIAL_PRICE),"\u0111"]}),(0,A.jsxs)("span",{children:[(0,N.Z)(L.PRICE),"\u0111"]})]})]}),(0,A.jsx)("div",{className:p.Z.detail_price_right,children:(0,A.jsx)(y.Rb,{className:p.Z.right_btn,icon:q.is_favorite?C.Z.heart:C.Z.unHeart,iconSize:20,onClick:U})})]}),(0,A.jsxs)("div",{className:p.Z.detail_rate,children:[(0,A.jsx)("div",{className:p.Z.detail_rate_item,children:(0,A.jsx)(x.Z,{name:"read-only",value:5,readOnly:!0})}),(0,A.jsxs)("div",{className:p.Z.detail_rate_item,children:[(0,A.jsx)("span",{className:p.Z.detail_rate_item_count,children:q.favorite_count}),(0,A.jsx)("img",{src:C.Z.heart,className:p.Z.detail_rate_icon,alt:""})]}),L.bought_count&&(0,A.jsx)("div",{className:p.Z.detail_rate_item,children:(0,A.jsxs)("span",{className:p.Z.detail_rate_item_count,children:[L.bought_count," \u0111\xe3 b\xe1n"]})})]})]}),!j&&(0,A.jsx)(E.hd,{org:I})]}),!j&&(0,A.jsx)(w,{discount:P,org:I,detail:L})]})]})}),(0,A.jsx)(E.TQ,{detail:L,org:I}),j&&(0,A.jsx)("div",{className:p.Z.org_card_mb,children:(0,A.jsx)(E.hd,{org:I})}),(0,A.jsx)(E.sP,{detail:L,org:I}),(0,A.jsx)("div",{className:p.Z.comment_cnt,children:(0,A.jsx)(b.Z,{org_id:null===I||void 0===I?void 0:I.id,commentable_id:L.id,commentable_type:L.type})}),j&&(0,A.jsx)(O,{PERCENT:$,discount:P,org:I,detail:L})]})}),(0,A.jsx)(y.h3,{type:"discount",id:P.id,item_id:L.id,org_id:null===I||void 0===I?void 0:I.id})]}):(0,A.jsx)(a.Z,{})};const O=e=>{let{detail:i,org:s,discount:a,PERCENT:t}=e;const[n,l]=(0,d.useState)({open:!1,type:""});return(0,A.jsxs)("div",{className:p.Z.bottom,children:[(0,A.jsx)(y.Rb,{title:"SERVICE"===i.type?"\u0110\u1eb7t h\u1eb9n ngay":"Mua ngay",onClick:()=>l({open:!0,type:"NOW"})}),(0,A.jsx)(y.Rb,{title:"Th\xeam v\xe0o gi\u1ecf h\xe0ng",onClick:()=>l({open:!0,type:"ADD_CART"})}),(0,A.jsx)(j.ZP,{anchor:"bottom",open:n.open,onClose:()=>l({open:!1,type:""}),children:(0,A.jsxs)("div",{className:p.Z.bottom_wrapper,children:[(0,A.jsxs)("div",{className:p.Z.bottom_detail,children:[(0,A.jsx)("img",{src:i.image_url,className:p.Z.bottom_detail_img,alt:""}),(0,A.jsxs)("div",{className:p.Z.bottom_detail_info,children:[(0,A.jsx)("p",{className:i.name,children:i.name}),(0,A.jsx)("div",{className:p.Z.duration,children:i.duration>0&&(0,A.jsxs)("div",{className:p.Z.duration_item,children:[(0,A.jsx)("img",{src:C.Z.clockGray,className:p.Z.duration_item_icon,alt:""}),(0,A.jsxs)("span",{className:p.Z.duration_item_text,children:[i.duration," ph\xfat"]})]})}),(0,A.jsxs)("div",{className:p.Z.detail_price_left,children:[i.SPECIAL_PRICE>0&&(0,A.jsxs)("span",{className:p.Z.price_percent,children:["-",t,"%"]}),(0,A.jsxs)("div",{className:p.Z.price,children:[i.SPECIAL_PRICE>0&&(0,A.jsxs)("span",{children:[(0,N.Z)(i.SPECIAL_PRICE),"\u0111"]}),(0,A.jsxs)("span",{children:[(0,N.Z)(i.PRICE),"\u0111"]})]})]})]})]}),(0,A.jsx)(w,{draType:n.type,org:s,detail:i,discount:a})]})})]})},w=e=>{const{discount:i,org:s,detail:a,draType:t}=e,[n,l]=(0,d.useState)(1),[r,c]=(0,d.useState)(!1),_=(0,R.I0)(),{USER:u}=(0,R.v9)((e=>e.USER)),m=(0,o.k6)(),v=(()=>{let e;switch(a.type){case"SERVICE":e=2;break;case"PRODUCT":e=1}return e})(),h=(0,P.h)(a,s,v,n,a.PRICE,i.user_available_purchase_count>0?i:null);return(0,A.jsxs)("div",{children:["PRODUCT"===i.discount_type&&n>1&&(0,A.jsx)("p",{className:p.Z.price_warning,children:"Gi\xe1 d\u1ecbch v\u1ee5 \u0111\xe3 thay \u0111\u1ed5i v\xec b\u1ea1n ch\u1ecdn nhi\u1ec1u h\u01a1n s\u1ed1 l\u01b0\u1ee3ng \u0111\u01b0\u1ee3c \xe1p d\u1ee5ng m\xe3"}),(0,A.jsxs)("div",{className:p.Z.detail_cart,children:[(0,A.jsxs)("div",{className:p.Z.detail_quantity,children:[(0,A.jsx)("span",{className:p.Z.detail_quantity_title,children:"S\u1ed1 l\u01b0\u1ee3ng"}),(0,A.jsxs)("div",{className:p.Z.detail_quantity_calc,children:[(0,A.jsx)(y.Rb,{title:"-",className:p.Z.detail_quantity_btn,onClick:()=>n>1&&l(n-1)}),(0,A.jsx)("span",{className:p.Z.quantity,children:n}),(0,A.jsx)(y.Rb,{title:"+",className:p.Z.detail_quantity_btn,onClick:()=>l(n+1)})]})]}),(0,A.jsxs)("div",{className:p.Z.add_cart,children:["SERVICE"===a.type&&(0,A.jsx)(y.Rb,{style:"NOW"===t?{display:"flex"}:{},title:"\u0110\u1eb7t h\u1eb9n ngay",className:p.Z.add_cart_btn,onClick:()=>{const e=[{service:{...a,discount:i.user_available_purchase_count>0?i:null},quantity:n}];S.ZP.ADD_CART_CLICK(h.org_id,h.id,h.price,h.quantity),(0,k.ZP)(k.Zx.ADD_TO_CART),m.push({pathname:"/dat-hen",state:{org:s,services:e,TYPE:"BOOK_NOW"}}),_((0,T.jV)())}}),(0,A.jsx)(y.Rb,{style:"ADD_CART"===t?{display:"flex"}:{},icon:C.Z.cartWhiteBold,iconSize:15,title:"Th\xeam v\xe0o gi\u1ecf h\xe0ng",className:p.Z.add_cart_btn,onClick:()=>{if(!u)return m.push("/sign-in?1");_((0,f.Z5)({...h,cart_id:parseInt(`${u.id}${h.cart_id}`),user_id:u.id})),(0,k.ZP)(k.Zx.ADD_TO_CART),S.ZP.ADD_CART_CLICK(h.org_id,h.id,h.price,h.quantity),c(!0)}})]}),(null===i||void 0===i?void 0:i.user_available_purchase_count)>0?(0,A.jsx)(I.d,{iconLabel:a.image_url,content:`\u0110\xe3 th\xeam ${a.name} v\xe0o gi\u1ecf h\xe0ng`,open:r,onClose:()=>c(!1),autoHide:!0}):(0,A.jsx)(y.uD,{open:r,onClose:()=>c(!1),status:"WARNING",title:"B\u1ea1n \u0111\xe3 h\u1ebft l\u01b0\u1ee3t mua v\u1edbi gi\xe1 khuy\u1ebfn m\u1ea1i"})]})]})}}}]);
//# sourceMappingURL=884.1e294799.chunk.js.map