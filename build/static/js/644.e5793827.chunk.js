"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[644],{94644:function(e,i,l){l.r(i),l.d(i,{default:function(){return Q}});var a=l(72791),s=l(12978),t=l(19598),n=l(2579),r=(l(85862),l(80561),l(80184));const o=()=>(0,r.jsx)("div",{className:"load-org-cnt",children:(0,r.jsx)("div",{className:"load-org-cnt__left",children:(0,r.jsx)("ul",{className:"list",children:[1,2,3,4,5,6,7,8,9,10].map((e=>(0,r.jsx)("li",{className:"list-item",children:(0,r.jsxs)("div",{className:"flex-row-sp list-item__cnt",children:[(0,r.jsx)("div",{className:"list-item__cnt-img",children:(0,r.jsx)(n.Z,{width:"100%",height:"100%"})}),(0,r.jsxs)("div",{className:"list-item__cnt-de",children:[(0,r.jsx)("span",{children:(0,r.jsx)(n.Z,{width:"100%",height:"100%"})}),(0,r.jsx)("span",{children:(0,r.jsx)(n.Z,{width:"100%",height:"100%"})}),(0,r.jsx)("span",{children:(0,r.jsx)(n.Z,{width:"100%",height:"100%"})})]})]})},e)))})})});var d=l(67401),c=l(75619),_=l(58283);function m(e){const{item:i,onMarkerClick:l}=e,a=(0,s.I0)();return(0,r.jsxs)("div",{id:`${i.id}`,onMouseEnter:()=>{a((0,c.Z9)(i))},onClick:()=>{l(i)},className:"dialog-map__item",children:[(0,r.jsx)("div",{className:"map-item__img",children:(0,r.jsx)("img",{onError:e=>(0,_.ZP)(e),src:null!==i&&void 0!==i&&i.image_url?null===i||void 0===i?void 0:i.image_url:null===i||void 0===i?void 0:i.image,alt:""})}),(0,r.jsxs)("div",{className:"map-item__content",children:[(0,r.jsx)("div",{className:"map-item__name",children:(0,r.jsx)("p",{children:null===i||void 0===i?void 0:i.name})}),(0,r.jsx)("div",{className:"map-item__address",children:(0,r.jsx)("p",{children:null!==i&&void 0!==i&&i.address?null===i||void 0===i?void 0:i.address:null===i||void 0===i?void 0:i.full_address})}),(0,r.jsxs)("div",{className:"map-item__evaluate",children:[(0,r.jsxs)("div",{className:"evaluate-item",children:[(0,r.jsx)("img",{src:d.Z.star,alt:""}),(0,r.jsx)("p",{children:"5"})]}),(0,r.jsxs)("div",{className:"evaluate-item",children:[(0,r.jsx)("img",{src:d.Z.cartCheckPurple,alt:""}),(0,r.jsx)("p",{children:"10"})]})]})]})]})}var g=l(14771),u=l(95717),v=l(17330),p=l(64060),h=l(73974),x=l(84191),j=l(76012),N=l(32470),f=l(7383),b=l(25500),k=l(74877),y=l(68915),w={org_detail_cnt:"map_org_detail_cnt__x2pEI",org_detail_head:"map_org_detail_head__0xEWe",org_detail_head_btn:"map_org_detail_head_btn__SgFMr",org_detail:"map_org_detail__BRJVg",org_detail_banners:"map_org_detail_banners__F7Vhx",org_banner_linear:"map_org_banner_linear__m2-Bs",org_banner_img:"map_org_banner_img__7QWjH",org_banner_count:"map_org_banner_count__quYof",org_detail_card:"map_org_detail_card__j9xpp",org_detail_avatar:"map_org_detail_avatar__fWp64",org_detail_info:"map_org_detail_info__ezrj4",org_name:"map_org_name__yFe5r",org_address:"map_org_address__JTt49",org_exc:"map_org_exc__mwdoz",org_exc_left:"map_org_exc_left__IJnNK",org_exc_item:"map_org_exc_item__XfjT9",org_exc_left_btn:"map_org_exc_left_btn__Hw0-t",org_exc_right:"map_org_exc_right__2r1Yr",org_section_title:"map_org_section_title__k4T7c",org_time_word_head_icon:"map_org_time_word_head_icon__irUSS",time_icon_ch:"map_time_icon_ch__3kEKA",org_time_word_head:"map_org_time_word_head__RXbvp",org_time_word:"map_org_time_word__BE5i5",org_time_word_body:"map_org_time_word_body__F2XmT",org_time_word_body_act:"map_org_time_word_body_act__iOlz9",org_list_time_item:"map_org_list_time_item__eHmax",time_day:"map_time_day__tyMkV",time_word:"map_time_word__MNGnC",org_galleries:"map_org_galleries__IebtR",org_galleries_list:"map_org_galleries_list__01ET4",org_gallery_item:"map_org_gallery_item__Z1UBj",org_gallery_item_img:"map_org_gallery_item_img__gw+vn",org_special_par:"map_org_special_par__4dlLs",org_special_list:"map_org_special_list__a78kd",org_special_item:"map_org_special_item__A8eis",island_marker:"map_island_marker__lIjvk",map_style_ctrl:"map_map_style_ctrl__USgQQ",style_item:"map_style_item__RdXD+"},C=l(57096);function Z(e){var i,l,s,n;const{org:o,setOpenDetail:c,openDetail:_}=e,m=(0,f.oG)(),g=(0,t.k6)(),{t:u}=(0,a.useContext)(x.I),p=(0,a.useRef)(null),h=(0,a.useRef)(null),Z=(0,a.useRef)(null),R=(0,b.x)(),M=(0,f.YE)({API_URL:N.Z.ORG(null===o||void 0===o?void 0:o.id),enable:o,params:{"filter[location]":R}}).response,T=(null!==(i=(0,f.H9)({enable:null===o||void 0===o?void 0:o.id,API_URL:N.Z.GALLERIES_ORG_ID(null===o||void 0===o?void 0:o.id),params:j.w4}).resData)&&void 0!==i?i:[]).map((e=>{var i;const l=null===e||void 0===e||null===(i=e.images)||void 0===i?void 0:i.map((e=>e.image_url));return[e.image_url].concat(l)})).flat().filter(Boolean),{favoriteSt:I,onToggleFavorite:G}=(0,f.s4)({org_id:o.id,type:"ORG",count:null===M||void 0===M?void 0:M.favorites_count,favorite:null===M||void 0===M?void 0:M.is_favorite}),O=(0,C.Rq)(o.opening_time);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:w.org_detail_cnt,children:[(0,r.jsx)("div",{className:w.org_detail_head,children:(0,r.jsx)(k.Rb,{onClick:()=>{if(!m)return c({..._,open:!1});c(!1)},className:w.org_detail_head_btn,icon:d.Z.closeBlack,iconSize:20})}),(0,r.jsxs)("div",{className:w.org_detail,children:[(0,r.jsxs)("div",{ref:p,className:w.org_detail_banners,children:[(0,r.jsx)("div",{className:w.org_banner_linear}),(0,r.jsx)("img",{className:w.org_banner_img,src:null!==(l=null!==(s=T[0])&&void 0!==s?s:null===o||void 0===o?void 0:o.image_url)&&void 0!==l?l:v.ZP.imgDefault,alt:""}),(null===T||void 0===T?void 0:T.length)>0&&(0,r.jsxs)("div",{className:w.org_banner_count,children:[null===T||void 0===T?void 0:T.length," ",u("Mer_de.galleries")]})]}),(0,r.jsxs)("div",{className:w.org_detail_card,children:[(0,r.jsx)("div",{className:w.org_detail_avatar,children:(0,r.jsx)("img",{src:null!==(n=null===o||void 0===o?void 0:o.image_url)&&void 0!==n?n:v.ZP.imgDefault,alt:""})}),(0,r.jsxs)("div",{className:w.org_detail_info,children:[(0,r.jsx)("p",{className:w.org_name,children:o.name}),(0,r.jsx)("p",{className:w.org_address,children:o.full_address}),(0,r.jsxs)("div",{className:w.org_exc,children:[(0,r.jsxs)("div",{className:w.org_exc_left,children:[(0,r.jsx)(k.Rb,{onClick:()=>{m?g.push((0,y.Hs)(o.subdomain)):window.open((0,y.Hs)(o.subdomain),"_blank","noopener,noreferrer")},className:w.org_exc_left_btn,title:u("app.details")}),(0,r.jsxs)("div",{className:w.org_exc_item,children:[(0,r.jsx)("img",{src:d.Z.heartBoldRed,alt:""}),(0,r.jsx)("span",{children:I.favorite_count})]})]}),(0,r.jsx)(k.Rb,{onClick:G,className:w.org_exc_right,icon:null!==I&&void 0!==I&&I.is_favorite?d.Z.heart:d.Z.unHeart,iconSize:16})]})]})]}),(0,r.jsxs)("div",{className:w.org_time_word,children:[(0,r.jsxs)("div",{onClick:()=>{var e,i;null===(e=h.current)||void 0===e||e.classList.toggle(w.org_time_word_body_act),null===(i=Z.current)||void 0===i||i.classList.toggle(w.time_icon_ch)},className:w.org_time_word_head,children:[(0,r.jsx)("p",{className:w.org_section_title,children:u("pr.open_time")}),(0,r.jsx)("img",{ref:Z,src:d.Z.chevronRightBlack,className:w.org_time_word_head_icon,alt:""})]}),(0,r.jsx)("div",{ref:h,className:w.org_time_word_body,children:(0,r.jsx)("ul",{className:w.org_list_time,children:O.map(((e,i)=>(0,r.jsxs)("li",{style:e.todayAct?{color:"var(--green)"}:{},className:w.org_list_time_item,children:[(0,r.jsx)("span",{className:w.time_day,children:e.day_week}),"on"===e.status?(0,r.jsxs)("div",{className:w.time_word,children:[u("se.from")," ",(0,r.jsx)("h4",{style:{marginRight:"16px"},children:e.from_time_opening})," ",u("se.to")," ",(0,r.jsx)("h4",{children:e.to_time_opening})]}):(0,r.jsx)("div",{className:w.time_word,children:"----"})]},i)))})}),(null===T||void 0===T?void 0:T.length)>0&&(0,r.jsx)(S,{images_url:T}),(0,r.jsx)(D,{org:o})]})]})]})})}const S=e=>{let{images_url:i}=e;const{t:l}=(0,a.useContext)(x.I);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:w.org_section_title,children:l("Mer_de.galleries")}),(0,r.jsx)("div",{className:w.org_galleries,children:(0,r.jsx)("ul",{className:w.org_galleries_list,children:i.map((e=>(0,r.jsx)("li",{className:w.org_gallery_item,children:(0,r.jsx)(R,{image_url:e})},e)))})})]})},R=e=>{let{image_url:i}=e;const[l,s]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{onClick:()=>s(!0),src:i,className:w.org_gallery_item_img,alt:""}),(0,r.jsx)(k.OK,{open:l,setOpen:s,src:[i]})]})},D=e=>{let{org:i}=e;const{t:l}=(0,a.useContext)(x.I),{services_special:s}=(0,C.s4)(i),{products_special:t}=(0,C.wl)(i);return(0,r.jsxs)(r.Fragment,{children:[(null===s||void 0===s?void 0:s.length)>0&&(0,r.jsxs)("div",{className:w.org_special_cnt,children:[(0,r.jsx)("p",{className:w.org_section_title,children:l("Mer_de.services")}),(0,r.jsx)("div",{className:w.org_special_par,children:(0,r.jsx)("ul",{className:w.org_special_list,children:null===s||void 0===s?void 0:s.map(((e,l)=>(0,r.jsx)("li",{className:w.org_special_item,children:(0,r.jsx)(k.IW,{item:e,org:i,type:"SERVICE"})},l)))})})]}),(null===t||void 0===t?void 0:t.length)>0&&(0,r.jsxs)("div",{className:w.org_special_cnt,children:[(0,r.jsx)("p",{className:w.org_section_title,children:l("Mer_de.products")}),(0,r.jsx)("div",{className:w.org_special_par,children:(0,r.jsx)("ul",{className:w.org_special_list,children:null===t||void 0===t?void 0:t.map(((e,l)=>(0,r.jsx)("li",{className:w.org_special_item,children:(0,r.jsx)(k.IW,{item:e,org:i,type:"PRODUCT"})},l)))})})]})]})};var M=function(e){const{open:i,setOpen:l,org:a,handleDirection:s}=e;return(0,r.jsx)(h.ZP,{open:i,onClose:()=>l(!1),anchor:"bottom",children:(0,r.jsx)("div",{className:"map map-org-de-mb-wrap",children:(0,r.jsx)(Z,{org:a,openDetail:i,setOpenDetail:l,handleDirection:s})})})};function T(e){var i;const{item:l,handleDirection:s}=e,[t,n]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M,{open:t,setOpen:n,org:l,handleDirection:s}),(0,r.jsx)("div",{onClick:()=>{n(!0)},className:"map-item__wrap",children:(0,r.jsxs)("div",{className:"map-item__mobile",children:[(0,r.jsx)("div",{className:"item-img",children:(0,r.jsx)("img",{onError:e=>(0,p.bW)(e),src:null!==l&&void 0!==l&&l.image_url?null===l||void 0===l?void 0:l.image_url:v.ZP.beautyX,alt:""})}),(0,r.jsxs)("div",{className:"item-content",children:[(0,r.jsx)("div",{className:"item-content__name",children:(0,r.jsx)("p",{children:null===l||void 0===l?void 0:l.name})}),(0,r.jsx)("div",{className:"item-content__address",children:(0,r.jsx)("p",{children:null===l||void 0===l?void 0:l.full_address})}),(0,r.jsxs)("div",{className:"item-content__evaluate",children:[(0,r.jsxs)("div",{className:"evaluate-item",children:[(0,r.jsx)("div",{className:"evaluate-item__img",children:(0,r.jsx)("img",{src:d.Z.star,alt:""})}),(0,r.jsx)("p",{children:"5"})]}),(0,r.jsxs)("div",{className:"evaluate-item",children:[(0,r.jsx)("div",{className:"evaluate-item__img",children:(0,r.jsx)("img",{src:d.Z.heart,alt:""})}),(0,r.jsx)("p",{children:null===l||void 0===l||null===(i=l.favorites)||void 0===i?void 0:i.length})]})]})]})]})})]})}var I=l(83305),G=l(763),O=l(95330),E=l(9955),F=l(31243),L=l(13239);var P=function(){return(0,r.jsx)("div",{className:"loading-cnt",children:(0,r.jsx)(L.Z,{})})},A=l(65209);var B=e=>{const{mapRef:i,onFlyTo:l,setOpenDetail:t,openDetail:n,slideRef:o}=e,{t:_}=(0,a.useContext)(x.I),m=[{id:4,title:"Spa",text:"Spa",img:v.U1.spa},{id:3,title:"Salon",text:"Salon",img:""},{id:1,title:"Nail",text:"Nail",img:v.U1.nails},{id:6,title:"clinic",text:"clinic",img:v.U1.clinic},{id:8,title:"Massage",text:"Massage",img:v.U1.massage},{id:5,title:"Th\u1ea9m m\u1ef9 vi\u1ec7n",text:_("home_2.beauty_salon"),img:v.U1.skinCare},{id:2,title:"nha khoa",text:_("home_2.dentistry"),img:v.U1.nhaKhoa}],g=(0,s.I0)(),[u,p]=(0,a.useState)([]),{getValueCenter:h,tags:j,orgsMap:N}=(0,s.v9)((e=>e.ORGS_MAP)),f=(0,a.useCallback)((0,G.debounce)((e=>{(async e=>{try{const i=await I.Z.getAll({page:1,limit:5,keyword:e,sort:"distance"});p(i.data.context.data)}catch(i){}})(e)}),1e3),[]),[b,k]=(0,a.useState)([]),[y,w]=(0,a.useState)("");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:" map-filter-cnt",children:[(0,r.jsxs)("div",{className:"map-filter-cnt__left",children:[(0,r.jsxs)("div",{className:"map-filter-cnt__input",children:[(0,r.jsx)("input",{type:"text",placeholder:"T\xecm ki\u1ebfm tr\xean b\u1ea3n \u0111\u1ed3",value:y,onChange:async e=>{var i;const l=e.target.value;w(l);const a=`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.target.value}.json?access_token=pk.eyJ1IjoidG9hbjA2MDExOTk4IiwiYSI6ImNsNnJmajVuZDBrNzEzY3BpNnB6dHpwMHAifQ.JsWqTj6D7GLSDGgNfnclXw&country=vn`,s=await F.Z.get(a);k(null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.features),f(l)}}),(0,r.jsx)("div",{className:"map-filter-cnt__input-btn",children:N.status===A.Q.LOADING?(0,r.jsx)(P,{}):(0,r.jsx)("button",{onClick:()=>w(""),children:(0,r.jsx)("img",{src:d.Z.closeBlack,alt:""})})})]}),(0,r.jsx)("div",{className:"map-filter-cnt__drop",children:(0,r.jsxs)("ul",{className:"map-filter-list-org",children:[(null===y||void 0===y?void 0:y.length)>0&&(null===b||void 0===b?void 0:b.length)>0&&(null===b||void 0===b?void 0:b.map(((e,a)=>(0,r.jsx)("li",{onClick:()=>(e=>{w(e.place_name),k([]),t({...n,open:!1,check:!1}),p([]),(null===i||void 0===i?void 0:i.current.getZoom())<15&&(null===i||void 0===i||i.current.setZoom(13));const a=e.center.reverse().join(",");l(e.center[0],e.center[1]),g((0,c.P)()),g((0,c.ty)({page:1,LatLng:a,mountNth:2,tags:j.join("|")})),setTimeout((()=>{var e;null===o||void 0===o||null===(e=o.current)||void 0===e||e.slickGoTo(0)}),500)})(e),className:"map-list-org__item",children:e.place_name},a)))),(null===u||void 0===u?void 0:u.length)>0&&(null===y||void 0===y?void 0:y.length)>0&&(null===u||void 0===u?void 0:u.map(((e,a)=>(0,r.jsx)("li",{onClick:()=>{return l((a=e).latitude,a.longitude),(null===i||void 0===i?void 0:i.current.getZoom())<15&&(null===i||void 0===i||i.current.setZoom(13)),g((0,c.P)()),g((0,c.ty)({page:1,LatLng:`${a.latitude},${a.longitude}`,mountNth:2,tags:j.join("|")})),t({...n,open:!0,check:!0}),p([]),k([]),g((0,c.Z9)(a)),g((0,O.Gv)(a.subdomain)),void setTimeout((()=>{var e;null===o||void 0===o||null===(e=o.current)||void 0===e||e.slickGoTo(0)}),500);var a},className:"map-list-org__item",children:e.name},a))))]})})]}),(0,r.jsxs)("div",{className:"flex-row-sp map-filter-cnt__right",children:[(0,r.jsxs)("div",{className:"flex-row map-filter-cnt__right-switch",children:[(0,r.jsx)(E.Z,{onChange:e=>{g((0,c._E)(e.target.checked))},checked:h,size:"small"}),"C\u1eadp nh\u1eadt khi di chuy\u1ec3n b\u1ea3n \u0111\u1ed3"]}),(0,r.jsx)("div",{className:"map-filter-cnt__right-tag",children:(0,r.jsx)("ul",{className:"flex-row map-filter-tags",children:m.map((e=>(0,r.jsx)("li",{onClick:()=>(async e=>{var l,a,s,t;const n=null===i||void 0===i||null===(l=i.current)||void 0===l||null===(a=l.getCenter())||void 0===a?void 0:a.lat,r=null===i||void 0===i||null===(s=i.current)||void 0===s||null===(t=s.getCenter())||void 0===t?void 0:t.lng;var d;g((0,c.An)(e)),g((0,c.P)()),"fulfilled"===(await g((0,c.ty)({page:1,mountNth:2,tags:j.includes(e)?j.filter((i=>i!==e)).join("|"):[...j,e].join("|"),LatLng:`${n},${r}`}))).meta.requestStatus&&(null===o||void 0===o||null===(d=o.current)||void 0===d||d.slickGoTo(0))})(e.title),className:"map-filter-tags__item",children:(0,r.jsx)("div",{style:j.includes(e.title)?{backgroundColor:"var(--purple)",color:"var(--bgWhite)"}:{},className:"map-filter-tags__item-cnt",children:e.title})},e.id)))})})]})]})})},H=l(93543),U=l(4358);var W=function(e){const{getValueCenter:i}=(0,s.v9)((e=>e.ORGS_MAP)),l=(0,s.I0)(),{handleBackCurrentUser:t,setMapStyle:n}=e,[o,_]=(0,a.useState)(i);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(H.Z,{open:o,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:1400,onClose:()=>_(!1),children:(0,r.jsxs)(U.Z,{severity:"success",sx:{width:"100%"},children:[!i&&"T\u1eaft"," c\u1eadp nh\u1eadt khi di chuy\u1ec3n b\u1ea3n \u0111\u1ed3"]})}),(0,r.jsxs)("div",{className:"map-current-user",children:[(0,r.jsx)("button",{className:"flex-row map-current-user__btn",children:(0,r.jsx)(E.Z,{size:"small",onChange:e=>{l((0,c._E)(e.target.checked)),_(!0)},checked:i})}),(0,r.jsx)("button",{onClick:async()=>{t()},className:"map-current-user__btn",children:(0,r.jsx)("img",{src:d.Z.pinMapRedGoogle,alt:""})})]}),(0,r.jsx)("div",{className:w.map_style_ctrl,children:(0,r.jsxs)("ul",{className:w.map_style_list,children:[(0,r.jsx)("li",{onClick:()=>n&&n("mapbox://styles/mapbox/streets-v12"),className:w.style_item,children:(0,r.jsx)("img",{src:d.Z.street,alt:""})}),(0,r.jsx)("li",{onClick:()=>n&&n("mapbox://styles/mapbox/satellite-streets-v12"),className:w.style_item,children:(0,r.jsx)("img",{src:d.Z.stateLlite,alt:""})})]})})]})},z=l(89681);l(43161);var J=e=>{var i,l,n,o;const _=(0,f.oG)(),[v,h]=(0,a.useState)("mapbox://styles/mapbox/streets-v12"),{orgs:x,isDetail:j}=e,N=(0,a.useRef)(null),{orgCenter:k,getValueCenter:y,tags:w}=(0,s.v9)((e=>e.ORGS_MAP)),C=(0,t.TH)(),S=(0,b.x)(),R=(0,s.v9)((e=>e.ORG.org)),D=(0,s.I0)(),M=(0,a.useRef)(),[I,E]=(0,a.useState)({open:!1,check:!1}),[F]=(0,a.useState)({lat:j?null===(i=x[0])||void 0===i?void 0:i.latitude:S?parseFloat(null===S||void 0===S?void 0:S.split(",")[0]):null===(l=x[0])||void 0===l?void 0:l.latitude,long:j?null===(n=x[0])||void 0===n?void 0:n.longitude:S?parseFloat(null===S||void 0===S?void 0:S.split(",")[1]):null===(o=x[0])||void 0===o?void 0:o.longitude}),L=(0,a.useRef)(),[P,A]=(0,a.useState)(!0),{totalItem:H,page:U}=(0,s.v9)((e=>e.ORGS_MAP.orgsMap)),J=()=>{"/ban-do"===C.pathname&&H>=15&&x.length<H&&D((0,c.ty)({page:U+1,sort:"distance",path_url:C.pathname,mountNth:2,tags:w.join("|")}))},Q=(e,i)=>{var l;e&&i&&(null===N||void 0===N||null===(l=N.current)||void 0===l||l.flyTo({center:[i,e]}))},$=e=>{var i;null===M||void 0===M||null===(i=M.current)||void 0===i||i.slickGoTo(e)},X={dots:!1,speed:500,slidesToShow:1,slidesToScroll:1,arrows:!1,centerPadding:"30px",className:"center",centerMode:!0,afterChange:function(e){var i,l;e===x.length-3&&J(),(null===N||void 0===N?void 0:N.current.getZoom())<15&&(null===N||void 0===N||N.current.setZoom(15)),Q(null===(i=x[e])||void 0===i?void 0:i.latitude,null===(l=x[e])||void 0===l?void 0:l.longitude)}},Y=(e,i)=>{(null===N||void 0===N?void 0:N.current.getZoom())<15&&(null===N||void 0===N||N.current.setZoom(15)),D((0,O.Gv)(e.subdomain)),D((0,c.Z9)(e)),_&&i&&$&&$(i),E({...I,open:!0,check:!0}),((e,i)=>{var l;e&&i&&(null===N||void 0===N||null===(l=N.current)||void 0===l||l.panTo([i,e]))})(e.latitude,e.longitude)},q=()=>{S&&(D((0,c.P)()),D((0,c.ty)({page:1,sort:"distance",mountNth:2})),Q(parseFloat(null===S||void 0===S?void 0:S.split(",")[0]),parseFloat(null===S||void 0===S?void 0:S.split(",")[1])))},K=(0,a.useCallback)((0,G.debounce)(((e,i,l)=>{105===i&&D((0,c.P)()),D((0,c.ty)({page:1,LatLng:e,mountNth:2,tags:l.join("|")}))}),500),[]),ee=()=>{var e,i,l,a;const s=null===N||void 0===N||null===(e=N.current)||void 0===e||null===(i=e.getCenter())||void 0===i?void 0:i.lat,t=null===N||void 0===N||null===(l=N.current)||void 0===l||null===(a=l.getCenter())||void 0===a?void 0:a.lng;y&&K(`${s},${t}`,x.length,w)};return(0,r.jsxs)("div",{className:"map-content",children:[(0,r.jsx)(B,{slideRef:M,mapRef:N,onFlyTo:Q,openDetail:I,setOpenDetail:E}),(0,r.jsx)(W,{handleBackCurrentUser:q,setMapStyle:h}),(0,r.jsxs)(z.ZP,{onMouseMove:ee,onTouchMove:ee,style:{width:"100vw",height:"100vh"},initialViewState:{latitude:F.lat,longitude:F.long,zoom:16},attributionControl:!0,mapboxAccessToken:"pk.eyJ1IjoidG9hbjA2MDExOTk4IiwiYSI6ImNsNnJmajVuZDBrNzEzY3BpNnB6dHpwMHAifQ.JsWqTj6D7GLSDGgNfnclXw",mapStyle:v,ref:N,children:[(0,r.jsx)(z.Pv,{position:"bottom-right",showZoom:!0,showCompass:!0}),(0,r.jsx)(z.$j,{position:"bottom-right",onGeolocate:e=>{q()}}),S&&(0,r.jsx)(z.Jx,{latitude:parseFloat(null===S||void 0===S?void 0:S.split(",")[0]),longitude:parseFloat(null===S||void 0===S?void 0:S.split(",")[1]),children:(0,r.jsx)("img",{onError:e=>(0,p.bW)(e),style:{width:"42px"},src:d.Z.pinMapRedGoogle,alt:""})}),x.map(((e,i)=>(0,r.jsx)(z.Jx,{onClick:()=>Y(e,i),latitude:e.latitude,longitude:e.longitude,children:(0,r.jsx)("div",{style:e.id===(null===k||void 0===k?void 0:k.id)?{transform:"scale(1.2)"}:{},className:"map-marker-org",children:(0,r.jsx)("img",{src:e.image_url,alt:"",className:"map-marker-org__img",onError:e=>(0,p.bW)(e)})})},i))),(0,r.jsx)(V,{})]}),(0,r.jsx)("div",{className:!0===P?"dialog-map__wrapper list-org__active ":"dialog-map__wrapper",ref:L,children:(0,r.jsxs)("div",{className:"dialog-wrap__list",children:[(0,r.jsx)("div",{id:"scrollableDiv",className:"dialog-map__list",children:(0,r.jsx)(g.Z,{hasMore:!0,loader:(0,r.jsx)(r.Fragment,{}),next:J,dataLength:x.length,scrollableTarget:"scrollableDiv",children:null===x||void 0===x?void 0:x.map(((e,i)=>(0,r.jsx)(m,{onMarkerClick:Y,item:e},i)))})}),!0===I.open&&R?(0,r.jsx)(Z,{org:R,setOpenDetail:E,openDetail:I}):null,(0,r.jsx)("div",{onClick:()=>{L.current.classList.toggle("list-org__active"),A(!P),!1===P&&!1===I.open&&!0===I.check?E({...I,open:!0}):E({...I,open:!1}),!1===P&&!0===I.open&&!0===I.check&&E({...I,open:!0})},className:"open-list__org close",children:(0,r.jsx)("img",{src:!0===P?d.Z.arrownLeftWhite:d.Z.arrownRightWhite,alt:""})})]})}),_&&(0,r.jsx)("div",{className:j?"map-list__mobile map":"map-list__mobile",style:j?{position:"fixed",width:"auto",height:"auto",left:0,right:0}:{},children:(0,r.jsx)(u.Z,{ref:M,...X,children:x.length>0&&x.map(((e,i)=>(0,r.jsx)(T,{item:e},i)))})})]})};const V=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Jx,{latitude:16.534439,longitude:111.610783,children:(0,r.jsx)("span",{className:w.island_marker,children:"Qu\u1ea7n \u0111\u1ea3o Ho\xe0ng Sa"})}),(0,r.jsx)(z.Jx,{latitude:10.342131,longitude:114.700143,children:(0,r.jsx)("span",{className:w.island_marker,children:"Qu\u1ea7n \u0111\u1ea3o Tr\u01b0\u1eddng Sa"})})]});var Q=function(){const e=(0,s.I0)(),{orgs:i,status:l,mountNth:n}=(0,s.v9)((e=>e.ORGS_MAP.orgsMap)),_=(0,t.TH)(),m=(0,t.k6)();return(0,a.useEffect)((()=>{l!==A.Q.SUCCESS&&e((0,c.ty)({page:1,sort:"distance",path_url:_.pathname,mountNth:2}))}),[]),(0,r.jsxs)("div",{className:"map",children:[(0,r.jsx)("div",{onClick:()=>{m.push("/")},className:"dialog-map__close",children:(0,r.jsx)("div",{className:"dialog-map__close-img",children:(0,r.jsx)("img",{src:d.Z.closeCircleWhite,alt:""})})}),2===n?(0,r.jsx)(J,{orgs:i}):(0,r.jsx)(o,{})]})}},43161:function(){}}]);
//# sourceMappingURL=644.e5793827.chunk.js.map