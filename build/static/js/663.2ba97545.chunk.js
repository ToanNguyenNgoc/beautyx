"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[663],{90663:function(e,i,o){o.r(i),o.d(i,{default:function(){return K}});var n=o(72791),t=o(12978),s=o(34088),a=o(71078),l=o(96755),_={container:"booking_container__0GDtX",left:"booking_left__+P70F",left_cnt:"booking_left_cnt__9bHdk",right:"booking_right__nx7w2",section_user:"booking_section_user__9sHwz",section_org:"booking_section_org__dL7ZO",right_org:"booking_right_org__5SM3m",right_org_img:"booking_right_org_img__45pfK",right_org_name:"booking_right_org_name__FgGi5",right_branches:"booking_right_branches__5GJrD",right_branch_default:"booking_right_branch_default__7oWkM",map_icon:"booking_map_icon__bY6u9",right_icon:"booking_right_icon__Lh+ry",right_icon_ch:"booking_right_icon_ch__Q30Uo",branch_default_address:"booking_branch_default_address__xHfj0",right_org_list_branch:"booking_right_org_list_branch__f4+cB",branch_show:"booking_branch_show__m131i",branch_item:"booking_branch_item__KJtXy",branch_item_check:"booking_branch_item_check__rLDuW",branch_item_name:"booking_branch_item_name__oZA3f",service_list:"booking_service_list__E+tBI",service_item:"booking_service_item__mC0c0",service_right:"booking_service_right__9pKDC",service_name:"booking_service_name__-jNeD",service_quantity:"booking_service_quantity__7D3su",section_time:"booking_section_time__kjnDJ",section_time_left:"booking_section_time_left__QiryY",section_time_text:"booking_section_time_text__ru82T",section_time_btn:"booking_section_time_btn__L1vLZ",section_note:"booking_section_note__Hfm4t",note_textarea:"booking_note_textarea__+XvpT",section_payment:"booking_section_payment__wg6oq",section_payment_title:"booking_section_payment_title__SfBeg",section_payment_mt:"booking_section_payment_mt__Vu-lC",section_bill:"booking_section_bill__0xaR+",post_btn:"booking_post_btn__nAooh",open_voucher:"booking_open_voucher__+Kv70",open_voucher_btn:"booking_open_voucher_btn__VqKhh",booking_calc_item:"booking_booking_calc_item__p3xx4",booking_calc_item_left:"booking_booking_calc_item_left__cRilS",booking_calc_item_right:"booking_booking_calc_item_right__uUJq7",book_time_cnt:"booking_book_time_cnt__i--gQ",book_time_top:"booking_book_time_top__Jrbij",book_time_top_left:"booking_book_time_top_left__Mayd5",book_time_top_right:"booking_book_time_top_right__T8A-4",book_time_bot:"booking_book_time_bot__aF-EB",book_time_bot_btn:"booking_book_time_bot_btn__YZw1d",marker_icon:"booking_marker_icon__uD0cE",org_maker:"booking_org_maker__Zx9GA",org_maker_head:"booking_org_maker_head__nwv29",org_maker_head_img:"booking_org_maker_head_img__o59Fm",org_maker_head_de:"booking_org_maker_head_de__PhMgs",org_maker_head_name:"booking_org_maker_head_name__M4znr",org_maker_dis:"booking_org_maker_dis__wgWyF",org_maker_address:"booking_org_maker_address__j6tv3"},r=o(80184);var c=function(e){var i,o,t;const{t:s}=(0,n.useContext)(a.I),{service:c,org:d}=e;return(0,r.jsxs)("div",{className:_.service_item,children:[(0,r.jsx)("div",{className:_.right_org_img,children:(0,r.jsx)("img",{src:null!==(i=null===c||void 0===c||null===(o=c.service)||void 0===o?void 0:o.image_url)&&void 0!==i?i:null===d||void 0===d?void 0:d.image_url,onError:e=>(0,l.bW)(e),alt:""})}),(0,r.jsxs)("div",{className:_.service_right,children:[(0,r.jsx)("p",{className:_.service_name,children:null===c||void 0===c||null===(t=c.service)||void 0===t?void 0:t.service_name}),(0,r.jsxs)("p",{className:_.service_quantity,children:[s("pr.quantity"),":",null===c||void 0===c?void 0:c.quantity]})]})]})},d=o(19598),m=o(54167),v=o(4456),u=o(29818),h=o(74410),g=o(71357),b=o(3444),p=o(97892),k=o.n(p);var x=function(e){const{Time:i,onChangeItem:o,disablePrev:n,setT:t,t:s,bookTime:a}=e;let l=n;const _=a.date.split("-"),c=parseInt(`${_[2]}${_[1]}${_[0]}`),d=parseInt(k()().format("YYYYMMDD"));return c>d&&(l=!1),c===d&&parseInt(i.format("HHmm"))>=parseInt(k()().format("HHmm"))+10&&(l=!1),(0,r.jsx)("div",{onClick:()=>{!1===l&&(o(i.format("HH:mm")),t(i.format("HH:mm")))},className:"date-pk__item",children:(0,r.jsx)("div",{style:!0===l?{backgroundColor:"var(--text-hover)",color:"var(--bgWhite)",border:"1px solid transparent",cursor:"not-allowed"}:{},className:i.format("HH:mm")===s?"date-pk__item-box time-act":"date-pk__item-box",children:i.format("HH:mm")})})},j=o(93718);var f=function(e){var i,o,t,s,a,l;const{onChange:_,disablePrev:c,org:d,bookTime:m}=e,v=new Date;let u=v.getDay()+1;v.getDay()+1===1&&(u=8);const h=d&&(0,j.R)(null===d||void 0===d?void 0:d.opening_time),g=null===h||void 0===h?void 0:h.find(((e,i)=>i+2===u)),b=null!==(i=null===g||void 0===g?void 0:g.from_time_opening)&&void 0!==i?i:"",p=null!==(o=null===g||void 0===g?void 0:g.to_time_opening)&&void 0!==o?o:"",f=b.split(":"),N=p.split(":"),[y,C]=(0,n.useState)();let O=k()().set("hour",null!==(t=parseInt(f[0]))&&void 0!==t?t:8).set("minute",null!==(s=parseInt(f[1]))&&void 0!==s?s:0).set("second",0).subtract(30,"minute"),R=k()().set("hour",null!==(a=parseInt(N[0]))&&void 0!==a?a:21).set("minute",null!==(l=parseInt(N[1]))&&void 0!==l?l:0).set("second",0);const B=[];for(;O<R;)O=O.add(30,"minute"),B.push(O);return(0,r.jsx)("div",{className:"time-pk",children:B.map(((e,i)=>(0,r.jsx)(x,{bookTime:m,Time:e,onChangeItem:e=>_(e),disablePrev:c,t:y,setT:C},i)))})};var N=function(e){const{t:i}=(0,n.useContext)(a.I),{open:o,setOpen:t,bookTime:s,setBookTime:c,org:d}=e,m=(0,h.oG)();return(0,r.jsxs)(u.Z,{fullScreen:m,open:o,onClose:()=>t(!1),TransitionComponent:l.uT,children:[m&&(0,r.jsx)(b.Z,{onBack:t,title:i("my_ser.time_select")}),(0,r.jsxs)("div",{className:_.book_time_cnt,children:[(0,r.jsxs)("div",{className:_.book_time_top,children:[(0,r.jsx)("div",{className:_.book_time_top_left,children:(0,r.jsx)(g.Mt,{disablePrev:!0,onChange:e=>(e=>{c({...s,date:e,time:null})})(e)})}),(0,r.jsx)("div",{className:_.book_time_top_right,children:(0,r.jsx)(f,{bookTime:s,org:d,onChange:e=>{return i=e,void c({...s,time:i});var i},disablePrev:!0})})]}),(0,r.jsx)("div",{className:_.book_time_bot,children:(0,r.jsx)(g.Rb,{className:_.book_time_bot_btn,title:i("my_ser.confirm_time"),onClick:()=>t(!1),style:s.date&&s.time?{opacity:1}:{opacity:.4}})})]})]})},y=o(16407),C=o(763),O=o(21272),R=o(94883),B=o(71269),I=o(22546),E=o(77001);var P=function(e){var i,o,s;const{setFinalAmount:l}=e,{t:c}=(0,n.useContext)(a.I),{VOUCHER_APPLY:m}=(0,t.v9)((e=>e.carts)),{org:u}=e,b=(0,d.TH)(),[p,k]=(0,n.useState)(!1),x=null!==(i=null===(o=b.state)||void 0===o?void 0:o.services)&&void 0!==i?i:[],j=null!==(s=null===x||void 0===x?void 0:x.map((e=>e.service.id)))&&void 0!==s?s:[],f=x.map((e=>{var i;return null===e||void 0===e||null===(i=e.service)||void 0===i?void 0:i.discount})).filter(Boolean);let{total:N}=null===x||void 0===x?void 0:x.reduce(((e,i)=>{const{quantity:o,service:n}=i,t=(n.SPECIAL_PRICE>0?n.SPECIAL_PRICE:n.price)*o;return e.total+=t,e}),{total:0});const y=x.map((e=>{var i,o,n,t;return(null===(i=e.service)||void 0===i||null===(o=i.discount)||void 0===o?void 0:o.discount_type)===I.uH.FINAL_PRICE.key?(null===(n=e.service.discount)||void 0===n?void 0:n.discount_value)*e.quantity:(null===(t=e.service.discount)||void 0===t?void 0:t.discount_value)+(e.service.PRICE*e.quantity-1)})).filter(Boolean),C=y.length>0&&y.reduce(((e,i)=>e+i)),O=x.map((e=>({id:e.service.id,quantity:e.quantity}))),R=N-C,{vouchersFinal:P,totalVoucherValue:Z}=(0,h.zO)(R,m,O);return(0,n.useEffect)((()=>{let e=!0;return e&&l(R-Z),()=>{e=!1}}),[R,Z]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:_.open_voucher,children:(0,r.jsx)(g.Rb,{className:_.open_voucher_btn,onClick:()=>k(!0),title:c("pm.enter_coupon_code"),iconSize:16,icon:v.Z.cardDiscountOrange})}),(0,r.jsxs)("div",{className:_.booking_cnt_bot_bill,children:[(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:c("cart.total_payment")}),(0,r.jsxs)("span",{className:_.booking_calc_item_right,children:[(0,B.Z)(N),"\u0111"]})]}),(null===y||void 0===y?void 0:y.length)>0&&(null===y||void 0===y?void 0:y.map(((e,i)=>(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:c("pm.discounts")}),(0,r.jsxs)("span",{className:_.booking_calc_item_right,children:["-",(0,B.Z)(e),"\u0111"]})]},i)))),P.map(((e,i)=>(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:e.title}),(0,r.jsxs)("span",{style:{color:"var(--text-orange)"},className:_.booking_calc_item_right,children:["-",(0,B.Z)(e.discount_value),"\u0111"]})]},i))),(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:c("pm.pay")}),(0,r.jsxs)("span",{style:{fontWeight:"700"},className:_.booking_calc_item_right,children:[(0,B.Z)(R-Z),"\u0111"]})]})]}),(0,r.jsx)(E.I,{outDiscounts:f,open:p,setOpen:k,services_id:j,products_id:[],organization:u,cartAmount:R})]})},Z=o(52467),w=o(63945),D=o(10266),H=o(83898),T=o(89137),S=o(84931),A=o(2589),F=o(94384),M=o(32470),Y=o(89681),q=(o(43161),o(25500));var L=function(e){var i,o;const{org:n,onChooseBranch:t,mapRef:s}=e,a=(0,q.x)(),c=a&&parseFloat(null===a||void 0===a?void 0:a.split(",")[0]),d=a&&parseFloat(null===a||void 0===a?void 0:a.split(",")[1]);return(0,r.jsxs)(Y.ZP,{style:{width:"100%",height:"100vh"},initialViewState:{latitude:n.latitude,longitude:n.longitude,zoom:12},attributionControl:!0,mapboxAccessToken:"pk.eyJ1IjoidG9hbjA2MDExOTk4IiwiYSI6ImNsNnJmajVuZDBrNzEzY3BpNnB6dHpwMHAifQ.JsWqTj6D7GLSDGgNfnclXw",mapStyle:"mapbox://styles/mapbox/streets-v10",ref:s,children:[(0,r.jsx)(Y.Pv,{position:"top-right",showZoom:!0,showCompass:!0}),c&&d&&(0,r.jsx)(Y.Jx,{latitude:c,longitude:d,children:(0,r.jsx)("img",{src:v.Z.pinMapRed,alt:"",className:_.marker_icon})}),(0,r.jsx)(Y.Jx,{latitude:n.latitude,longitude:n.longitude,children:(0,r.jsxs)("div",{onClick:()=>t(null),className:_.org_maker,children:[(0,r.jsxs)("div",{className:_.org_maker_head,children:[(0,r.jsx)("div",{className:_.org_maker_head_img,children:(0,r.jsx)("img",{src:null!==(i=null===n||void 0===n?void 0:n.image_url)&&void 0!==i?i:F.ZP.imgDefault,onError:e=>(0,l.bW)(e),alt:""})}),(0,r.jsxs)("div",{className:_.org_maker_head_de,children:[(0,r.jsx)("span",{className:_.org_maker_head_name,children:n.name}),n.distance&&(0,r.jsxs)("div",{className:_.org_maker_dis,children:[(0,r.jsx)("span",{}),(0,r.jsx)("h4",{children:(0,l.Bb)(n.distance)})]})]})]}),(0,r.jsx)("div",{className:_.org_maker_address,children:null===n||void 0===n?void 0:n.address})]})}),null===(o=n.branches)||void 0===o?void 0:o.map(((e,i)=>{var o;return(0,r.jsx)(Y.Jx,{latitude:e.latitude,longitude:e.longitude,children:(0,r.jsxs)("div",{onClick:()=>t(e),className:_.org_maker,children:[(0,r.jsxs)("div",{className:_.org_maker_head,children:[(0,r.jsx)("div",{className:_.org_maker_head_img,children:(0,r.jsx)("img",{src:null!==(o=null===n||void 0===n?void 0:n.image_url)&&void 0!==o?o:F.ZP.imgDefault,onError:e=>(0,l.bW)(e),alt:""})}),(0,r.jsxs)("div",{className:_.org_maker_head_de,children:[(0,r.jsx)("span",{className:_.org_maker_head_name,children:e.name}),e.distance&&(0,r.jsxs)("div",{className:_.org_maker_dis,children:[(0,r.jsx)("span",{}),(0,r.jsx)("h4",{children:(0,l.Bb)(e.distance)})]})]})]}),(0,r.jsx)("div",{className:_.org_maker_address,children:null===e||void 0===e?void 0:e.address})]})},i)}))]})},W=o(70762),V=o(76742);const G=k()(),J={content:"",open:!1,children:(0,r.jsx)(r.Fragment,{}),load:!1};var K=function(){var e,i,o,l,u,p,k,x,j,f,B,I,E,Y,K,z;const U=(0,t.I0)(),{t:$}=(0,n.useContext)(a.I),[X,Q]=(0,n.useState)(0),{SERVICES_BOOK:ee}=(0,t.v9)((e=>e)),ie=(0,q.x)(),oe=(0,h.oG)(),ne=(0,O.E)(),[te,se]=(0,n.useState)(J),{USER:ae}=(0,t.v9)((e=>e.USER)),le=(0,d.k6)(),_e=(0,d.TH)(),re=null===(e=_e.state)||void 0===e?void 0:e.TYPE,ce=(0,n.useRef)(null),de=(0,n.useRef)(null),me=(0,n.useRef)(null),ve=()=>{var e,i;null===(e=ce.current)||void 0===e||e.classList.remove(_.branch_show),null===(i=de.current)||void 0===i||i.classList.remove(_.right_icon_ch)};window.onclick=()=>ve();const ue=null===(i=(0,h.YE)(`${M.Z.ORG(null===_e||void 0===_e||null===(o=_e.state)||void 0===o||null===(l=o.org)||void 0===l?void 0:l.id)}`,null===_e||void 0===_e||null===(u=_e.state)||void 0===u||null===(p=u.org)||void 0===p?void 0:p.id,{"filter[location]":ie}))||void 0===i?void 0:i.response;(0,n.useEffect)((()=>{let e=!0;if(e)if(U((0,H.O4)()),_e.state){const e={org:_e.state.org,services:_e.state.services};U((0,m.Dt)(e))}else le.push("/home");return()=>{e=!1}}),[_e.state]);const{servicesBook:he}=ee,[ge,be]=(0,n.useState)(!1),[pe,ke]=(0,n.useState)(),[xe,je]=(0,n.useState)({date:G.format("YYYY-MM-DD"),time:null,note:"",branch_id:null}),fe=he.map((e=>{var i;return{id:null===(i=e.service)||void 0===i?void 0:i.id,quantity:e.quantity}})),Ne=e=>{var i,o,n;je({...xe,branch_id:null===e||void 0===e?void 0:e.id}),ve(),null===me||void 0===me||null===(i=me.current)||void 0===i||i.flyTo({center:[null!==(o=null===e||void 0===e?void 0:e.longitude)&&void 0!==o?o:ue.longitude,null!==(n=null===e||void 0===e?void 0:e.latitude)&&void 0!==n?n:null===ue||void 0===ue?void 0:ue.latitude]})},ye=null===he||void 0===he||null===(k=he.map((e=>null===e||void 0===e?void 0:e.service)))||void 0===k||null===(x=k.map((e=>null===e||void 0===e?void 0:e.discount)))||void 0===x||null===(j=x.map((e=>null===e||void 0===e?void 0:e.coupon_code)))||void 0===j?void 0:j.filter(Boolean),{VOUCHER_APPLY:Ce}=(0,t.v9)((e=>e.carts)),Oe=ye.concat(Ce.map((e=>e.coupon_code))).filter(Boolean),Re={products:[],services:fe,treatment_combo:[],payment_method_id:pe,coupon_code:Oe.length>0?Oe:[],description:"",branch_id:xe.branch_id},Be=null===(f=_e.state)||void 0===f||null===(B=f.services)||void 0===B?void 0:B.map((e=>{var i,o,n;const t=(null===(i=e.service)||void 0===i?void 0:i.special_price)>0?null===(o=e.service)||void 0===o?void 0:o.special_price:null===(n=e.service)||void 0===n?void 0:n.price;return(0,Z.h)(e.service,ue,"SERVICE",e.quantity,t,e.service.discount)})),Ie={note:xe.note,time_start:`${xe.date} ${xe.time}:00`,branch_id:xe.branch_id,order_id:_e.state.order_id,service_ids:null===fe||void 0===fe?void 0:fe.map((e=>null===e||void 0===e?void 0:e.id))},Ee=()=>{le.push("/lich-hen?tab=1")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.Z,{title:$("Header.booking")}),oe&&(0,r.jsx)(b.Z,{onBack:()=>{U((0,m.jV)()),le.goBack()},title:$("Header.booking")}),(0,r.jsx)(D.Z,{children:(0,r.jsxs)("div",{className:_.container,children:[!oe&&(0,r.jsx)("div",{className:_.left,children:(0,r.jsx)("div",{className:_.left_cnt,children:ue&&(0,r.jsx)(L,{mapRef:me,onChooseBranch:Ne,org:ue})})}),(0,r.jsxs)("div",{className:_.right,children:[(0,r.jsx)("div",{className:_.section_user,children:(0,r.jsx)(A.Z,{disableAddress:!0,title:$("BOOK_NOW"===re?"pm.payment_info":"pm.payment_booking")})}),(0,r.jsxs)("div",{className:_.section_org,children:[(0,r.jsxs)("div",{className:_.right_org,children:[(0,r.jsx)("div",{className:_.right_org_img,children:(0,r.jsx)("img",{src:null!==(I=null===ue||void 0===ue?void 0:ue.image_url)&&void 0!==I?I:F.ZP.imgDefault,alt:""})}),(0,r.jsx)("span",{className:_.right_org_name,children:null===ue||void 0===ue?void 0:ue.name})]}),(0,r.jsxs)("div",{className:_.right_branches,children:[(0,r.jsxs)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{var e,i;null===ce||void 0===ce||null===(e=ce.current)||void 0===e||e.classList.add(_.branch_show),null===de||void 0===de||null===(i=de.current)||void 0===i||i.classList.add(_.right_icon_ch)})()},className:_.right_branch_default,children:[(0,r.jsx)("img",{src:v.Z.pinMapGreen,alt:"",className:_.map_icon}),(0,r.jsx)("span",{className:_.branch_default_address,children:null!==(E=null===ue||void 0===ue||null===(Y=ue.branches)||void 0===Y||null===(K=Y.find((e=>e.id===xe.branch_id)))||void 0===K?void 0:K.full_address)&&void 0!==E?E:null===ue||void 0===ue?void 0:ue.full_address}),(0,r.jsx)("img",{ref:de,src:v.Z.chevronRightBlack,className:_.right_icon,alt:""})]}),(0,r.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation()},ref:ce,className:_.right_org_list_branch,children:(0,r.jsxs)("ul",{className:_.branch_list,children:[(0,r.jsxs)("li",{onClick:()=>Ne(null),className:_.branch_item,children:[(0,r.jsx)("div",{className:_.branch_item_check,children:!xe.branch_id&&(0,r.jsx)("span",{})}),(0,r.jsxs)("div",{className:_.branch_item_name,children:[(0,r.jsxs)("span",{children:[$("pm.org"),":"]}),null===ue||void 0===ue?void 0:ue.full_address]})]}),null===ue||void 0===ue||null===(z=ue.branches)||void 0===z?void 0:z.map(((e,i)=>(0,r.jsxs)("li",{onClick:()=>Ne(e),className:_.branch_item,children:[(0,r.jsx)("div",{className:_.branch_item_check,children:e.id===xe.branch_id&&(0,r.jsx)("span",{})}),(0,r.jsxs)("div",{className:_.branch_item_name,children:[(0,r.jsxs)("span",{children:[$("Mer_de.branch"),":"]}),e.full_address]})]},i)))]})})]})]}),(0,r.jsx)("div",{className:_.section_services,children:(0,r.jsx)("ul",{className:_.service_list,children:he.map(((e,i)=>(0,r.jsx)("li",{children:(0,r.jsx)(c,{org:ue,service:e})},i)))})}),(0,r.jsxs)("div",{className:_.section_time,children:[(0,r.jsxs)("div",{className:_.section_time_left,children:[(0,r.jsx)("img",{src:v.Z.clockAppGray,alt:""}),(0,r.jsx)("div",{className:_.section_time_text,children:xe.date&&xe.time?`${xe.date} ${xe.time}`:$("my_ser.pl_select_date")})]}),(0,r.jsx)(g.Rb,{className:_.section_time_btn,icon:v.Z.chevronRightBlack,iconSize:16,title:$("my_ser.time_select"),onClick:()=>be(!0)})]}),(0,r.jsx)("div",{className:_.section_note,children:(0,r.jsx)("textarea",{className:_.note_textarea,onChange:e=>je({...xe,note:e.target.value}),placeholder:$("my_ser.note_1")})}),"BOOK_NOW"===re&&(0,r.jsx)("div",{style:ne!==V.P.BEAUTYX?{display:"none"}:{},className:_.section_payment,children:(0,r.jsx)(W.Z,{onSetPaymentMethod:e=>ke(e.id)})}),(0,r.jsxs)("div",{className:_.section_bill,children:["BOOK_NOW"===re&&(0,r.jsx)(P,{org:ue,setFinalAmount:Q}),(0,r.jsx)(g.Rb,{className:_.post_btn,title:$("BOOK_NOW"===re?"my_ser.pay_and_book":"Home.Order_step_4"),loading:te.load,onClick:()=>ae?xe.time?"BOOK_NOW"===_e.state.TYPE&&X<1e3?se({...J,open:!0,content:$("my_ser.minimum_order_is_1_000_VND"),children:(0,r.jsx)(r.Fragment,{})}):ne!==R.v.MB||(0,S._)(null===ae||void 0===ae?void 0:ae.telephone)?"BOOK_NOW"===_e.state.TYPE?async function(){const e=(0,C.pickBy)(Re,C.identity);se({...J,load:!0});try{const o=await y.Z.postOrder(null===ue||void 0===ue?void 0:ue.id,e),n=await{...o.data.context,FINAL_AMOUNT:X},t=n.payment_gateway.transaction_uuid;if("CANCELED"!==o.data.context.status){var i;const e={...Ie,org_id:null===ue||void 0===ue?void 0:ue.id,order_id:o.data.context.id,quantity:null===(i=fe[0])||void 0===i?void 0:i.quantity};le.push({pathname:"/trang-thai-don-hang/",search:t,state:{state_payment:n,actionAfter:e,listPayment:Be}}),se({...J,load:!1}),"MOMO"===ne&&localStorage.setItem("APP_INFO",JSON.stringify(e))}else se({open:!0,content:$("my_ser.create_order_fail"),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Rb,{title:$("my_ser.ok"),onClick:()=>se({...te,open:!1})}),(0,r.jsx)(g.Rb,{title:$("pm.goto_home"),onClick:()=>le.push("/home")})]}),load:!1})}catch(o){console.log(o),se({open:!0,content:$("my_ser.create_order_fail"),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Rb,{title:"\u0110\xe3 hi\u1ec3u",onClick:()=>se({...te,open:!1})}),(0,r.jsx)(g.Rb,{title:$("pm.goto_home"),onClick:()=>le.push("/home")})]}),load:!1})}}():void(async()=>{se({...J,load:!0});try{await w.Z.postAppointment(Ie,null===ue||void 0===ue?void 0:ue.id),U((0,m.jV)()),se({open:!0,content:$("my_ser.bk_success"),children:(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(g.Rb,{title:$("Header.see_calendar"),onClick:Ee})}),load:!1})}catch(e){console.log(e),se({open:!0,content:$("my_ser.bk_fail_title"),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Rb,{title:$("my_ser.ok"),onClick:()=>se({...te,open:!1})}),(0,r.jsx)(g.Rb,{title:$("Header.see_calendar"),onClick:()=>le.push("/home")})]}),load:!1})}})():se({...J,open:!0,content:$("my_ser.enter_update_phone"),children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.Rb,{title:$("my_ser.update"),onClick:()=>le.push("/otp-form")}),(0,r.jsx)(g.Rb,{title:$("pm.later"),onClick:()=>se({...te,open:!1})})]})}):se({...J,open:!0,content:$("my_ser.pl_select_date"),children:(0,r.jsx)(r.Fragment,{})}):le.push("/sign-in?1")})]})]})]})}),(0,r.jsx)(N,{bookTime:xe,setBookTime:je,open:ge,setOpen:be,org:ue}),(0,r.jsx)(T.CC,{title:$("Header.noti"),content:te.content,open:te.open,children:te.children,setOpen:()=>se({...te,open:!1})})]})}},43161:function(){}}]);
//# sourceMappingURL=663.2ba97545.chunk.js.map