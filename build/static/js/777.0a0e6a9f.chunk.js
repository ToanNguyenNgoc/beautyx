"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[777],{29777:function(e,i,o){o.r(i),o.d(i,{default:function(){return Z}});var n=o(27565),t=o(48127),s=o(9469),a=o(10025),l=o(8426),_={container:"booking_container__0GDtX",left:"booking_left__+P70F",left_cnt:"booking_left_cnt__9bHdk",right:"booking_right__nx7w2",section_user:"booking_section_user__9sHwz",section_org:"booking_section_org__dL7ZO",right_org:"booking_right_org__5SM3m",right_org_img:"booking_right_org_img__45pfK",right_org_name:"booking_right_org_name__FgGi5",right_branches:"booking_right_branches__5GJrD",right_branch_default:"booking_right_branch_default__7oWkM",map_icon:"booking_map_icon__bY6u9",right_icon:"booking_right_icon__Lh+ry",right_icon_ch:"booking_right_icon_ch__Q30Uo",branch_default_address:"booking_branch_default_address__xHfj0",right_org_list_branch:"booking_right_org_list_branch__f4+cB",branch_show:"booking_branch_show__m131i",branch_item:"booking_branch_item__KJtXy",branch_item_check:"booking_branch_item_check__rLDuW",branch_item_name:"booking_branch_item_name__oZA3f",service_list:"booking_service_list__E+tBI",service_item:"booking_service_item__mC0c0",service_right:"booking_service_right__9pKDC",service_name:"booking_service_name__-jNeD",service_quantity:"booking_service_quantity__7D3su",section_time:"booking_section_time__kjnDJ",section_time_left:"booking_section_time_left__QiryY",section_time_text:"booking_section_time_text__ru82T",section_time_btn:"booking_section_time_btn__L1vLZ",section_note:"booking_section_note__Hfm4t",note_textarea:"booking_note_textarea__+XvpT",section_payment:"booking_section_payment__wg6oq",section_payment_title:"booking_section_payment_title__SfBeg",section_payment_mt:"booking_section_payment_mt__Vu-lC",section_bill:"booking_section_bill__0xaR+",post_btn:"booking_post_btn__nAooh",open_voucher:"booking_open_voucher__+Kv70",open_voucher_btn:"booking_open_voucher_btn__VqKhh",booking_cnt_bot_point:"booking_booking_cnt_bot_point__8lT6U",booking_calc_item:"booking_booking_calc_item__p3xx4",booking_calc_item_left:"booking_booking_calc_item_left__cRilS",booking_calc_item_right:"booking_booking_calc_item_right__uUJq7",book_time_cnt:"booking_book_time_cnt__i--gQ",book_time_top:"booking_book_time_top__Jrbij",book_time_top_left:"booking_book_time_top_left__Mayd5",book_time_top_right:"booking_book_time_top_right__T8A-4",book_time_bot:"booking_book_time_bot__aF-EB",book_time_bot_btn:"booking_book_time_bot_btn__YZw1d",marker_icon:"booking_marker_icon__uD0cE",org_maker:"booking_org_maker__Zx9GA",org_maker_head:"booking_org_maker_head__nwv29",org_maker_head_img:"booking_org_maker_head_img__o59Fm",org_maker_head_de:"booking_org_maker_head_de__PhMgs",org_maker_head_name:"booking_org_maker_head_name__M4znr",org_maker_dis:"booking_org_maker_dis__wgWyF",org_maker_address:"booking_org_maker_address__j6tv3"},r=o(27929);var c=function(e){var i,o,t;const{t:s}=(0,n.useContext)(a.B),{service:c,org:d}=e;return(0,r.jsxs)("div",{className:_.service_item,children:[(0,r.jsx)("div",{className:_.right_org_img,children:(0,r.jsx)("img",{src:null!==(i=null===c||void 0===c||null===(o=c.service)||void 0===o?void 0:o.image_url)&&void 0!==i?i:null===d||void 0===d?void 0:d.image_url,onError:e=>(0,l.pG)(e),alt:""})}),(0,r.jsxs)("div",{className:_.service_right,children:[(0,r.jsx)("p",{className:_.service_name,children:null===c||void 0===c||null===(t=c.service)||void 0===t?void 0:t.service_name}),(0,r.jsxs)("p",{className:_.service_quantity,children:[s("pr.quantity"),":",null===c||void 0===c?void 0:c.quantity]})]})]})},d=o(34328),m=o(76511),v=o(58672),u=o(63682),g=o(35122),h=o(89189),b=o(75068),p=o(51932),k=o.n(p);var x=function(e){const{Time:i,onChangeItem:o,disablePrev:n,setT:t,t:s,bookTime:a}=e;let l=n;const _=a.date.split("-"),c=parseInt(`${_[0]}${_[1]}${_[2]}`),d=parseInt(k()().format("YYYYMMDD"));return c>d&&(l=!1),c===d&&parseInt(i.format("HHmm"))>=parseInt(k()().format("HHmm"))+10&&(l=!1),(0,r.jsx)("div",{onClick:()=>{!1===l&&(o(i.format("HH:mm")),t(i.format("HH:mm")))},className:"date-pk__item",children:(0,r.jsx)("div",{style:!0===l?{backgroundColor:"var(--text-hover)",color:"var(--bgWhite)",border:"1px solid transparent",cursor:"not-allowed"}:{},className:i.format("HH:mm")===s?"date-pk__item-box time-act":"date-pk__item-box",children:i.format("HH:mm")})})},j=o(60817);var f=function(e){var i,o;const{onChange:t,disablePrev:s,org:a,bookTime:l}=e,_=new Date;let c=_.getDay()+1;_.getDay()+1===1&&(c=8);const d=a&&(0,j.HB)(null===a||void 0===a?void 0:a.opening_time),m=null===d||void 0===d?void 0:d.find(((e,i)=>i+2===c)),v=null!==(i=null===m||void 0===m?void 0:m.from_time_opening)&&void 0!==i?i:"",u=null!==(o=null===m||void 0===m?void 0:m.to_time_opening)&&void 0!==o?o:"",g=v.split(":").filter(Boolean),h=u.split(":").filter(Boolean),[b,p]=(0,n.useState)();let f=k()().set("hour",g.length>0?parseInt(g[0]):8).set("minute",g.length>0?parseInt(g[1]):0).set("second",0).subtract(30,"minute"),N=k()().set("hour",g.length>0?parseInt(h[0]):21).set("minute",h.length>0?parseInt(h[1]):0).set("second",0);const y=[];for(;f<N;)f=f.add(30,"minute"),y.push(f);return(0,r.jsx)("div",{className:"time-pk",children:y.map(((e,i)=>(0,r.jsx)(x,{bookTime:l,Time:e,onChangeItem:e=>t(e),disablePrev:s,t:b,setT:p},i)))})};var N=function(e){const{t:i}=(0,n.useContext)(a.B),{open:o,setOpen:t,bookTime:s,setBookTime:c,org:d}=e,m=(0,g.c9)();return(0,r.jsxs)(u.A,{fullScreen:m,open:o,onClose:()=>t(!1),TransitionComponent:l.eB,children:[m&&(0,r.jsx)(b.A,{onBack:t,title:i("my_ser.time_select")}),(0,r.jsxs)("div",{className:_.book_time_cnt,children:[(0,r.jsxs)("div",{className:_.book_time_top,children:[(0,r.jsx)("div",{className:_.book_time_top_left,children:(0,r.jsx)(h.lr,{disablePrev:!0,onChange:e=>(e=>{c({...s,date:e,time:null})})(e)})}),(0,r.jsx)("div",{className:_.book_time_top_right,children:(0,r.jsx)(f,{bookTime:s,org:d,onChange:e=>{return i=e,void c({...s,time:i});var i},disablePrev:!0})})]}),(0,r.jsx)("div",{className:_.book_time_bot,children:(0,r.jsx)(h.b2,{className:_.book_time_bot_btn,title:i("my_ser.confirm_time"),onClick:()=>t(!1),style:s.date&&s.time?{opacity:1}:{opacity:.4}})})]})]})},y=o(91545),A=o(84702),C=o(15762),O=o(49606),w=o(81352),B=o(16305),E=o(36418);var P=function(e){var i,o,s;const{setFinalAmount:l,point:c=0,setPoint:m}=e,{t:u}=(0,n.useContext)(a.B),{VOUCHER_APPLY:b}=(0,t.d4)((e=>e.carts)),{org:p}=e,k=(0,d.zy)(),[x,j]=(0,n.useState)(!1),f=null!==(i=null===(o=k.state)||void 0===o?void 0:o.services)&&void 0!==i?i:[],N=null!==(s=null===f||void 0===f?void 0:f.map((e=>e.service.id)))&&void 0!==s?s:[],y=f.map((e=>{var i;return null===e||void 0===e||null===(i=e.service)||void 0===i?void 0:i.discount})).filter(Boolean);let{total:A}=null===f||void 0===f?void 0:f.reduce(((e,i)=>{const{quantity:o,service:n}=i,t=(n.SPECIAL_PRICE>0?n.SPECIAL_PRICE:n.price)*o;return e.total+=t,e}),{total:0});const C=f.map((e=>{var i,o,n,t;return(null===(i=e.service)||void 0===i||null===(o=i.discount)||void 0===o?void 0:o.discount_type)===B.b.FINAL_PRICE.key?(null===(n=e.service.discount)||void 0===n?void 0:n.discount_value)*e.quantity:(null===(t=e.service.discount)||void 0===t?void 0:t.discount_value)+(e.service.PRICE*e.quantity-1)})).filter(Boolean),O=C.length>0&&C.reduce(((e,i)=>e+i)),P=f.map((e=>({id:e.service.id,quantity:e.quantity}))),T=A-O,{vouchersFinal:I,totalVoucherValue:H}=(0,g.uZ)(T,b,P);let D=T-H;return c>0&&(D-=c),(0,n.useEffect)((()=>{let e=!0;return e&&l(D),()=>{e=!1}}),[T,H,c]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:_.open_voucher,children:(0,r.jsx)(h.b2,{className:_.open_voucher_btn,onClick:()=>j(!0),title:u("pm.enter_coupon_code"),iconSize:16,icon:v.A.cardDiscountOrange})}),(0,r.jsx)(h.hK,{className:_.booking_cnt_bot_point,totalOrigin:T-H,valuePoint:c,onChangePoint:e=>m(Number(e))}),(0,r.jsxs)("div",{className:_.booking_cnt_bot_bill,children:[(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:u("cart.total_payment")}),(0,r.jsxs)("span",{className:_.booking_calc_item_right,children:[(0,w.A)(A),"\u0111"]})]}),(null===C||void 0===C?void 0:C.length)>0&&(null===C||void 0===C?void 0:C.map(((e,i)=>(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:u("pm.discounts")}),(0,r.jsxs)("span",{className:_.booking_calc_item_right,children:["-",(0,w.A)(e),"\u0111"]})]},i)))),I.map(((e,i)=>(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:e.title}),(0,r.jsxs)("span",{style:{color:"var(--text-orange)"},className:_.booking_calc_item_right,children:["-",(0,w.A)(e.discount_value),"\u0111"]})]},i))),c>0&&(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:"Ti\u1ebft ki\u1ec7m"}),(0,r.jsxs)("span",{className:_.booking_calc_item_right,children:["-",(0,w.A)(c),"\u0111"]})]}),(0,r.jsxs)("div",{className:_.booking_calc_item,children:[(0,r.jsx)("span",{className:_.booking_calc_item_left,children:u("pm.pay")}),(0,r.jsxs)("span",{style:{fontWeight:"700"},className:_.booking_calc_item_right,children:[(0,w.A)(D),"\u0111"]})]})]}),(0,r.jsx)(E.V,{outDiscounts:y,open:x,setOpen:j,services_id:N,products_id:[],organization:p,cartAmount:T})]})},T=o(26467),I=o(16652),H=o(61450),D=o(97994),S=o(15985),L=o(63593),R=o(19716),M=o(3325),q=o(34262),Y=o(59457),F=(o(64887),o(74812));var V=function(e){var i,o;const{org:n,onChooseBranch:t,mapRef:s}=e,a=(0,F.Z)(),c=a&&parseFloat(null===a||void 0===a?void 0:a.split(",")[0]),d=a&&parseFloat(null===a||void 0===a?void 0:a.split(",")[1]);return(0,r.jsxs)(Y.Ay,{style:{width:"100%",height:"100%"},initialViewState:{latitude:n.latitude,longitude:n.longitude,zoom:12},attributionControl:!0,mapboxAccessToken:"pk.eyJ1IjoidG9hbjA2MDExOTk4IiwiYSI6ImNsNnJmajVuZDBrNzEzY3BpNnB6dHpwMHAifQ.JsWqTj6D7GLSDGgNfnclXw",mapStyle:"mapbox://styles/mapbox/streets-v10",ref:s,children:[(0,r.jsx)(Y.ov,{position:"top-right",showZoom:!0,showCompass:!0}),c&&d&&(0,r.jsx)(Y.pH,{latitude:c,longitude:d,children:(0,r.jsx)("img",{src:v.A.pinMapRed,alt:"",className:_.marker_icon})}),(0,r.jsx)(Y.pH,{latitude:n.latitude,longitude:n.longitude,children:(0,r.jsxs)("div",{onClick:()=>t(null),className:_.org_maker,children:[(0,r.jsxs)("div",{className:_.org_maker_head,children:[(0,r.jsx)("div",{className:_.org_maker_head_img,children:(0,r.jsx)("img",{src:null!==(i=null===n||void 0===n?void 0:n.image_url)&&void 0!==i?i:M.Ay.imgDefault,onError:e=>(0,l.pG)(e),alt:""})}),(0,r.jsxs)("div",{className:_.org_maker_head_de,children:[(0,r.jsx)("span",{className:_.org_maker_head_name,children:n.name}),n.distance&&(0,r.jsxs)("div",{className:_.org_maker_dis,children:[(0,r.jsx)("span",{}),(0,r.jsx)("h4",{children:(0,l.BO)(n.distance)})]})]})]}),(0,r.jsx)("div",{className:_.org_maker_address,children:null===n||void 0===n?void 0:n.address})]})}),null===(o=n.branches)||void 0===o?void 0:o.map(((e,i)=>{var o;return(0,r.jsx)(Y.pH,{latitude:e.latitude,longitude:e.longitude,children:(0,r.jsxs)("div",{onClick:()=>t(e),className:_.org_maker,children:[(0,r.jsxs)("div",{className:_.org_maker_head,children:[(0,r.jsx)("div",{className:_.org_maker_head_img,children:(0,r.jsx)("img",{src:null!==(o=null===n||void 0===n?void 0:n.image_url)&&void 0!==o?o:M.Ay.imgDefault,onError:e=>(0,l.pG)(e),alt:""})}),(0,r.jsxs)("div",{className:_.org_maker_head_de,children:[(0,r.jsx)("span",{className:_.org_maker_head_name,children:e.name}),e.distance&&(0,r.jsxs)("div",{className:_.org_maker_dis,children:[(0,r.jsx)("span",{}),(0,r.jsx)("h4",{children:(0,l.BO)(e.distance)})]})]})]}),(0,r.jsx)("div",{className:_.org_maker_address,children:null===e||void 0===e?void 0:e.address})]})},i)}))]})},G=o(27185),U=o(68706),K=o(2742);const W=k()();var Z=function(){var e,i,o,u,p,k,x,j,f,w,B,E,Y,Z,$,z;const J=(0,t.wA)(),{t:Q}=(0,n.useContext)(a.B),[X,ee]=(0,n.useState)(0),{SERVICES_BOOK:ie}=(0,t.d4)((e=>e)),oe=(0,F.Z)(),ne=(0,g.c9)(),{firstLoad:te,resultLoad:se,noti:ae,onCloseNoti:le}=(0,g.m4)(),_e=(0,C._)(),{USER:re}=(0,t.d4)((e=>e.USER)),ce=(0,d.W6)(),de=(0,d.zy)(),me=null===(e=de.state)||void 0===e?void 0:e.TYPE,ve=(0,n.useRef)(null),ue=(0,n.useRef)(null),ge=(0,n.useRef)(null),he=()=>{var e,i;null===(e=ve.current)||void 0===e||e.classList.remove(_.branch_show),null===(i=ue.current)||void 0===i||i.classList.remove(_.right_icon_ch)};window.onclick=()=>he();const be=null===(i=(0,g.YJ)({API_URL:`${q.A.ORG(null===de||void 0===de||null===(o=de.state)||void 0===o||null===(u=o.org)||void 0===u?void 0:u.id)}`,enable:null===de||void 0===de||null===(p=de.state)||void 0===p||null===(k=p.org)||void 0===k?void 0:k.id,params:{"filter[location]":oe}}))||void 0===i?void 0:i.response;(0,n.useEffect)((()=>{let e=!0;if(e)if(J((0,D.lL)()),de.state){const e={org:de.state.org,services:de.state.services};J((0,m.yn)(e))}else ce.push("/home");return()=>{e=!1}}),[de.state]);const{servicesBook:pe}=ie,[ke,xe]=(0,n.useState)(!1),[je,fe]=(0,n.useState)((()=>{let e=K.zH.id;return _e===U.o.VIETTEL&&(e=K.UZ.id),e})()),[Ne,ye]=(0,n.useState)(0),[Ae,Ce]=(0,n.useState)({date:W.format("YYYY-MM-DD"),time:null,note:"",branch_id:null}),Oe=pe.map((e=>{var i;return{id:null===(i=e.service)||void 0===i?void 0:i.id,quantity:e.quantity}})),we=e=>{var i,o,n;Ce({...Ae,branch_id:null===e||void 0===e?void 0:e.id}),he(),null===ge||void 0===ge||null===(i=ge.current)||void 0===i||i.flyTo({center:[null!==(o=null===e||void 0===e?void 0:e.longitude)&&void 0!==o?o:be.longitude,null!==(n=null===e||void 0===e?void 0:e.latitude)&&void 0!==n?n:null===be||void 0===be?void 0:be.latitude]})},Be=null===pe||void 0===pe||null===(x=pe.map((e=>null===e||void 0===e?void 0:e.service)))||void 0===x||null===(j=x.map((e=>null===e||void 0===e?void 0:e.discount)))||void 0===j||null===(f=j.map((e=>null===e||void 0===e?void 0:e.coupon_code)))||void 0===f?void 0:f.filter(Boolean),{VOUCHER_APPLY:Ee}=(0,t.d4)((e=>e.carts)),Pe=Be.concat(Ee.map((e=>e.coupon_code))).filter(Boolean),Te={products:[],services:Oe,treatment_combo:[],payment_method_id:je,coupon_code:Pe.length>0?Pe:[],description:"",branch_id:Ae.branch_id},Ie=null===(w=de.state)||void 0===w||null===(B=w.services)||void 0===B?void 0:B.map((e=>{var i,o,n;const t=(null===(i=e.service)||void 0===i?void 0:i.special_price)>0?null===(o=e.service)||void 0===o?void 0:o.special_price:null===(n=e.service)||void 0===n?void 0:n.price;return(0,T.R)(e.service,be,"SERVICE",e.quantity,t,e.service.discount)})),He={note:Ae.note,time_start:`${Ae.date} ${Ae.time}:00`,branch_id:Ae.branch_id,order_id:de.state.order_id,service_ids:null===Oe||void 0===Oe?void 0:Oe.map((e=>null===e||void 0===e?void 0:e.id))};async function De(){let e=(0,A.pickBy)(Te,A.identity);if(Ne>0&&(e.point=Ne,e.payment_method_second_id=K.$1.id),X<1e3&&0===Ne)return se(Q("my_ser.minimum_order_is_1_000_VND"));if(e.payment_method_id===K.Oh.id&&X<5e3)return se("V\u1edbi ph\u01b0\u01a1ng th\u1ee9c Payon gi\xe1 tr\u1ecb \u0111\u01a1n h\xe0ng t\u1ed1i thi\u1ec3u 5.000\u0111");0===X&&Ne>0&&(e.payment_method_id=K.$1.id),te(),await y.N.onCancelPrevOrder();try{const n=await y.A.postOrder(null===be||void 0===be?void 0:be.id,e),t=await{...n.data.context,FINAL_AMOUNT:X},s=t.payment_gateway.transaction_uuid;if("CANCELED"!==n.data.context.status){var i,o;const e={...He,org_id:null===be||void 0===be?void 0:be.id,order_id:n.data.context.id,quantity:null===(i=Oe[0])||void 0===i?void 0:i.quantity};if((null===t||void 0===t||null===(o=t.payment_method)||void 0===o?void 0:o.name_key)===K.UZ.name_key)return function(e,i,o){var n,t;if(null===e||void 0===e||null===(n=e.payment_gateway)||void 0===n||null===(t=n.extra_data)||void 0===t||!t.payUrl)return se("T\u1ea1o \u0111\u01a1n h\xe0ng th\u1ea5t b\u1ea1i!");var s,a,l,_;ne?_e===U.o.VIETTEL?ce.push({pathname:"/trang-thai-don-hang/",search:e.payment_gateway.transaction_uuid,state:{state_payment:e,actionAfter:i,listPayment:o}}):window.location.assign(`${null===e||void 0===e||null===(s=e.payment_gateway)||void 0===s||null===(a=s.extra_data)||void 0===a?void 0:a.deepLink}`):window.location.assign(`${null===e||void 0===e||null===(l=e.payment_gateway)||void 0===l||null===(_=l.extra_data)||void 0===_?void 0:_.payUrl}`)}(t,e,Ie);ce.push({pathname:"/trang-thai-don-hang/",search:s,state:{state_payment:t,actionAfter:e,listPayment:Ie}}),_e!==U.o.MOMO&&_e!==U.o.VIETTEL||localStorage.setItem("APP_INFO",JSON.stringify(e))}else se(Q("my_ser.create_order_fail"));se("")}catch(n){console.log(n),se(Q("my_ser.create_order_fail"))}}const Se=()=>{ce.push("/lich-hen?tab=1")};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{title:Q("Header.booking")}),ne&&(0,r.jsx)(b.A,{onBack:()=>{J((0,m.N6)()),ce.goBack()},title:Q("Header.booking")}),(0,r.jsx)(H.A,{children:(0,r.jsxs)("div",{className:_.container,children:[!ne&&(0,r.jsx)("div",{className:_.left,children:(0,r.jsx)("div",{className:_.left_cnt,children:be&&(0,r.jsx)(V,{mapRef:ge,onChooseBranch:we,org:be})})}),(0,r.jsxs)("div",{className:_.right,children:[(0,r.jsx)("div",{className:_.section_user,children:(0,r.jsx)(R.A,{disableAddress:!0,title:Q("BOOK_NOW"===me?"pm.payment_info":"pm.payment_booking")})}),(0,r.jsxs)("div",{className:_.section_org,children:[(0,r.jsxs)("div",{className:_.right_org,children:[(0,r.jsx)("div",{className:_.right_org_img,children:(0,r.jsx)("img",{src:null!==(E=null===be||void 0===be?void 0:be.image_url)&&void 0!==E?E:M.Ay.imgDefault,alt:""})}),(0,r.jsx)("span",{className:_.right_org_name,children:null===be||void 0===be?void 0:be.name})]}),(0,r.jsxs)("div",{className:_.right_branches,children:[(0,r.jsxs)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),(()=>{var e,i;null===ve||void 0===ve||null===(e=ve.current)||void 0===e||e.classList.add(_.branch_show),null===ue||void 0===ue||null===(i=ue.current)||void 0===i||i.classList.add(_.right_icon_ch)})()},className:_.right_branch_default,children:[(0,r.jsx)("img",{src:v.A.pinMapGreen,alt:"",className:_.map_icon}),(0,r.jsx)("span",{className:_.branch_default_address,children:null!==(Y=null===be||void 0===be||null===(Z=be.branches)||void 0===Z||null===($=Z.find((e=>e.id===Ae.branch_id)))||void 0===$?void 0:$.full_address)&&void 0!==Y?Y:null===be||void 0===be?void 0:be.full_address}),(0,r.jsx)("img",{ref:ue,src:v.A.chevronRightBlack,className:_.right_icon,alt:""})]}),(0,r.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation()},ref:ve,className:_.right_org_list_branch,children:(0,r.jsxs)("ul",{className:_.branch_list,children:[(0,r.jsxs)("li",{onClick:()=>we(null),className:_.branch_item,children:[(0,r.jsx)("div",{className:_.branch_item_check,children:!Ae.branch_id&&(0,r.jsx)("span",{})}),(0,r.jsxs)("div",{className:_.branch_item_name,children:[(0,r.jsxs)("span",{children:[Q("pm.org"),":"]}),null===be||void 0===be?void 0:be.full_address]})]}),null===be||void 0===be||null===(z=be.branches)||void 0===z?void 0:z.map(((e,i)=>(0,r.jsxs)("li",{onClick:()=>we(e),className:_.branch_item,children:[(0,r.jsx)("div",{className:_.branch_item_check,children:e.id===Ae.branch_id&&(0,r.jsx)("span",{})}),(0,r.jsxs)("div",{className:_.branch_item_name,children:[(0,r.jsxs)("span",{children:[Q("Mer_de.branch"),":"]}),e.full_address]})]},i)))]})})]})]}),(0,r.jsx)("div",{className:_.section_services,children:(0,r.jsx)("ul",{className:_.service_list,children:pe.map(((e,i)=>(0,r.jsx)("li",{children:(0,r.jsx)(c,{org:be,service:e})},i)))})}),(0,r.jsxs)("div",{className:_.section_time,children:[(0,r.jsxs)("div",{className:_.section_time_left,children:[(0,r.jsx)("img",{src:v.A.clockAppGray,alt:""}),(0,r.jsx)("div",{className:_.section_time_text,children:Ae.date&&Ae.time?`${Ae.date} ${Ae.time}`:Q("my_ser.pl_select_date")})]}),(0,r.jsx)(h.b2,{className:_.section_time_btn,icon:v.A.chevronRightBlack,iconSize:16,title:Q("my_ser.time_select"),onClick:()=>xe(!0)})]}),(0,r.jsx)("div",{className:_.section_note,children:(0,r.jsx)("textarea",{className:_.note_textarea,onChange:e=>Ce({...Ae,note:e.target.value}),placeholder:Q("my_ser.note_1")})}),"BOOK_NOW"===me&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:_.section_payment,children:(0,r.jsx)(G.A,{onSetPaymentMethod:e=>fe(e.id)})})}),(0,r.jsxs)("div",{className:_.section_bill,children:["BOOK_NOW"===me&&(0,r.jsx)(P,{point:Ne,org:be,setFinalAmount:ee,setPoint:ye}),(0,r.jsx)(h.b2,{style:(0,l.Pk)()?{backgroundColor:"var(--purple)"}:{},className:_.post_btn,title:Q("BOOK_NOW"===me?"my_ser.pay_and_book":"Home.Order_step_4"),loading:ae.load,onClick:()=>re?Ae.time?_e!==O.O.MB||(0,L.v)(null===re||void 0===re?void 0:re.telephone)?"BOOK_NOW"===de.state.TYPE?De():void(async()=>{te();try{await I.A.postAppointment(He,null===be||void 0===be?void 0:be.id),J((0,m.N6)()),se(Q("my_ser.bk_success"),(0,r.jsx)(h.b2,{title:Q("Header.see_calendar"),onClick:Se}))}catch(e){console.log(e),se(Q("my_ser.bk_fail_title"))}})():se(Q("my_ser.enter_update_phone"),(0,r.jsx)(h.b2,{title:Q("my_ser.update"),onClick:()=>ce.push("/otp-form")})):se(Q("my_ser.pl_select_date")):ce.push("/sign-in?1")})]})]})]})}),(0,r.jsx)(N,{bookTime:Ae,setBookTime:Ce,open:ke,setOpen:xe,org:be}),(0,r.jsx)(S.M_,{title:Q("Header.noti"),content:ae.message,open:ae.openAlert,setOpen:le,children:ae.element})]})}},64887:function(){}}]);
//# sourceMappingURL=777.0a0e6a9f.chunk.js.map