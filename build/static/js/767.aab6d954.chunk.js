"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[767],{1767:function(e,t,i){i.r(t),i.d(t,{default:function(){return M}});var n=i(72791),s=i(19598),a=i(20030),l=i(3444),d=i(34088),o=i(10266),c=i(16030),r=i(2589),u=i(71269),v=i(22546),h=i(80184);var m=function(e){var t,i;const{product:n,quantity:s}=e;let a=!1;return(null===(t=n.discount)||void 0===t?void 0:t.discount_type)===v.uH.FINAL_PRICE.key&&(a=!0),(0,h.jsxs)("div",{className:"buy-now-item",children:[(0,h.jsx)("div",{className:"product-item",children:(0,h.jsx)("img",{src:n.image_url,alt:"",className:"product-item__img"})}),(0,h.jsxs)("div",{className:"product-item__detail",children:[(0,h.jsx)("span",{className:"product-item__detail-name",children:n.product_name}),(0,h.jsxs)("div",{className:"product-item__detail-total",children:[(0,h.jsxs)("span",{className:"quantity",children:["x ",s]}),(0,h.jsx)("div",{className:"price",children:a?(0,h.jsx)("span",{children:(0,u.Z)(null===(i=n.discount)||void 0===i?void 0:i.discount_value)}):(0,h.jsx)(h.Fragment,{children:n.special_price>0?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{style:{color:"var(--orange)"},children:[(0,u.Z)(n.special_price),"\u0111"]}),(0,h.jsxs)("span",{children:[(0,u.Z)(n.retail_price),"\u0111"]})]}):(0,h.jsxs)("span",{children:[(0,u.Z)(n.retail_price),"\u0111"]})})})]})]})]})},p=i(67559),x=i(94883),_=i(77481),j=i(21272),y=i(763),N=i(16407),g=i(52467),b=i(51420),f=i(80527),k=i(62631),w=i(24483),C=i(20181),E=i(3413);var M=function(){var e;const t=(0,C.oG)(),i=(0,s.TH)(),M=(0,s.k6)(),Z=(0,j.E)(),{payments_method:A}=(0,c.v9)((e=>e.PAYMENT.PAYMENT)),[T,P]=(0,n.useState)(),[O,Y]=(0,n.useState)(),{org:B,products:I}=i.state;let{total:q}=null===I||void 0===I?void 0:I.reduce(((e,t)=>{var i;const{quantity:n,product:s}=t;let a=s.special_price>0?s.special_price:s.retail_price;var l;(null===(i=s.discount)||void 0===i?void 0:i.discount_type)===v.uH.FINAL_PRICE.key&&(a=null===(l=s.discount)||void 0===l?void 0:l.discount_value);const d=a*n;return e.total+=d,e}),{total:0});const S=(0,_.f)(A,T),F=I.map((e=>({id:e.product.id,quantity:e.quantity}))),U=null===(e=i.state)||void 0===e?void 0:e.products.map((e=>{var t,i,n;const s=(null===(t=e.product)||void 0===t?void 0:t.special_price)>0?null===(i=e.product)||void 0===i?void 0:i.special_price:null===(n=e.product)||void 0===n?void 0:n.retail_price;return(0,g.h)(e.product,B,1,e.quantity,s)})),L={products:F,services:[],treatment_combo:[],payment_method_id:Z===x.v.BEAUTYX?1:S,coupon_code:[],description:"",user_address_id:null===O||void 0===O?void 0:O.id};async function R(){const e=(0,y.pickBy)(L,y.identity);try{const t=I.map((e=>({...e.product,quantity:e.quantity})));f.ZP.PAY_CONFIRM_CLICK(null===B||void 0===B?void 0:B.id,(0,k.E)(t));const i=await N.Z.postOrder(null===B||void 0===B?void 0:B.id,e),n=await i.data.context,s=await n.payment_gateway.description,a=n.payment_gateway.transaction_uuid;"CANCELED"!==i.data.context.status&&M.push({pathname:`/trang-thai-don-hang/${s}`,search:a,state:{state_payment:n,listPayment:U}})}catch(t){console.log(t)}}return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(d.Z,{title:"Chi ti\u1ebft thanh to\xe1n"}),t?(0,h.jsx)(l.Z,{title:"Chi ti\u1ebft thanh to\xe1n"}):(0,h.jsx)(a.Z,{}),(0,h.jsx)(o.Z,{children:(0,h.jsxs)("div",{className:"service-detail buy-now-cnt",children:[(0,h.jsxs)("div",{className:"flex-row-sp buy-now__user",children:[(0,h.jsx)("div",{className:"buy-now__user-left",children:(0,h.jsx)(r.Z,{onSetAddressDefault:Y})}),(0,h.jsx)("div",{className:"buy-now__user-right",children:B&&(0,h.jsx)(E.hd,{org:B})})]}),(0,h.jsxs)("div",{className:"buy-now__list",children:[(0,h.jsx)("span",{className:"title",children:"S\u1ea3n ph\u1ea9m"}),(0,h.jsx)("ul",{className:"list",children:null===I||void 0===I?void 0:I.map(((e,t)=>(0,h.jsx)("li",{children:(0,h.jsx)(m,{product:e.product,quantity:e.quantity})},t)))})]}),(0,h.jsx)("div",{style:Z===x.v.BEAUTYX&&"BOOK_NOW"===i.state.TYPE?{display:"block"}:{display:"none"},children:Z===x.v.BEAUTYX?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(b.Z,{title:"Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n"}),(0,h.jsx)("span",{style:{backgroundColor:"var(--pink-momo)",marginLeft:"12px",marginBottom:"12px",padding:"0px 8px",borderRadius:"6px",color:"var(--white)"},children:"MOMO"}),(0,h.jsx)("br",{})]}):(0,h.jsx)(p.Z,{e:T,onPaymentMethodChange:P})}),(0,h.jsx)("div",{className:"buy-now__total-cnt",children:(0,h.jsxs)("div",{className:"buy-now__total",children:[(0,h.jsxs)("div",{className:"flex-row-sp buy-now__total-bill",children:[(0,h.jsx)("span",{children:"T\u1ed5ng ti\u1ec1n"}),(0,h.jsxs)("span",{children:[(0,u.Z)(q),"\u0111"]})]}),(0,h.jsxs)("div",{className:"buy-now__total-pay",children:[(0,h.jsxs)("div",{className:"flex-row-sp amount-total",children:[(0,h.jsx)("span",{children:"T\u1ed5ng thanh to\xe1n"}),(0,h.jsxs)("span",{children:[(0,u.Z)(q),"\u0111"]})]}),(0,h.jsx)("div",{className:"amount-btn",children:(0,h.jsx)(w.Rb,{onClick:()=>{O&&(x.v.BEAUTYX,R())},title:"Thanh to\xe1n",loading:!1})})]})]})})]})})]})}},77481:function(e,t,i){i.d(t,{f:function(){return a}});var n=i(21272),s=i(94883);const a=(e,t)=>{var i,a,l;let d;switch((0,n.E)()){case s.v.BEAUTYX:d=null===t||void 0===t?void 0:t.id;break;case s.v.MOMO:d=null===(i=e.find((e=>e.name_key===s.v.MOMO)))||void 0===i?void 0:i.id;break;case s.v.TIKI:d=null===(a=e.find((e=>e.name_key===s.v.TIKI)))||void 0===a?void 0:a.id;break;case s.v.MB:d=null===(l=e.find((e=>e.name_key===s.v.MB)))||void 0===l?void 0:l.id}return d}},67559:function(e,t,i){i.d(t,{Z:function(){return h}});var n=i(72791),s=i(10765),a=i(39641),l=i(1503),d=i(51420),o=i(17983),c=i(2248),r=i(65209),u=i(16030),v=i(80184);var h=function(e){const{t:t}=(0,n.useContext)(o.I),i=(0,u.I0)(),{status:h}=(0,u.v9)((e=>e.PAYMENT.PAYMENT)),{PAYMENT_METHOD:m}=(0,u.v9)((e=>e.PAYMENT)),{e:p,onPaymentMethodChange:x}=e,[_,j]=(0,n.useState)("");(0,n.useEffect)((()=>{h!==r.Q.SUCCESS&&i((0,c.W)())}),[]);const y=(0,n.useCallback)((e=>{j(e.target.value)}),[]);return(0,v.jsxs)("div",{children:[(0,v.jsx)(d.Z,{title:t("pm.choose_payment_method")}),(0,v.jsx)(s.Z,{"aria-label":"gender",name:"controlled-radio-buttons-group",value:_,onChange:y,children:(0,v.jsx)("ul",{className:"payment-method",children:null===m||void 0===m?void 0:m.map((e=>{var t;return(0,v.jsxs)("li",{className:"flex-column",children:[(0,v.jsxs)("div",{className:"flex-row payment-method-head",children:[(0,v.jsx)(a.Z,{value:e.method,control:(0,v.jsx)(l.Z,{sx:{"&.Mui-checked":{color:"var(--purple)"}}}),label:e.title}),(0,v.jsx)("img",{src:e.img,alt:""})]}),(0,v.jsx)("div",{style:_===e.method?{display:"block"}:{display:"none"},className:"pm-method_child",children:(0,v.jsx)("ul",{children:null===(t=e.method_list)||void 0===t?void 0:t.filter((e=>"MOMO"===(null===e||void 0===e?void 0:e.name_key))).map((e=>(0,v.jsx)("li",{className:"pm-method_child-item",onClick:()=>x(e),children:(0,v.jsx)("div",{className:"pm-method_child-item_box",style:p===e?{backgroundColor:"#7161BA",color:"white"}:{backgroundColor:"",color:"#7161BA"},children:e.name_key})},e.id)))})})]},e.id)}))})})]})}},51420:function(e,t,i){i.d(t,{Z:function(){return s}});i(72791);var n=i(80184);var s=function(e){const{title:t,textAlign:i}=e;return(0,n.jsx)("div",{style:{textAlign:i},className:"section-title",children:t})}}}]);
//# sourceMappingURL=767.aab6d954.chunk.js.map