"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[341],{32341:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var i=n(23691),d=n(27565),a=n(63763),s=n(86222),_="trends_container_large__B3usY",r="trends_trend_list__b0stv",l="trends_video_item_cnt__Y04IM",c="trends_trend_list_video_thumb__fiLD0",o="trends_trend_item_head__bhL+j",m="trends_trend_item_center__LyHmS",v="trends_trend_item_body__pIhpM",u="trends_trend_item_video_thumb__QZNby",x="trends_trend_item_bot_ex__3tgm-",h="trends_trend_item_desc__kPdxa",g="trends_trend_item_bot_org__Alayd",j="trends_trend_item_bot_org_img__XSgoS",N="trends_trend_item_bot_org_name__FHDqR",p="trends_load_grid__jHB9x",b="trends_trend_detail_cnt__wZuWL",k="trends_trend_detail_btn_close__UrJ-U",A="trends_trend_item_head_org__j14Ob",f="trends_trend_item_head_name__RXuqV",y="trends_org_name__0zme9",B="trends_create_at__TG4lF",I="trends_trend_item_bot__GH2bq",z="trends_item_ex__Jx-cl",S="trends_item_ex_icon__zyDMA",C="trends_item_ex_text__FYVm1",D=n(98713),R=n(34328),T=n(30477),q=n(75068),E=n(49060),F=n(80201),L=n(21061),w=n(92577),O=n(44015),P=n(36100),M=n(63682),H=n(4086),J=n(46244),$={container:"trend-detail_container__LW5aw",video_cnt:"trend-detail_video_cnt__C1v6e",video_thumbnail:"trend-detail_video_thumbnail__rIIAf",video_box:"trend-detail_video_box__20Has",video:"trend-detail_video__UtiV1",trend_cnt:"trend-detail_trend_cnt__Bn-Sc",trend_org:"trend-detail_trend_org__X2PNr",trend_org_avatar:"trend-detail_trend_org_avatar__DzIbs",org_detail:"trend-detail_org_detail__NhzaH",org_detail_name:"trend-detail_org_detail_name__iZmAq",trend_content:"trend-detail_trend_content__u60do",trend_content_desc:"trend-detail_trend_content_desc__IHVhO",trend_content_services:"trend-detail_trend_content_services__DBIV8",service_item:"trend-detail_service_item__TfOtx",trend_interactive:"trend-detail_trend_interactive__2dpkt",interactive_item:"trend-detail_interactive_item__z49BQ",trend_cmt_cnt:"trend-detail_trend_cmt_cnt__-rylX",cmt_box:"trend-detail_cmt_box__nkfn+",comment_ctn:"trend-detail_comment_ctn__aQ5nS",comment_input_cnt:"trend-detail_comment_input_cnt__Aq9mC",comment_input_cnt_mb:"trend-detail_comment_input_cnt_mb__usxJB"},G=n(34262),U=n(67573),V=n(56204),W=n(77866),Y=n(27929);var X=function(){var e,t,n,d;const s=(0,a.c9)(),{id:_}=(0,R.g)(),{data:r}=(0,H.I)({queryKey:[L.Eo.TREND_DETAIL,_],queryFn:()=>F.A.get(`${i.A.API_NODE}/trends/${_}`,{params:{include:"services|tiktok"}}).then((e=>e.data.data.context)),enabled:!!_,staleTime:L.SJ}),l=r,c=(0,a.YJ)({API_URL:G.A.ORG((null===l||void 0===l?void 0:l.organization_id)||""),enable:!(null===l||void 0===l||!l.organization_id),dedupingInterval:0}).response,{data:o}=(0,H.I)({queryKey:[L.Eo.TREND_DETAIL_CMT,_],queryFn:()=>F.A.get(`${i.A.API_NODE}/tiktok/getCommentsByUrl`,{params:{"filter[trend]":_}}).then((e=>e.data.data.context.data)),enabled:!!_,staleTime:L.SJ}),{favoriteSt:m,onToggleFavorite:v}=(0,a.Af)({id:null===c||void 0===c?void 0:c.id,org_id:null===c||void 0===c?void 0:c.id,type:"ORG",count:null===c||void 0===c?void 0:c.favorites_count,favorite:null===c||void 0===c?void 0:c.is_favorite});return l?(0,Y.jsxs)("div",{className:$.container,children:[(0,Y.jsxs)("div",{className:$.video_cnt,children:[(0,Y.jsx)("img",{src:null===l||void 0===l?void 0:l.image_thumb,alt:"",className:$.video_thumbnail}),(0,Y.jsx)("div",{className:$.video_box,children:(0,Y.jsx)("video",{className:$.video,loop:!0,controls:!0,"webkit-playsinline":"webkit-playsinline",playsInline:!0,children:(0,Y.jsx)("source",{type:"video/mp4",src:`${null===l||void 0===l?void 0:l.media_url}#t=0.001`})})})]}),(0,Y.jsxs)("div",{className:$.trend_cnt,children:[(0,Y.jsxs)("div",{className:$.trend_cnt_info,children:[(0,Y.jsxs)("div",{className:$.trend_org,children:[(0,Y.jsx)("div",{className:$.trend_org_avatar,children:(0,Y.jsx)("img",{src:null===c||void 0===c?void 0:c.image_url,alt:""})}),(0,Y.jsx)("div",{className:$.org_detail,children:(0,Y.jsxs)(J.N_,{to:(0,T.p7)(null===c||void 0===c?void 0:c.subdomain),className:$.org_detail_name,children:[(0,Y.jsx)("span",{children:null===c||void 0===c?void 0:c.name}),(0,Y.jsx)("span",{children:(0,w.i1)(l.createdAt)})]})})]}),(0,Y.jsxs)("div",{className:$.trend_content,children:[(0,Y.jsx)("h5",{className:$.trend_content_title,children:l.title}),(0,Y.jsx)("span",{className:$.trend_content_desc,children:l.content})]}),(0,Y.jsx)("div",{className:$.trend_content_services,children:l.services.map((e=>(0,Y.jsxs)(J.N_,{className:$.service_item,to:(0,T.A2)(e.id,l.organization_id,e.service_name),children:[(0,Y.jsx)(U.A,{src:e.image_url,alt:""})," ",e.service_name]},e.id)))}),(0,Y.jsxs)("div",{className:$.trend_interactive,children:[(0,Y.jsxs)("div",{className:$.interactive_item,children:[(0,Y.jsx)(V.b2,{icon:D.A.eyeBoldBlack,iconSize:16}),(0,w.$l)(null===(e=l.tiktok)||void 0===e?void 0:e.play_count)]}),(0,Y.jsxs)("div",{className:$.interactive_item,children:[(0,Y.jsx)(V.b2,{onClick:v,icon:m.is_favorite?D.A.heartBoldRed:D.A.heartBoldBlack,iconSize:16}),(null===(t=l.tiktok)||void 0===t?void 0:t.digg_count)+m.favorite_count]}),(0,Y.jsxs)("div",{className:$.interactive_item,children:[(0,Y.jsx)(V.b2,{icon:D.A.commentBoldBlack,iconSize:16}),(null===(n=l.tiktok)||void 0===n?void 0:n.comment_count)||0]}),(0,Y.jsxs)("div",{className:$.interactive_item,children:[(0,Y.jsx)(V.b2,{icon:D.A.shareBoldBlack,iconSize:16}),(null===(d=l.tiktok)||void 0===d?void 0:d.share_count)||1]})]})]}),(0,Y.jsx)("div",{className:$.trend_cmt_cnt,children:(0,Y.jsx)("div",{className:$.cmt_box,children:(0,Y.jsx)(W.A,{commentable_type:"ORGANIZATION",commentable_id:null===c||void 0===c?void 0:c.id,org_id:null===c||void 0===c?void 0:c.id,commentsMixed:o||[],classNameCnt:s?"":$.comment_ctn,classNameInputCnt:s?$.comment_input_cnt_mb:$.comment_input_cnt,layout:"column"})})})]})]}):(0,Y.jsx)(Y.Fragment,{})},Z=n(69896);var K=function(){var e;const t=(0,R.W6)(),{t:n}=(0,d.useContext)(Z.BR),l=(0,a.c9)(),o=(0,R.g)(),{data:m,fetchNextPage:v}=(0,E.q)({queryKey:["TRENDS"],queryFn:e=>{let{pageParam:t=1}=e;return F.A.get(`${i.A.API_NODE}/trends`,{params:{page:t,limit:"10",include:"services|tiktok"}}).then((e=>e.data.data))},staleTime:L.SJ,getNextPageParam:e=>{var t;return(null===e||void 0===e||null===(t=e.context)||void 0===t?void 0:t.current_page)+1}}),u=(null===m||void 0===m||null===(e=m.pages[0])||void 0===e?void 0:e.context.total)||1,x=(null===m||void 0===m?void 0:m.pages.map((e=>e.context.data)).flat())||[];return(0,Y.jsxs)(Y.Fragment,{children:[l&&(0,Y.jsx)(q.A,{onBackFunc:()=>t.push("/homepage"),title:n("Home.review_beautyx_place")}),(0,Y.jsx)(s.A,{children:(0,Y.jsx)("div",{className:_,children:(0,Y.jsxs)(O.A,{dataLength:x.length,hasMore:!0,loader:(0,Y.jsx)(Y.Fragment,{}),next:()=>x.length<u?v():null,children:[(0,Y.jsx)("ul",{className:r,children:x.map(((e,t)=>(0,Y.jsx)("li",{className:c,children:(0,Y.jsx)(Q,{item:e})},t)))}),x.length<u&&(0,Y.jsx)(P.L3,{className:p,grid:l?1:5,item_count:l?1:10})]})})}),(0,Y.jsx)(M.A,{fullScreen:l,open:!!o.id,onClose:()=>t.goBack(),children:(0,Y.jsxs)("div",{className:b,children:[(0,Y.jsx)(V.b2,{onClick:()=>t.goBack(),className:k,icon:D.A.chevronLeftWhite,iconSize:18}),(0,Y.jsx)(X,{})]})})]})};const Q=e=>{var t,n,i;const{item:s}=e,_=(0,R.W6)(),r=(0,d.useRef)(null),c=(0,d.useRef)(null),p=(0,a.c9)(),b=()=>_.push(`/xu-huong/${s._id}`),k=(0,a.NY)({root:null,rootMargin:"0px",threshold:.3},c);(0,d.useEffect)((()=>(p&&(()=>{var e,t;k?null===(e=r.current)||void 0===e||e.play():null===(t=r.current)||void 0===t||t.pause()})(),()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.pause()})),[k]);const q=e=>{if(!p){var t,n;if(e)null===(t=r.current)||void 0===t||t.play();if(!e)null===(n=r.current)||void 0===n||n.pause()}};return(0,Y.jsx)(Y.Fragment,{children:(0,Y.jsxs)("div",{onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1),onClick:p?()=>{}:()=>b(),className:l,children:[(0,Y.jsx)("div",{ref:c,className:m}),(0,Y.jsxs)("div",{onClick:()=>{_.push((0,T.p7)(s.organization_id))},className:o,children:[(0,Y.jsx)("div",{className:A,children:(0,Y.jsx)("img",{src:s.organization_image,alt:""})}),(0,Y.jsxs)("div",{className:f,children:[(0,Y.jsx)("p",{className:y,children:s.organization_name}),(0,Y.jsx)("p",{className:B,children:(0,w.i1)(s.createdAt)})]})]}),(0,Y.jsx)("div",{className:v,children:(0,Y.jsx)("video",{ref:r,className:u,muted:!0,"webkit-playsinline":"webkit-playsinline",playsInline:!0,poster:s.image_thumb,children:(0,Y.jsx)("source",{src:s.media_url})})}),(0,Y.jsxs)("div",{className:I,children:[(0,Y.jsxs)("div",{onClick:b,className:x,children:[(0,Y.jsxs)("div",{className:z,children:[(0,Y.jsx)("img",{className:S,src:D.A.heartBoldBlack,alt:""}),(0,Y.jsx)("span",{className:C,children:null===(t=s.tiktok)||void 0===t?void 0:t.digg_count})]}),(0,Y.jsxs)("div",{className:z,children:[(0,Y.jsx)("img",{className:S,src:D.A.commentBoldBlack,alt:""}),(0,Y.jsx)("span",{className:C,children:null===(n=s.tiktok)||void 0===n?void 0:n.comment_count})]}),(0,Y.jsxs)("div",{className:z,children:[(0,Y.jsx)("img",{className:S,src:D.A.shareBoldBlack,alt:""}),(0,Y.jsx)("span",{className:C,children:null===(i=s.tiktok)||void 0===i?void 0:i.share_count})]})]}),(0,Y.jsx)("p",{className:h,children:s.content}),(0,Y.jsxs)("div",{className:g,children:[(0,Y.jsx)("div",{className:j,children:(0,Y.jsx)("img",{src:s.organization_image,alt:""})}),(0,Y.jsx)("span",{className:N,children:s.organization_name})]})]})]})})}}}]);
//# sourceMappingURL=341.3976aa9d.chunk.js.map