"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[674],{24557:function(e,n,s){var o=s(72791),r=s(79265),a=s(81724),t=s(19598),i=s(17983),c=s(93080),l=s(80184);n.Z=function(e){const{t:n}=(0,o.useContext)(i.I),{handlePostTelephone:s,title:d,load:p,isDialog:h,setActiveTabSign:f,prevUrl:m}=e,_=(0,t.k6)(),u=(0,r.TA)({initialValues:{telephone:""},validationSchema:a.Ry({telephone:a.Z_().required(n("form.please_enter_your_phone"))}),onSubmit:e=>{e={...e,telephone:e.telephone.cleanString()},s(e.telephone,!0)}});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{id:"recaptcha-container"}),(0,l.jsxs)("div",{className:"flex-row-sp for-pass-cnt__phone-head",children:[!h&&(0,l.jsx)("button",{onClick:()=>f?f(1):m?_.replace(m):void _.goBack(),children:(0,l.jsx)("img",{src:c.Z.chevronLeft,alt:""})}),(0,l.jsx)("span",{children:d||n("form.reset_password")}),(0,l.jsx)("div",{})]}),(0,l.jsxs)("form",{autoComplete:"off",className:"flex-column for-pass-phone",onSubmit:u.handleSubmit,children:[(0,l.jsx)("input",{name:"telephone",value:u.values.telephone,onChange:u.handleChange,type:"text",className:"for-pass-cnt__phone-ip",placeholder:n("pm.phone_number"),autoFocus:!0}),u.errors.telephone&&u.touched.telephone&&(0,l.jsx)("span",{className:"for-pass-cnt__phone-err",children:u.errors.telephone}),(0,l.jsx)("button",{className:"for-pass-cnt__btn",type:"submit",children:n(p?"form.sending":"form.continue")})]})]})}},6674:function(e,n,s){s.r(n),s.d(n,{default:function(){return g},formatTelephone:function(){return j}});var o=s(72791),r=s(10266),a=(s(15993),s(24557)),t=s(79265),i=s(81724),c=s(15465),l=s(29818),d=s(19598),p=s(80184);var h=function(e){const{errorCode:n,setErrorCode:s}=e,o=(0,d.k6)(),r=()=>{o.replace({pathname:"/sign-in",search:"1"})};return(0,p.jsx)(l.Z,{open:n.open,onClose:()=>s({...n,open:!1}),children:(0,p.jsxs)("div",{className:"flex-column dia-no-cnt",children:[(0,p.jsx)("span",{className:"dia-no-cnt__head",children:"Th\xf4ng b\xe1o"}),(()=>{switch(n.code){case 200:return(0,p.jsx)("div",{children:(0,p.jsxs)("div",{className:"flex-column for-er-no",children:["Trang web s\u1ebd \u0111\u01b0a b\u1ea1n v\u1ec1 trang \u0111\u0103ng nh\u1eadp",(0,p.jsx)("span",{onClick:r,children:"Tr\u1edf v\u1ec1 \u0111\u0103ng nh\u1eadp"})]})});case 400:return(0,p.jsx)("div",{className:"for-er-no",children:n.title})}})()]})})},f=s(93080),m=s(13239),_=s(17983);var u=function(e){const{t:n}=(0,o.useContext)(_.I),{data:s,handlePostTelephone:r,setStep:a}=e,[l,d]=(0,o.useState)({code:0,open:!1,title:"",loading:!1}),[u,x]=(0,o.useState)(90);(0,o.useEffect)((()=>{const e=setInterval((()=>{u>0&&x((e=>e-1))}),1e3);return()=>clearInterval(e)}),[u]);const v=(0,t.TA)({initialValues:{otp:"",new_password:"",confirm_password:""},validationSchema:i.Ry({otp:i.Z_().required(n("form.please_enter_your_verification_code")).matches(/^[0-9]+$/,n("form.verification_invalid")).min(6,n("form.verification_code_of_6_characters")).max(6,n("form.verification_code_of_6_characters")),new_password:i.Z_().min(8,n("form.password_min")).max(32,n("form.password_max")).required(n("Home.Sign_val_password")),confirm_password:i.Z_().required(n("form.please_confirm_password")).oneOf([i.iH("new_password"),null],n("form.password_confirm_invalid"))}),onSubmit:e=>{(async e=>{var s,o,r;d({...l,loading:!0});try{await c.Z.forgotPassword(e),d({code:200,open:!0,title:n("form.change_password_successfully"),loading:!1})}catch(a){const e=a;switch(null===(s=e.response)||void 0===s?void 0:s.status){case 400:return d({open:!0,code:null===(o=e.response)||void 0===o?void 0:o.status,title:"M\xe3 x\xe1c th\u1ef1c kh\xf4ng ch\xednh x\xe1c",loading:!1});case 501:return d({open:!0,code:null===(r=e.response)||void 0===r?void 0:r.status,title:"M\xe3 x\xe1c th\u1ef1c kh\xf4ng ch\xednh x\xe1c",loading:!1})}}})({telephone:`${s.telephone}`,code:e.otp,new_password:e.new_password,verification_id:s.verification_id})}});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h,{errorCode:l,setErrorCode:d}),(0,p.jsx)("div",{id:"recaptcha-container"}),(0,p.jsxs)("div",{className:"flex-row-sp for-pass-cnt__phone-head",children:[(0,p.jsx)("button",{onClick:()=>a(1),children:(0,p.jsx)("img",{src:f.Z.chevronLeft,alt:""})}),(0,p.jsx)("span",{children:n("form.reset_password")}),(0,p.jsx)("div",{})]}),(0,p.jsxs)("div",{className:"flex-column for-pass-cnt__phone-noti",children:[(0,p.jsx)("span",{children:n("form.send_your_code_text")}),(0,p.jsx)("span",{children:s.telephone}),(0,p.jsxs)("form",{autoComplete:"off",className:"flex-column for-pass-phone",onSubmit:v.handleSubmit,children:[(0,p.jsx)("input",{name:"otp",value:v.values.otp,onChange:v.handleChange,type:"number",pattern:"[0-9]*",inputMode:"numeric",style:{textAlign:"center"},className:"for-pass-cnt__phone-ip",placeholder:n("form.verification_code")}),v.errors.otp&&v.touched.otp&&(0,p.jsx)("span",{className:"for-pass-cnt__phone-err",children:v.errors.otp}),(0,p.jsx)("input",{name:"new_password",value:v.values.new_password,onChange:v.handleChange,type:"text",style:{textAlign:"center"},className:"for-pass-cnt__phone-ip",placeholder:n("Home.Sign_in_pl_password")}),v.errors.new_password&&v.touched.new_password&&(0,p.jsx)("span",{className:"for-pass-cnt__phone-err",children:v.errors.new_password}),(0,p.jsx)("input",{name:"confirm_password",value:v.values.confirm_password,onChange:v.handleChange,type:"text",style:{textAlign:"center"},className:"for-pass-cnt__phone-ip",placeholder:n("form.confirm_password")}),v.errors.confirm_password&&v.touched.confirm_password&&(0,p.jsx)("span",{className:"for-pass-cnt__phone-err",children:v.errors.confirm_password}),(0,p.jsx)("div",{className:"for-pass-cnt__time",children:u>0?(0,p.jsxs)(p.Fragment,{children:[n("form.please_wait")," ",(0,p.jsx)("span",{children:u})," ",n("form.to_get_the_verification_code_back")]}):(0,p.jsx)("span",{onClick:()=>{r(s.telephone,!0),x(90)},children:n("form.resend_code")})}),(0,p.jsxs)("button",{className:"for-pass-cnt__btn",type:"submit",children:[!0===l.loading&&(0,p.jsx)("div",{className:"sign-loading",children:(0,p.jsx)(m.Z,{size:"25px",color:"inherit"})}),n("form.continue")]})]})]})]})},x=s(61424),v=s(64192);var w=function(){const e=(0,d.k6)(),{t:n}=(0,o.useContext)(_.I);return(0,p.jsx)("div",{className:"for-head",children:(0,p.jsx)(r.Z,{children:(0,p.jsxs)("div",{className:"flex-row-sp for-head-cnt",children:[(0,p.jsxs)("div",{className:"flex-row for-head-cnt__left",children:[(0,p.jsx)("img",{onClick:()=>e.push("/"),src:v.ZP.beautyX,alt:""}),(0,p.jsx)("span",{className:"text",children:n("form.reset_password")})]}),(0,p.jsx)("div",{})]})})})};const j=e=>"+84"+e.toString().slice(1);var g=function(){const[e,n]=(0,o.useState)({telephone:"",new_password:"",code:"",verification_id:""}),[s,t]=(0,o.useState)(1),[i,c]=(0,o.useState)(!1),l=(s,o)=>{c(!0);const r=j(s);""!==r&&(!0===o&&(()=>{try{window.recaptchaVerifier=new x.lI("recaptcha-container",{size:"invisible",callback:e=>{},"expired-callback":()=>{}},x.m3)}catch(e){console.log(e)}})(),(async(s,o,r)=>{try{const o=await(0,x.$g)(x.m3,s,window.recaptchaVerifier);n({...e,telephone:r,verification_id:null===o||void 0===o?void 0:o.verificationId}),t(2),console.log(null===o||void 0===o?void 0:o.verificationId),c(!1)}catch(a){console.log(a),c(!1)}})(r,0,s))};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(w,{}),(0,p.jsx)(r.Z,{children:(0,p.jsx)("div",{className:"for-pass-cnt",children:(0,p.jsx)("div",{className:"for-pass-cnt__phone",children:(()=>{switch(s){case 1:return(0,p.jsx)(a.Z,{setValues:n,setStep:t,prevUrl:"/sign-in?1",load:i,handlePostTelephone:l});case 2:return(0,p.jsx)(u,{data:e,setStep:t,handlePostTelephone:l})}})()})})})]})}},15993:function(){}}]);
//# sourceMappingURL=674.ca33fa60.chunk.js.map