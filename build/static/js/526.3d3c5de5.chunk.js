"use strict";(self.webpackChunkweb_booking=self.webpackChunkweb_booking||[]).push([[526],{15394:function(e,i,s){s.r(i),s.d(i,{default:function(){return I}});var t=s(72791),n=s(10266),a=s(16030),r=s(16002),l=s(17983),c=s(65209),o=s(8137),d=s(94454),u=s(80315),m=s(66875),v=s(6214),h=s(4358),p=s(29818),x=s(763),g=s(96755),_=s(19598),j=s(93080),f=s(25605),N=s(3444),k=s(24483),b=s(20181),Z=s(80184);var C=function(e){const{open:i,setOpen:s,service:n,org:r}=e,l=(0,b.oG)(),o=(0,a.I0)(),d=(0,_.k6)(),{USER:u}=(0,a.v9)((e=>e.USER)),{status_cmt:m}=(0,a.v9)((e=>e.SERVICE.COMMENTS)),C=(0,a.v9)((e=>e.COMMENT)),y=[{id:1,icon:j.Z.star,iconActive:j.Z.starLine,title:"R\u1ea5t t\u1ec7"},{id:2,icon:j.Z.star,iconActive:j.Z.starLine,title:"T\u1ec7"},{id:3,icon:j.Z.star,iconActive:j.Z.starLine,title:"B\xecnh th\u01b0\u1eddng"},{id:4,icon:j.Z.star,iconActive:j.Z.starLine,title:"T\u1ed1t"},{id:5,icon:j.Z.star,iconActive:j.Z.starLine,title:"R\u1ea5t t\u1ed1t"}],[S,w]=(0,t.useState)({text:"",image_url:null,star:0,used:!0}),[E,R]=(0,t.useState)(!1),I=async e=>{(new FormData).append("file",e);try{w({...S,image_url:C.image_url})}catch(i){console.log(i)}};let B=!1;return m===c.Q.LOADING&&(B=!0),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(v.Z,{anchorOrigin:{vertical:"top",horizontal:"center"},open:E,autoHideDuration:4e3,onClose:()=>R(!1),children:(0,Z.jsxs)(h.Z,{onClose:()=>R(!1),severity:"success",sx:{width:"100%"},children:["C\u1ea3m \u01a1n ",null===u||void 0===u?void 0:u.fullname," \u0111\xe3 \u0111\xe1nh gi\xe1 d\u1ecbch v\u1ee5"]})}),(0,Z.jsxs)(p.Z,{fullScreen:l,open:i,onClose:()=>s(!1),children:[l&&i&&(0,Z.jsx)(N.Z,{onBack:()=>s(!1),title:"\u0110\xe1nh gi\xe1"}),(0,Z.jsxs)("div",{className:"review-service",children:[(0,Z.jsxs)("div",{className:"review-service-head",children:[(0,Z.jsx)("div",{className:"review-service__title",children:"\u0110\xe1nh gi\xe1 d\u1ecbch v\u1ee5"}),(0,Z.jsxs)("div",{className:"flex-row-sp review-service__item",children:[(0,Z.jsx)("img",{src:null!==n&&void 0!==n&&n.image?null===n||void 0===n?void 0:n.image_url:null===r||void 0===r?void 0:r.image_url,alt:"",className:"left",onError:e=>(0,g.bW)(e)}),(0,Z.jsxs)("div",{className:"right",children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("span",{className:"service-name",children:null===n||void 0===n?void 0:n.service_name}),(0,Z.jsx)("span",{className:"service-desc",children:null===n||void 0===n?void 0:n.description})]}),(0,Z.jsxs)("div",{className:"flex-row right_org",children:[(0,Z.jsx)("img",{src:null===r||void 0===r?void 0:r.image_url,alt:"",className:"right_org_img",onError:e=>(0,g.bW)(e)}),(0,Z.jsx)("span",{className:"right_org_name",children:null===r||void 0===r?void 0:r.name})]})]})]}),(0,Z.jsxs)("div",{className:"review-service__star",children:[(0,Z.jsx)("span",{className:"title",children:"B\u1ea1n c\u1ea3m th\u1ea5y d\u1ecbch v\u1ee5 th\u1ebf n\xe0o ?"}),(0,Z.jsx)("ul",{className:"star-list",children:y.map((e=>(0,Z.jsxs)("li",{onClick:()=>{return i=e.id,void w({...S,star:i});var i},className:"flex-column",children:[(0,Z.jsx)("img",{src:e.id<=S.star?e.icon:e.iconActive,alt:"",className:"start-icon"}),(0,Z.jsx)("span",{className:"star-feed",children:e.title})]},e.id)))})]}),(0,Z.jsxs)("div",{className:"review-service__text",children:[(0,Z.jsx)("textarea",{placeholder:"Vui l\xf2ng \u0111\u1ec3 l\u1ea1i \u0111\xe1nh gi\xe1 c\u1ee7a b\u1ea1n ...",value:S.text,onChange:e=>(e=>{w({...S,text:e.target.value})})(e),rows:4,className:"review-service__ip"}),(0,Z.jsx)("div",{className:"review-service__upload",children:(0,Z.jsxs)("div",{style:{width:"20px"},className:"upload-img",children:[(0,Z.jsx)("label",{htmlFor:"file",children:(0,Z.jsx)("img",{src:j.Z.addImg,alt:""})}),(0,Z.jsx)("input",{hidden:!0,id:"file",type:"file",name:"file",accept:"image/png, image/jpeg, video/mp4",onChange:e=>(e=>{const i=e.target.files[0];!0===S.used&&i?I(i):d.push("/sign-in?1")})(e)})]})})]}),C&&C.image_url&&(0,Z.jsxs)("div",{style:{marginTop:"24px"},className:"evaluate-input__upload",children:[(0,Z.jsx)("img",{src:C.image_url,className:"evaluate-upload__img",alt:""}),(0,Z.jsx)("button",{className:"btn-close",onClick:()=>{w({...S,image_url:null})},children:(0,Z.jsx)("img",{src:j.Z.closeCircle,alt:""})})]})]}),(0,Z.jsx)("div",{className:"review-service__btn",children:(0,Z.jsx)(k.Rb,{title:"G\u1eedi \u0111\xe1nh gi\xe1",loading:B,onClick:async()=>{const e={type:"SERVICE",id:null===n||void 0===n?void 0:n.id,org_id:null===r||void 0===r?void 0:r.id,body:JSON.stringify({...S,image_url:C.image_url})},i=(0,x.pickBy)(e,x.identity);if(u&&S.text.length>0){var t;const e=await o((0,f.y_)({values:i,user:u.USER}));"fulfilled"===(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.requestStatus)&&(s(!1),w({...S,text:"",image_url:null,star:0,used:!0}))}}})})]})]})]})};var y=function(e){const{t:i}=(0,t.useContext)(l.I),{service:s,handleServiceBook:n,order_id:r,org:c}=e,[o,v]=(0,t.useState)(!1),h=(0,a.v9)((e=>e.SERVICES_BOOK)).servicesBook.map((e=>e.ser_book_id)),p=(0,m.yp)(null===s||void 0===s?void 0:s.time_expired),x=(0,t.useCallback)((()=>{v(!0)}),[]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(C,{open:o,setOpen:v,service:s,org:c}),(0,Z.jsxs)("div",{children:[0===s.remain_time&&(0,Z.jsx)("span",{onClick:x,className:"treatment-ser-item__out",style:{marginRight:"4px"},children:"D\u1ecbch v\u1ee5 \u0111\xe3 s\u1eed d\u1ee5ng | \u0110\xe1nh gi\xe1"}),p&&s.remain_time>0&&(0,Z.jsx)("span",{style:{backgroundColor:"var(--red-cl)",color:"var(--white)"},className:"treatment-ser-item__out",children:"D\u1ecbch v\u1ee5 \u0111\xe3 h\u1ebft h\u1ea1n"}),(0,Z.jsxs)("div",{className:"treatment-ser-item",onClick:()=>{n&&!1===p&&n(s)},children:[(0,Z.jsx)(d.Z,{size:"small",sx:{color:"#7161BA","&.Mui-checked":{color:"#7161BA"},marginLeft:"-10px"},checked:h.includes(parseInt(`${r}${s.id}`))}),(0,Z.jsx)("div",{className:"treatment-ser-item__img",children:(0,Z.jsx)("img",{style:{width:"100%",height:"100%"},src:null===s||void 0===s?void 0:s.image_url,onError:e=>(0,u.ZP)(e),alt:""})}),(0,Z.jsxs)("div",{className:"treatment-ser-item__cnt",children:[(0,Z.jsx)("span",{className:"ser-name",children:null===s||void 0===s?void 0:s.service_name}),(0,Z.jsx)("span",{className:"ser-desc",children:null!==s.description&&s.description}),(0,Z.jsxs)("div",{className:"flex-row-sp",children:[s.time_expired&&(0,Z.jsxs)("div",{className:"quantity-text__time-ex",children:["H\u1ebft h\u1ea1n | ",(0,m.p6)(s.time_expired)]}),(0,Z.jsx)("div",{className:"flex-row quantity",children:(0,Z.jsx)("div",{className:"quantity-text",children:!0===s.unlimited?(0,Z.jsx)("span",{children:"Kh\xf4ng gi\u1edbi h\u1ea1n"}):(0,Z.jsxs)("span",{children:["\u0110\xe3 s\u1eed d\u1ee5ng ",s.times-s.remain_time,"/",s.times]})})})]})]})]})]})]})},S=s(37683);var w=function(e){var i,s;const n=(0,a.I0)(),{service_sold:r,card_items:l,org:c,setEnableCart:o}=e,d=null===(i=l.items[0])||void 0===i?void 0:i.order_id,u=(0,a.v9)((e=>e.SERVICES_BOOK)).order_id;(0,t.useEffect)((()=>{!1===r.unlimited?r.total_remain_time>0&&o(!1):o(!1)}),[]);const m=e=>{const i=(0,S.M3)({...e,ser_book_id:parseInt(`${d}${e.id}`),org_id:null===l||void 0===l?void 0:l.organization_id,order_id:d,org:c});null===u||u===d||n((0,S.jV)()),n(i)},v=e=>{!1===r.unlimited?r.total_remain_time>0&&m(e):m(e)};return(0,Z.jsx)(Z.Fragment,{children:null===r||void 0===r||null===(s=r.services)||void 0===s?void 0:s.map(((e,i)=>(0,Z.jsx)(y,{org:c,service_sold:r,service:e,order_id:d,handleServiceBook:v},i)))})};var E=function(e){var i,s,n;const r=(0,_.k6)(),{card_items:c}=e,o=c.organization,{t:d}=(0,t.useContext)(l.I),[u,v]=(0,t.useState)(!0),h=(0,a.v9)((e=>e.SERVICES_BOOK)),p=h.servicesBook,x=null===h||void 0===h?void 0:h.order_id;return(0,Z.jsxs)("div",{className:"treat-card-item",children:[0===(null===(i=c.appointments)||void 0===i?void 0:i.length)&&(0,Z.jsx)("div",{className:"treat-card-item__dot"}),(0,Z.jsxs)("div",{style:x===(null===c||void 0===c?void 0:c.id)&&p.length>0?{height:"24px"}:{},className:"flex-row treat-card-item__book",onClick:()=>{if(p.length>0){const e=p.map((e=>({service:e,quantity:1})));r.push({pathname:"/dat-hen",state:{org:o,services:e,order_id:x}})}},children:[d("detail_item.booking_now"),(0,Z.jsx)("img",{src:j.Z.calendarWhite,alt:""})]}),(0,Z.jsxs)("div",{className:"treat-card-item__head",children:[(0,Z.jsx)("span",{className:"org-name",children:null===o||void 0===o?void 0:o.name}),(0,Z.jsxs)("div",{className:"head_detail",children:[(0,Z.jsxs)("div",{className:"time",children:[`${d("acc.date_created")}:`,(0,Z.jsx)("span",{children:(0,m.p6)(null===c||void 0===c?void 0:c.created_at)})," ",(0,Z.jsx)("span",{children:(0,m.mr)(null===c||void 0===c?void 0:c.created_at)})]}),(0,Z.jsxs)("div",{className:"code",children:[`${d("pm.code_orders")}: `,(0,Z.jsx)("span",{children:null===c||void 0===c||null===(s=c.payment_gateway)||void 0===s?void 0:s.transaction_uuid})]})]})]}),(0,Z.jsxs)("span",{className:"flex-row-sp treat-card-item__ser-count",children:[(0,Z.jsx)("span",{className:"title",children:`${d("pm.service_list")}`}),!1===u?(0,Z.jsxs)("div",{className:"title",children:[`${d("pr.quantity")}: `," ",(0,Z.jsx)("span",{children:null===c||void 0===c?void 0:c.items_count})]}):(0,Z.jsx)("div",{style:{color:"var(--red-cl)"},className:"title",children:d("pr.end_of_use")})]}),null===c||void 0===c||null===(n=c.items)||void 0===n?void 0:n.map(((e,i)=>(0,Z.jsx)(w,{setEnableCart:v,card_items:c,org:o,service_sold:e.services_sold},i)))]})},R=s(65864);var I=function(){const e=(0,a.I0)(),{t:i}=(0,t.useContext)(l.I),s=(0,b.oG)(),{services:d,status:u,totalItem:m,page:v}=(0,a.v9)((e=>e.ORDER.ORDER_SERVICES));(0,t.useEffect)((()=>{u!==c.Q.SUCCESS&&e((0,o.SN)({page:1}))}),[]);let h=!1;return u===c.Q.LOADING&&(h=!0),(0,Z.jsxs)(Z.Fragment,{children:[0===v&&u!==c.Q.SUCCESS&&(0,Z.jsx)(R.K,{}),(0,Z.jsx)(n.Z,{children:(0,Z.jsx)("div",{className:"flex-row-sp my-ser",children:(0,Z.jsx)("div",{className:"my-ser__right",children:(0,Z.jsx)("div",{className:"my-ser-book__cnt",children:(0,Z.jsxs)("div",{className:"my-ser-book",children:[(0,Z.jsx)(r.ZP,{columns:s?1:2,spacing:s?1:3,children:d.map(((e,i)=>(0,Z.jsx)(E,{card_items:e},i)))}),d.length>=15&&d.length<m&&(0,Z.jsx)("div",{className:"my-ser-bot",children:(0,Z.jsx)(k.Rb,{title:`${i("trending.watch_all")}`,onClick:()=>{e((0,o.SN)({page:v+1}))},loading:h})})]})})})})})]})}},94454:function(e,i,s){s.d(i,{Z:function(){return C}});var t=s(63366),n=s(87462),a=s(72791),r=s(94419),l=s(12065),c=s(97278),o=s(76189),d=s(80184),u=(0,o.Z)((0,d.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,o.Z)((0,d.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),v=(0,o.Z)((0,d.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox"),h=s(14036),p=s(31402),x=s(66934),g=s(21217);function _(e){return(0,g.Z)("MuiCheckbox",e)}var j=(0,s(75878).Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);const f=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],N=(0,x.ZP)(c.Z,{shouldForwardProp:e=>(0,x.FO)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,i)=>{const{ownerState:s}=e;return[i.root,s.indeterminate&&i.indeterminate,"default"!==s.color&&i[`color${(0,h.Z)(s.color)}`]]}})((e=>{let{theme:i,ownerState:s}=e;return(0,n.Z)({color:(i.vars||i).palette.text.secondary},!s.disableRipple&&{"&:hover":{backgroundColor:i.vars?`rgba(${"default"===s.color?i.vars.palette.action.activeChannel:i.vars.palette.primary.mainChannel} / ${i.vars.palette.action.hoverOpacity})`:(0,l.Fq)("default"===s.color?i.palette.action.active:i.palette[s.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==s.color&&{[`&.${j.checked}, &.${j.indeterminate}`]:{color:(i.vars||i).palette[s.color].main},[`&.${j.disabled}`]:{color:(i.vars||i).palette.action.disabled}})})),k=(0,d.jsx)(m,{}),b=(0,d.jsx)(u,{}),Z=(0,d.jsx)(v,{});var C=a.forwardRef((function(e,i){var s,l;const c=(0,p.Z)({props:e,name:"MuiCheckbox"}),{checkedIcon:o=k,color:u="primary",icon:m=b,indeterminate:v=!1,indeterminateIcon:x=Z,inputProps:g,size:j="medium"}=c,C=(0,t.Z)(c,f),y=v?x:m,S=v?x:o,w=(0,n.Z)({},c,{color:u,indeterminate:v,size:j}),E=(e=>{const{classes:i,indeterminate:s,color:t}=e,a={root:["root",s&&"indeterminate",`color${(0,h.Z)(t)}`]},l=(0,r.Z)(a,_,i);return(0,n.Z)({},i,l)})(w);return(0,d.jsx)(N,(0,n.Z)({type:"checkbox",inputProps:(0,n.Z)({"data-indeterminate":v},g),icon:a.cloneElement(y,{fontSize:null!=(s=y.props.fontSize)?s:j}),checkedIcon:a.cloneElement(S,{fontSize:null!=(l=S.props.fontSize)?l:j}),ownerState:w,ref:i},C,{classes:E}))}))},93840:function(e,i,s){const t=s(72791).createContext();i.Z=t},52930:function(e,i,s){s.d(i,{Z:function(){return a}});var t=s(72791),n=s(93840);function a(){return t.useContext(n.Z)}},97278:function(e,i,s){s.d(i,{Z:function(){return j}});var t=s(63366),n=s(87462),a=s(72791),r=s(28182),l=s(94419),c=s(14036),o=s(66934),d=s(48744),u=s(52930),m=s(23701),v=s(21217);function h(e){return(0,v.Z)("PrivateSwitchBase",e)}(0,s(75878).Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var p=s(80184);const x=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],g=(0,o.ZP)(m.Z)((e=>{let{ownerState:i}=e;return(0,n.Z)({padding:9,borderRadius:"50%"},"start"===i.edge&&{marginLeft:"small"===i.size?-3:-12},"end"===i.edge&&{marginRight:"small"===i.size?-3:-12})})),_=(0,o.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1});var j=a.forwardRef((function(e,i){const{autoFocus:s,checked:a,checkedIcon:o,className:m,defaultChecked:v,disabled:j,disableFocusRipple:f=!1,edge:N=!1,icon:k,id:b,inputProps:Z,inputRef:C,name:y,onBlur:S,onChange:w,onFocus:E,readOnly:R,required:I,tabIndex:B,type:O,value:F}=e,z=(0,t.Z)(e,x),[$,P]=(0,d.Z)({controlled:a,default:Boolean(v),name:"SwitchBase",state:"checked"}),M=(0,u.Z)();let V=j;M&&"undefined"===typeof V&&(V=M.disabled);const L="checkbox"===O||"radio"===O,q=(0,n.Z)({},e,{checked:$,disabled:V,disableFocusRipple:f,edge:N}),A=(e=>{const{classes:i,checked:s,disabled:t,edge:n}=e,a={root:["root",s&&"checked",t&&"disabled",n&&`edge${(0,c.Z)(n)}`],input:["input"]};return(0,l.Z)(a,h,i)})(q);return(0,p.jsxs)(g,(0,n.Z)({component:"span",className:(0,r.Z)(A.root,m),centerRipple:!0,focusRipple:!f,disabled:V,tabIndex:null,role:void 0,onFocus:e=>{E&&E(e),M&&M.onFocus&&M.onFocus(e)},onBlur:e=>{S&&S(e),M&&M.onBlur&&M.onBlur(e)},ownerState:q,ref:i},z,{children:[(0,p.jsx)(_,(0,n.Z)({autoFocus:s,checked:a,defaultChecked:v,className:A.input,disabled:V,id:L&&b,name:y,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const i=e.target.checked;P(i),w&&w(e,i)},readOnly:R,ref:C,required:I,ownerState:q,tabIndex:B,type:O},"checkbox"===O&&void 0===F?{}:{value:F},Z)),$?o:k]}))}))}}]);
//# sourceMappingURL=526.3d3c5de5.chunk.js.map