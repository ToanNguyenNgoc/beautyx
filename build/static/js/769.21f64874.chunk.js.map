{"version":3,"file":"static/js/769.21f64874.chunk.js","mappings":"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","sources":["webpack://web-booking/./src/pages/Trends/trends.module.css?6c50","pages/Trends/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container_large\":\"trends_container_large__B3usY\",\"trend_list\":\"trends_trend_list__b0stv\",\"video_item_cnt\":\"trends_video_item_cnt__Y04IM\",\"trend_list_video_thumb\":\"trends_trend_list_video_thumb__fiLD0\",\"trend_item_head\":\"trends_trend_item_head__bhL+j\",\"trend_item_center\":\"trends_trend_item_center__LyHmS\",\"trend_item_body\":\"trends_trend_item_body__pIhpM\",\"trend_item_img_thumb\":\"trends_trend_item_img_thumb__xQ2c9\",\"trend_item_video_thumb\":\"trends_trend_item_video_thumb__QZNby\",\"trend_item_bot_ex\":\"trends_trend_item_bot_ex__3tgm-\",\"trend_item_desc\":\"trends_trend_item_desc__kPdxa\",\"trend_item_bot_org\":\"trends_trend_item_bot_org__Alayd\",\"trend_item_bot_org_img\":\"trends_trend_item_bot_org_img__XSgoS\",\"trend_item_bot_org_name\":\"trends_trend_item_bot_org_name__FHDqR\",\"trend_item_head_org\":\"trends_trend_item_head_org__j14Ob\",\"trend_item_head_name\":\"trends_trend_item_head_name__RXuqV\",\"org_name\":\"trends_org_name__0zme9\",\"create_at\":\"trends_create_at__TG4lF\",\"trend_item_bot\":\"trends_trend_item_bot__GH2bq\",\"item_ex\":\"trends_item_ex__Jx-cl\",\"item_ex_icon\":\"trends_item_ex_icon__zyDMA\",\"item_ex_text\":\"trends_item_ex_text__FYVm1\"};","/* eslint-disable react-hooks/exhaustive-deps */\nimport API_3RD from \"api/3rd-api\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { useDeviceMobile, useElementOnScreen } from \"hooks\";\nimport { ITrend } from \"./trend.interface\";\nimport { Container } from \"@mui/system\";\nimport style from \"./trends.module.css\";\nimport icon from \"constants/icon\";\nimport { useHistory } from \"react-router-dom\";\nimport { formatRouterLinkOrg } from \"utils/formatRouterLink/formatRouter\";\nimport TrendDetailDia from \"./TrendDetailDia\";\nimport HeadMobile from \"features/HeadMobile\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport axios from \"axios\";\nimport { STALE_TIME } from \"config\";\nimport { formatDateFromNow } from \"utils\";\n\nfunction Trends() {\n    const history = useHistory()\n    const IS_MB = useDeviceMobile()\n    const params = {\n        'limit': '20',\n        'include': 'services|tiktok'\n    }\n    const { data } = useQuery({\n        queryKey: ['TRENDS', params],\n        queryFn: () => axios.get(`${API_3RD.API_NODE}/trends`, { params }),\n        staleTime: STALE_TIME\n    })\n    const trends: ITrend[] = data?.data?.data?.context?.data ?? []\n    return (\n        <>\n            {IS_MB && <HeadMobile onBackFunc={() => history.push('/homepage')} title=\"Xu hướng\" />}\n            <Container>\n                <div className={style.container_large}>\n                    <ul className={style.trend_list}>\n                        {\n                            trends.map((item: ITrend, index: number) => (\n                                <li key={index} className={style.trend_list_video_thumb}>\n                                    <VideoItemThumb\n                                        item={item}\n                                    />\n                                </li>\n                            ))\n                        }\n                    </ul>\n                </div>\n            </Container>\n        </>\n    );\n}\n\nexport default Trends;\n\ninterface VideoItemThumbProps {\n    item: ITrend\n}\n\nconst VideoItemThumb = (props: VideoItemThumbProps) => {\n    const { item } = props;\n    const history = useHistory()\n    const videoRef = useRef<HTMLVideoElement>(null)\n    const itemRef = useRef<HTMLDivElement>(null)\n    const [open, setOpen] = useState(false)\n    const IS_MB = useDeviceMobile()\n    const onDetail = () => {\n        if (IS_MB) {\n            videoRef.current?.pause()\n            setOpen(true)\n        } else {\n            history.push(`/video/${item._id}`)\n        }\n    }\n\n    const options = {\n        root: null,\n        rootMargin: \"0px\",\n        threshold: 0.3,\n    };\n    const isVisible = useElementOnScreen(options, itemRef);\n    const onVideoPress = () => {\n        if (isVisible) {\n            videoRef.current?.play();\n        } else {\n            videoRef.current?.pause();\n        }\n    };\n    useEffect(() => {\n        if (IS_MB) { onVideoPress() }\n        return () => videoRef.current?.pause()\n    }, [isVisible])\n\n    const onOrgDetail = () => {\n        history.push(formatRouterLinkOrg(item.organization_id))\n    }\n    const onTriggerPlay = (play: boolean) => {\n        if (!IS_MB) {\n            if (play) { videoRef.current?.play() }\n            if (!play) { videoRef.current?.pause() }\n        }\n    }\n    return (\n        <>\n            <div\n                onMouseEnter={() => onTriggerPlay(true)}\n                onMouseLeave={() => onTriggerPlay(false)}\n                onClick={!IS_MB ? () => onDetail() : () => { }}\n                className={style.video_item_cnt}\n            >\n                <div ref={itemRef} className={style.trend_item_center} >\n                </div>\n                <div\n                    onClick={onOrgDetail}\n                    className={style.trend_item_head}\n                >\n                    <div className={style.trend_item_head_org}>\n                        <img src={item.organization_image} alt=\"\" />\n                    </div>\n                    <div className={style.trend_item_head_name}>\n                        <p className={style.org_name}>{item.organization_name}</p>\n                        <p className={style.create_at}>\n                            {formatDateFromNow(item.createdAt)}\n                        </p>\n                    </div>\n                </div>\n                <div className={style.trend_item_body}>\n                    <video\n                        ref={videoRef}\n                        className={style.trend_item_video_thumb}\n                        muted={true}\n                        controls={IS_MB}\n                        webkit-playsinline=\"webkit-playsinline\"\n                        playsInline={true}\n                        poster={item.image_thumb}\n                    >\n                        <source src={item.media_url} />\n                    </video>\n                </div>\n                <div className={style.trend_item_bot}>\n                    <div onClick={onDetail} className={style.trend_item_bot_ex}>\n                        <div className={style.item_ex}>\n                            <img className={style.item_ex_icon} src={icon.heartBoldBlack} alt=\"\" />\n                            <span className={style.item_ex_text}>{item.tiktok?.digg_count}</span>\n                        </div>\n                        <div className={style.item_ex}>\n                            <img className={style.item_ex_icon} src={icon.commentBoldBlack} alt=\"\" />\n                            <span className={style.item_ex_text}>{item.tiktok?.comment_count}</span>\n                        </div>\n                        <div className={style.item_ex}>\n                            <img className={style.item_ex_icon} src={icon.shareBoldBlack} alt=\"\" />\n                            <span className={style.item_ex_text}>{item.tiktok?.share_count}</span>\n                        </div>\n                    </div>\n                    <p className={style.trend_item_desc}>\n                        {item.content}\n                    </p>\n                    <div className={style.trend_item_bot_org}>\n                        <div className={style.trend_item_bot_org_img}>\n                            <img src={item.organization_image} alt=\"\" />\n                        </div>\n                        <span className={style.trend_item_bot_org_name}>{item.organization_name}</span>\n                    </div>\n                </div>\n            </div>\n            <TrendDetailDia\n                open={open} setOpen={setOpen} _id={item._id}\n            />\n        </>\n    )\n}"],"names":["_data$data$data$conte","_data$data","_data$data$data","_data$data$data$conte2","history","useHistory","IS_MB","useDeviceMobile","params","data","useQuery","queryKey","queryFn","axios","API_3RD","staleTime","STALE_TIME","trends","context","_jsxs","_Fragment","children","_jsx","HeadMobile","onBackFunc","push","title","Container","className","style","map","item","index","VideoItemThumb","props","_item$tiktok","_item$tiktok2","_item$tiktok3","videoRef","useRef","itemRef","open","setOpen","useState","onDetail","_videoRef$current","current","pause","_id","isVisible","useElementOnScreen","root","rootMargin","threshold","useEffect","onVideoPress","_videoRef$current2","_videoRef$current3","play","_videoRef$current4","onTriggerPlay","_videoRef$current5","_videoRef$current6","onMouseEnter","onMouseLeave","onClick","ref","onOrgDetail","formatRouterLinkOrg","organization_id","src","organization_image","alt","organization_name","formatDateFromNow","createdAt","muted","controls","playsInline","poster","image_thumb","media_url","icon","tiktok","digg_count","comment_count","share_count","content","TrendDetailDia"],"sourceRoot":""}